EM78612 Product Specification ELAN MICROELECTRONICS CORP. March OC ERSION
Acknowledgments: IBM and PS/2 of IBM. of Microsoft Corporation. ELAN and ELAN Copyright ELAN Corporation Rights Printed The of this to without ELAN concerning the accuracy, or of this ELAN to or to the information and contained this specification. information and to to each confirmed ELAN to attributed to or other the information or this ELAN indirect, or of the of such information or The software this furnished or and or with the terms of such ELAN products or of ELAN such and prohibited. NO PART OF THIS SPECIFICATION MAY BE REPRODUCED OR TRANSMITTED IN ANY FORM OR BY ANY MEANS WITHOUT THE EXPRESS WRITTEN PERMISSION OF ELAN MICROELECTRONICS. Headquarters: Science-based //www.emc.com.tw SWITZERLAND //www.elan-europe.com of ELAN Corporation. (HK) Corporation, 1005B, 10/F Road, HONG KONG SSMEC 3F, S. CHINA USA: Information CA USA Corporation, CHINA
Applications Function Function Memory USB Application I/O Function USB PS/2 or USB USB and WatchDog USB Clock Product Specification (V1.0) (This to without further EM78612 Universal
EM78612 DC Characteristic Application APPENDIX A. B. Instruction C. option Product Specification(V1.0) (This to without further
Revision Initial Product (V1.0) (This to without further Specification Revision History EM78612 Universal
EM78612 Universal The EM78612 of RISC It specifically USB and to such as PS/2 The EM78612 and The EM78612 RISC architecture. It and The amount of to12. Each SRAM. The ROM of the EM78612 2K. These of Clock which allows the to Low-cost low-speed USB such as and USB Specification USB Class Definition Interface (HID), USB Application USB USB and USB commands to EndPoint PS/2 Application PS/2 interface RISC MCU subroutine and clock/counter (TCC) with RC free WatchDog and clock WDT and TCC of I/O Product Specification(V1.0) Specification and (EP0 and EP1) (SLEEP clocks instruction (This to without further
Memory MASK ROM (SRAM) USB Application Normal MCU the Clock MCU the of (or 3.3V MCU supply the USB PDIP(300MIL) SOP(150MIL) (EM78612 AP AM) PDIP(300MIL) SOP(300MIL) (EM78612 BP BM) PDIP(300MIL) SOP(300MIL) (EM78612 CP CM) SSOP(209MIL) (EM78612 FM) Applications This USB or It PS/2 Product Specification (V1.0) (This to without further to I/O and to LED GPIO of internal pull-high Each GPIO of internal GPIO the MCU from input the with the turned off to EM78612 Universal
EM78612 Universal Product Specification(V1.0) P61 P62 P64 P63 P65 P70 P71 P72 D+/P50 VSS D-/P51 DD V3.3V OSCI OSCO P60 P61 P65 P62 P66 P63 P67 P70 P71 P72 D+/P50 SS D-/P51 3.3V DD OSCI OSCO P60 P61 P65 P62 P66 P63 P67 P70 P71 P72 P73 NC D+/P50 SS D-/P51 3.3V DD OSCI OSCO EM78612A P60 EM78612B P64 EM78612C P64 (This to without further
I/O Function OSCI input. OSCO I/O 3.3V DC from internal This should to 3.3V offers to GIOP P60 P67 I/O P70 P73 I/O D+ P50 I/O D- P51 I/O to the USB or to supply. DD DD 4.4V and 5.2V. SS to ground. Product Specification (V1.0) (This to without further to GND. The high 132K and 10K selected through offers to GIOP The of P70 P71 LED. Each high 132K that selected through USB interface or PS/2 interface through firmware the EM78612 PS/2 this internal pulled-high (2.2K with DD =5.0V. this as PS/2 interface, when its USB interface or PS/2 interface through the EM78612 PS/2 this internal pulled-high (2.2K with DD =5.0V. this as PS/2 interface, when its the EM78612 USB this internal pulled-high with =3.3V. EM78612 Universal
EM78612 Universal Function Block OSCI OSCO RC TCC WDT RAM WDT I/O Function The memory of EM78612 four Memory MASK ROM Memory SRAM and USB Application and Furthermore, Memory The of the EM78612 2K and Each 1K the Counter (PC) to location of the It vectors, Vectors and USB Application Vectors The to TCC and State Changed The USB Application USB EndPoint USB USB and USB the MCU the instruction from the as the following Product Specification(V1.0) VDD V3.3 3.3V R1 (TCC) R4 (RSR) DATA CONTROL BUS I/O EM78612 Function D+ D- USB
I/O
(This to without further R2 (PC) ROM R3 Instruction ALU Instruction ACC
Counter Memory The Memory SRAM It with USB Application FIFO USB Application. The shows the of the Memory the the instruction, such which records the I/O which the I/O The EM78612 of other with There which located from to On other hand, to functions or I/O These from to Product (V1.0) (This to without further that only or written instructions; IOR and IOW. EM78612 Universal USB Application
EM78612 Universal The following each of the Operation the The to the of that only, while others both and writable. R0 (Indirect (0B_0000_0000) R0 implemented Its function to indirect instruction R0 as actually the the RAM Select (R4). R1 Clock Counter) (0B_0000_0000) This TCC, or counter. It and writable as other The instruction The around this writing The when the R1 overflows from to This TCIF(RF[0]). The clearing TCIE (IOCF[0]).After and WatchDog the of this Product Specification(V1.0) R0 (Indirection R1 Clock Counter R2 Counter) R3 R4 (RAM Select R5 I/O R6 I/O R7 I/O R8 selection R9 selection RC (USB Application RD (USB Application FIFO RE (USB Application FIFO RF 0C 0D 0E 0F 1F 3F The of EM78612 RAM IOC5 I/O IOC6 I/O IOC7 I/O IOC8 IOCA IOCB IOCC high IOCD high IOCE Function IOCF of EP0 of EP1 (This to without further FIFO FIFO
R2 Counter (0B_0000_0000) The EM78612 Counter that allows to 2K of Memory with The LSB located R2, while the MSB located R3 [5].The Counter cleared or WatchDog The first instruction that located R3 R3 Carry ADD SUB Instructions carry-out from the of the occurred carry-out from the of the occurred R3 /borrow ADD SUB Instructions carry-out from the low-order of the occurred carry-out from the low-order of the Product (V1.0) (This to without further R3 R2 PAGE0 03FF PAGE1 07FF The of ROM PS0 DC C Borrow, the polarity reversed.For (RRC, RLC) instructions, this with the high or low-order of the Borrow, the polarity reversed. EM78612 Universal CALL RET RETL RETI NOTE NOTE
EM78612 R3 It to when the of arithmetic or operation R3 It to phase or WDTC R3 Time-out It to phase or WDTC command. The of and Time-out shown below: R3 selection This to of memory to R3 Product Specification(V1.0) and cleared when the MCU It previous WatchDog Power-on. It to WDT WatchDog without overflow. WatchDog with overflow. WDTC instruction *P WDT time-out caused *P: Previous WDT R2, Counter). PS0 Memory [Address] [0000-03FF] [0400-07FF] Condition (This to without further
R4 (RAM Select R4 (RAM the of the R4 to The R4 to To to the R5 I/O (0B_0000_0000) R5 USB D+ or PS/2 clock interface R5 USB D- or PS/2 interface These BOTH writable and when the MCU operating PS/2 USB these accessed. R5 NON Used .The R6 I/O (0B_0000_0000) P67 P66 P65 P64 P63 P62 P61 P60 R7 I/O (0B_0000_0000) R8 Selection (0B_1111_1111) R8 Select which of the to to the MCU from Product Specification (V1.0) (This to without further BK0 SRAM following and the below R4=01111100 to the RAM D- or DATA D+ or CLK P73 P72 P71 P70 the of the selected the MCU and the instruction automatically. the function EM78612
EM78612 Universal R9 Selection (0B_1111_1111) R9 Select which of the to to the MCU from RC (USB Application (0B_0000_0000) EP0_W EP0_R EP1_R RC MCU or RC EP0 this to that the UDC RC If this to that USB RC This firmware to to RC The RC EP1_R EP0_R These inform the UDC to the written Product Specification(V1.0) the function the of the selected the MCU and the instruction automatically. the function the function from host, this to the to the UDC to STALL SETUP received, this cleared automatically. This both and writable. writing the EP0FIFO or reading from this the the FIFO UDC finishes writing or reading. This the specified of This cleared when activity This only This should the USB and cleared as as the USB becomes This and cleared the This should firmware from the FIFO. Then the UDC the to the automatically. UDC finishes reading the from the FIFO, this cleared automatically. (This to without further
RC EP0_W the UDC writing to the FIFO, this RD (USB Application FIFO (0B_0000_0000) UAD4 UAD3 UAD2 UAD1 UAD0 RD USB Application FIFO These the RD The RE (USB Application FIFO (0B_0000_0000) UD7 UD6 UD5 UD4 UD3 UD2 UD1 UD0 RE (USB Application FIFO the the of which pointed RD. Product (V1.0) (This to without further Therefore, writing the FIFO, the firmware first this to overwriting the existing These the firmware and cleared the automatically. The clear as as the from FIFO. when this cleared that the UDC to write the FIFO. Therefore, the firmware write the FIFO, this first the to UDC from writing the This both and writable. of USB Application FIFO. NOTE to the fourth of the EndPoint the of EP0 and of EP0 to the of the EP0 FIFO the of EP0 (0X10) with 0X03. MOVA, @0X10 MOVRD, to RD MOVA, @0X03 MOVRE to RE Then the from EP0 FIFO MOVA, @0X00 MOVRD, Assign to EP0 FIFO MOVA, RE the fourth of the EP0 FIFO MOV A, 0X0E// the fifth of the EP0 FIFO EM78612 Universal
EM78612 Universal RF (0B_0000_0000) RF TCC Overflow It while TCC overflows, and RF EndPoint It when the EM78612 RF USB It when the EM78612 the USB RF USB It when the the USB RF USB It Clock when RF State It when the RF and R10~R1F These what Selector There BK1) R20~R3F Select R4 the (A), these and written instructions. One of these CONT, the instruction "CONTR" and written "CONTW" instruction. The the instruction "IOR" and written the instruction "IOW." The that and of arithmetic It Product Specification(V1.0) State USB USB USB EP0_IF TCC_IF Change_IF cleared the firmware. /Customer Command to EndPoint This cleared the firmware. USB This cleared the firmware. the USB becomes PS/2 (This to without further
CONT RW_E /INT TSR2 TSR1 TSR0 PSR2 PSR1 PSR0 CONT WatchDog These three as the CONT TCC The relationship the and these as shown below: PSR2/TSR2 PSR1/TSR1 PSR0/TSR0 TCC Rate WDT Rate CONT This function CONT Remote This to to IOC5 ~IOC7 I/O Direction the I/O of three I/O respectively. these to the I/O become input Similarly, the I/O becomes when the cleared. Product (V1.0) (This to without further The CONT the instruction "CONTR" and written the instruction CONTW." of WatchDog and It to the instruction "DISI" and the instructions "ENI" or "RETI." the function. the function. PC. It EM78612 Universal NOTE
EM78612 IOC5 I/O (0B_0000_0011) IOC5 The IOC6 I/O (0B_1111_1111) P67 P66 P65 P64 P63 P62 P61 P60 IOC7 I/O (0B_0000_1111) IOC8 (0B_0000_0000) IOC8 P70/P71 offered The IOCA (0B_1100_0011) PS/2 USB IOCA These to the operation The of Product Specification(V1.0) P51 P50 P73 P72 P71 P70 selection: these the below. IOCA[1] IOCA[0] Operation USB (This to without further
IOCA The IOCA Select the operation Clock IOCB Pull-Low (0B_0000_0000) PL67 PL66 PL65 PL64 PL63 PL62 PL61 PL60 IOCB Select whether the 10K pull-low of IOCC Pull-High (0B_0000_0000) PH67 PH66 PH65 PH64 PH63 PH62 PH61 PH60 IOCC Select whether the 132K pull-high of Product Specification (V1.0) (This to without further PS/2 USB and chosen as Clock the MCU connected or the pull-low function. the pull-low function. connected or the pull-high function. the pull-high function. EM78612 Universal
EM78612 Universal IOCD Pull-High (0B_0000_0000) IOCD Select whether the 132K pull-high of IOCE Function (0B_1111_0000) clock /WUE WTE RUN IOCE The IOCE This cleared the and IOCE WatchDog The the WatchDog IOCE the function as port-change. This IOCE clock This to the of Product Specification(V1.0) PH73 PH72 PH71 PH70 connected or the pull-high function. the pull-high function. or the the of this cleared, the clock and the MCU At the of from high to this to the clock The EM78612 normally. The EM78612 WDT. WDT. If the Option WTC WDT UDC. the function. the function. clock. this cleared, the MCU and the UDC Selects EM78612 to Selects to NOTE (This to without further
IOCF (0B_0 State USB USB USB EP0_IE TCC_IE Change_IE IOCF TCC EP0 USB USB USB IOCF[6] and when the the ENI instruction that the DISI instruction, the respective of IOCF to The USB clock This when the MCU the UDC automatically. USB Application USB Application, EM78612 (FIFO) each The directly. each to the of the FIFO The of the to Product Specification (V1.0) (This to without further State These respectively the function of TCC EP0 USB USB USB State its associated the IOCF to EM78612 Universal
EM78612 Universal TT I/O The EM78612 to I/O which classifies and Each internal that individually selected The following the features o EM78612 I/O P70 and P71 that of to The of from to which IOC8 and IOC8 to the of P70/P71. The Function of the GPIO and the MCU through from input This function to the MCU from It the function USB Product Specification(V1.0) ?A@CBED F: ?GBEHJIK@L ?A@CBED F: ?GBEHJIK@ IM@CLN OMPRQ PCS IM@ OMPRQ PCS .E/ ;>D \ED BEF8^ _<FD BEF8!^ (This to without further
of the of and to the MCU their respective R8 and R9. USB Application EM78612 specially USB and that the firmware to free from aspects of USB PS/2 or USB the EM78612 connected to the the firmware should and which type of (USB or PS/2) connected to. The that influence function below: the of IOCA the operation The firmware the of R5 If the with which these the as USB the D- I/O internal If the operation PS/2 both of the PS/2 interface I/O USB This D+ and D- I/O and only USB Application Therefore, 1.5K to D- IO to 3.3V. PS/2 both PS/2 to the State to the MCU while the of these Product (V1.0) (This to without further and the D+ and D- I/O internal high 200K to VDD. the IOCA to to the USB the IOCA to to PS/2 pulled high 1.5K to 3.3V, which from built-in internal pulled high 2.2K to DD The should the USB or PS/2 the of EM78612 Universal NOTE
EM78612 Universal USB The USB (UDC) built-in the EM78612 the USB Command and without firmware. The Interface (SIE) the and of USB his perfecting the and with USB The UDC and USB commands the USB If UDC command, to MCU the of such command. The Commands that EM78612 includes; Clear Interface, Address, and Interface. UDC USB command, writes the command FIFO. when that the UDC the MCU through Therefore, EM78612 USB the freely choose the of the USB as and EM78612 EP0 and EP1 to USB EM78612 easy. write FIFO, then and the UDC the It then that the USB the from EM78612. The EM78612 three of WatchDog and USB when the attached to and initiated. The the MCU becomes the MCU following below), and then, ready to the A. The counter cleared. B. The TCC and WatchDog cleared. Product Specification(V1.0) (This to without further
C. and to The MCU that Whenever the of the 3.3V to below 2.2V, off. WatchDog the WatchDog overflows, the WatchDog to the from the and The UDC however, unaffected. USB UDC USB USB the MCU, then to the specified that follows. USB attached to the USB to USB from the The EM78612 options of conservation, and Clock The EM78612 clearing the RUN (IOCE[4]). this the off and the MCU to It when from USB resumed, or when the WatchDog or the input If the MCU when I/O the of I/O should input then the of the to input MOV A,@0XFF IOW PORT6 the of MOV PORT6,PORT6 Clear the RUN IOR 0X0E AND A,@0B11101111 IOW 0X0E Product (V1.0) (This to without further EM78612 Universal
EM78612 Clock The EM78612 internal Clearing the IOCE the At the the turned off. Then the MCU to of selection IOCA The USB this If this the MCU when the USB USB The EM78612 vectors, and the other while the MCU to the or and the instructions from RF the that records the the The of the following: TCC Overflow the Clock Counter (R1) overflows, the EP0 the UDC USB UDC USB USB the USB the UDC USB USB USB UDC that the USB the State the input the IOCF which individually While their respective written to the that the EM78612 to the to instructions. the records the whether the or The Product Specification(V1.0) RF[0] to Its 0X0001. from to the RF[1] to Its 0X000A. RF[2] to Its 0X000A. the RF[3] to Its 0X000A. the RF[4] to Its 0X000A. RF[5] to Its 0X0001. (This to without further
cleared leaving the service and The the ENI (RETI) instruction and the DISI instruction. If of RF asserted, the requested. The of USB, TCC USB TCC. The of the occurred including C C Product Specification (V1.0) (This to without further the instruction RETI executed. to C R3 and R4. A, B, and C the Clear R3andR4. If the instruction RETI executed, R3 and R4. to and E and F the Unit EM78612 Universal
EM78612 DC Characteristic (T VDD 5V, VSS 0V) Condition Unit of DD 5V detecting high Ireg 3.3V V3.3 3.3V VIN= DD ,VSS IL input IHX Clock High OSCI ILX Clock OSCI DD operating supply CC1 Normal operation supply SB WDT IH High IL IH High IL High OH1 2.4V OH1 P72~P73) REG 3.3V OL2 0.4V OL1 REG 3.3V High OH2 2.4V OH2 DD 5V OL2 2.4V OL2 DD 5V The input with PH Pull-high pull-high of or connected to SS The input with internal PL Pull-low pull-low of connected to DD Condition Unit USB Interface OH Static High OL Static DI CM Command SE Threshold USB Product Specification(V1.0) 3.3V MCU GPIO USB operation (This to without further
C IN RG of Pull-high PH (D-) OUT 0.4V, P70, P71 IOC8[0,1] or IOC8[4,5] OUT 0.4V, P70, P71 IOC8[0,1] or IOC8[4,5] OUT 0.4V, P70, P71 IOC8[0,1] or IOC8[4,5] OUT 0.4V, P70, P71 IOC8[0,1] or IOC8[4,5] Product Specification (V1.0) (This to without further EM78612 Universal
EM78612 Universal Application EM78612_CP V3.3 C3 C4 A. C1 and C2 to MCU VDD B. Y1, C4 and C5 to MCU OSCI C. USB to C3 to MCU V3.3 D. and 3.3V I/O. E. input only and without internal pull-high and pull-low Product Specification(V1.0) P64 P60 P65 P61 P66 P62 P67 P63 P71 P70 P72 P73 D+/CLK NA D-/DATA VSS VDD V3.3 OSCI OSCO Y1 C5 or P50 IF IOCA USB that D- pull-high to V3.3 with VDD P51 C2 C1 (This to without further USB Application VDD V3.3 J1 R1 P51 P50 USB IF IOCA USB MCU D- internal pull-high to V3.3 with PS/2 Application J2 P50 P51 PS/2 IF IOCA PS/2 MCU CLK and DATA internal pull-high to VDD with VDD
A. R0 Indirect Addressing 0B_0000_0000 R1(TCC) Timer/Clock Counter 0B_0000_0000 R2(PC) Counter 0B_0000_0000 R3(STATUS) PS0 DC C R4(RSR) BK0 Select the 00~3F) the indirect P51/D- 0B_0000_0000 P67 P66 P65 P64 P63 P62 P61 P60 0B_0000_0000 P73 P72 P71 P70 0B_1111_1111 Selection) 0B_1111_1111 Selection) UDC RC EP0_W EP0_R EP1_R STALL 0B_0000_0000 _SUSPEND _Writing RD USB Application FIFO 0B_0000_0000 RE USB Application FIFO 0B_0000_0000 RF EP1_IF change_IF CONT RW_E INT TSR2 TSR1 TSR0 PSR2 PSR1 PSR0 0B_0100_0000 IOC5 0B_0000_0011 Direction IOC6 0B_1111_1111 Direction IOC7 0B_0000_1111 Direction IOC8 0B_0000_0000 IOC9 IOCA PS/2 USB 0B_1100_0000 IOCB /PL67 /PL66 /PL65 /PL64 /PL63 /PL62 /PL61 /PL60 0B_0000_0000 IOCC /PH67 /PH66 /PH65 /PH64 /PH63 /PH62 /PH61 /PH60 0B_0000_0000 /PH73 /PH72 /PH71 /PH70 IOCD 0B_0000_0000 IOCE clock /WUE WTE RUN 0B_1111_0000 USB USB Port5_State_ USB HOST EP1_IE IOCF EP0_IE TCC_IE 0B_0000_0000 Change_IE Product Specification (V1.0) (This to without further EM78612 Universal USB IF USB USB 0B_0000_0000 EP0_IF TCC_IF P50/D+ 0B_0000_0000 /CLK /DATA
EM78612 Universal B. Instruction instruction the instruction OP and or instructions within instruction (consisting of the counter by- the instruction "MOV R2,A", "ADD R2,A", "TBL", or other instructions that write to R2 "SUB R2,A", "BS R2,6", "CLR R2", CALL, RET, RETI, RETL, JMP, (JBS, JBC, JZ, JZA, DJZ, DJZA) which tested to these the instruction the instruction the following features: Every of cleared, or tested directly. The I/O as That the instruction I/O The "R" that which of the (including and to the instruction. and R4 the selected field that selects the the located the "R" and affects operation. or or INSTRUCTION BINARY HEX MNEMONIC OPERATION STATUS AFFECTED NOP DAA C CONT CONTW SLEP WDT, T,P WDTC WDT T,P IOCR IOW ENI DISI RET [Top of PC [Top of PC, RETI CONT CONTR IOR IOCR R2+A R2, TBL Z,C,DC of R2 MOV R,A CLRA CLR SUB A,R R-A Z,C,DC R-A SUB R,A Z,C,DC R-1 DECA Product Specification(V1.0) (This to without further
INSTRUCTION BINARY HEX MNEMONIC OPERATION STATUS AFFECTED DEC R-1 OR A,R VR VR OR R,A AND A,R AND R,A XOR A,R XOR R,A ADD A,R Z,C,DC ADD R,A Z,C,DC MOV A,R MOV R,R /R COMA COM /R INCA R+1 R+1 INC R-1 A, DJZA R-1 R, DJZ RRCA C R(0) C, C A(7) RRC C R(0) C, C R(7) RLCA C R(7) C, C A(0) RLC C R(7) C, C R(0) R(0-3) A(4-7), SWAPA R(4-7) A(0-3) R(0-3) R(4-7) SWAP JZA R+1 A, JZ R+1 R, BC R,b R(b) BS R,b JBC R,b R(b)=0, JBS R,b R(b)=1, PC+1 [SP], CALL PC PC JMP MOV OR Product (V1.0) (This to without further EM78612 Universal
EM78612 Universal INSTRUCTION BINARY HEX MNEMONIC OPERATION STATUS AFFECTED AND XOR A, [Top of PC RETL SUB Z,C,DC ADD Z,C,DC This instruction to only. This instruction recommended RE, RF operation. Option Product Specification(V1.0) (This to without further
EM78612 CODE option which of the memory. The option Selection. The MCU The MCU (OST_1 OST_0) type selector. (R.S.) Switch. of internal USB D- high internal USB D- high :The fixed. Product (V1.0) (This to without further OST_1 OST_0 R.S. EM78612 Universal