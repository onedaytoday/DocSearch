MVME3100 and P/N: 6806800M28C Computing Business-Critical Continuity TM
Emerson, Business-Critical Continuity, Emerson Network and the Emerson Network and service of Emerson Emerson other or service the property of their respective owners. or of Corporation or its the United States and other and other or of Microsystems, Inc. the U.S. and other countries. Microsoft and of Microsoft Corporation; and XP of Microsoft Corporation. PICMG CompactPCI AdvancedTCA and the PICMG, CompactPCI and AdvancedTCA of the PCI Group. UNIX of The the United States and other While reasonable to the of this Emerson from this or from the of the information obtained Emerson the right to this and to from to the hereof without of Emerson to of such or of this or referenced another as URL to Emerson The text published or edited, translated, or otherwise without the of Emerson, It that this reference to or information about Emerson products and or services that country. or information to that Emerson to announce such Emerson products, or services country. If the supplied, directly or indirectly, to the U.S. Government, the following apply otherwise to writing Emerson. or the Government to as forth of the Rights Technical DFARS and of the Rights Software and DFARS and Restricted Rights Emerson Network Computing Emerson rights Notice South AZ USA
About this About this of the of this the MVME3100 the below. MPC8540 III integrated MB DDR MVME3100-1152 SDRAM, 64MB flash, SATA, IEEE MVME3100-1263 MPC8540 III integrated 512MB DDR SDRAM, MB flash, SATA, USB, PCI IEEE MVME721-101 Rear Transition PIM PMC-1 I/O, four Abbreviations This the following abbreviations: AC ASIC Application Integrated ATA Advanced BLT CMC Common Card COM Communication COP Common On-chip COTS Commercial-Off-the-Shelf CPU Processing Unit CTS Clear To DC Direct DDR Rate DIN DMA Direct Memory Access DPA Access DRAM Access Memory MVME3100 and (6806800M28C)
DUART ECC Correction ENET Ethernet ENV ESD FAT Table FEC Ethernet FIFO First FPU Floating Unit GA Geographic GENET Ethernet GEV GMII Interface GPCM Chip IBCA Communication IDE Integrated I/O IEEE of and LBC LED Light MB MBLT Block MIIM MII MMU Memory Unit MPU Memory Protection Unit MTBF Mean MVME3100 and (6806800M28C) Unit About this
About this About this NVRAM Non RAM OS PAL Physical Abstraction PCB Printed PCI Interface PCI-X Peripheral -X PHY Physical PIC PIM PCI Card PLD PMC PCI Card (IEEE P1386.1) POST On PMC QUART Universal RAM Access Memory RTC Clock RTM Rear Transition RTOS SATA AT SBC SDRAM Synchronous Random Access Memory SIG SMT Mount SNR SNR SPD SROM TFTP TSEC Ethernet MVME3100 Computer and (6806800M28C)
TSOP Thin UART UNIX UNIX operating USB Universal VIO VITA International Association VME VPD Product WP Protect The following the throughout this Notation Typical through F), and offsets and Used to Used on-screen and related or commands text Used to characterize input and to from Reference Used and and Notation selecting Notation and Notation software buttons to the and MVME3100 and (6806800M28C) About this
About this About this Notation Repeated item of the and OR of information from that the Indicates which, death or serious Indicates which, avoided, or Indicates property encountered. to information MVME3100 and (6806800M28C)
Summary of This revised and editions. Publication 6806800M28C Declaration of Conformity 6806800M28B Updated Notes and 6806800M28A EA MVME3100 and (6806800M28C) About this
About this About this MVME3100 and (6806800M28C)
Preparation and The MVME3100 single-board based the MPC8540 III integrated The MVME3100 ATA USB interfaces, PMC to 128MB of Flash, Ethernet, and This board front and I/O and SODIMM DDR memory. Access to I/O with the MVME721 (RTM). the MVME3100 RJ-45 the RJ-45 the USB with type with and combined and abort switch. the MVME721 RJ-45 each of the and and four RJ-45 the The RTM PIM with I/O. Started This section of the to and the MVME3100 and section and ESD of Procedures The following the things to this board and where to the information to each to this chapter, including and Warning Table What to to... Unpack the the board. MVME3100 the MVME3100 chassis. MVME3100 and (6806800M28C)
Preparation and Table (continued) What to to... other Connecting to Peripherals the Completing the Unpack the from the to the and that items the and reshipping of If the that the the and inspection of the of and incorrect and of the or their life. touching the that or wear ESD wrist or ESD shoes. the its and or Declaration of Conformity Declaration of Conformity, MVME3100 Declaration of Conformity This section and software that to to the board chassis. To the and of the MVME3100, to the MVME3100 and (6806800M28C
options the MVME3100 software the board Jumpers/switches to those options that software These further this section. If the board from their to that properly. MVME3100 the of the switches, and other the MVME3100. There switch which to Table Table and Table switch There switch the MVME721. to and Table switch MVME3100 and (6806800M28C) Preparation and
Preparation and The MVME3100 factory tested and shipped with the the following MVME3100 and (6806800M28C
MVME3100 and (6806800M28C) J25 J24 J30 J28 U1014 U1050 U1049 U1051 J2 U1024 Preparation and S4 U1020 U1019 U1025 U1052 U1026 U1027 U5000 U21 U1003 U1007 U1012 J4 J21 J22 P1 J23 S3 U1046 U1047 J11 J12 J13 J14 P2 U1010 U1000 U1012
Preparation and Switch (S4) SMT switch the VME SCON write- protect, and the ENV It selects the The switch OFF. Switch (S4) Switch SAFE_START Normal ENV ENV This switch should used. should used. from Software this and accordingly. BOOT BLOCK memory SELECT and selected. FLASH BANK WP write- write- protected. protected. VME SCON AUTO/MANUAL MODE MANUAL VME Non-SCON SCON This switch only SCON SELECT effective when the VME SCON AUTO/MANUAL MODE switch ON. MVME3100 and (6806800M28C Notes OFF (Factory ON SCON SCON with the VME SCON SELECT switch. selected and to the highest
Table Switch (S4) Switch TRST SELECT Normal MPC8540 TRST where the board HRESET assert TRST. Geographical Switch (S3) The the geographical of the MVME3100. This switch reflects the inverted of the geographical Applications using the backplane the geographical switch to geographical Geographical Switch Not Geographical Switch Assignments SW2 SW1 SW3 SW4 SW5 SW6 SW7 SW8 Function Not PCI GAP GA4 GA3 GA2 GA1 GA0 Used MVME3100 and (6806800M28C) Notes OFF (Factory ON ON ON PCI-X GAP#=0 GA4#=0 GA3#=0 GA2#=0 GA1#=0 GA0#=0 Preparation and the board HRESET from TRST and allows the to without the MPC8540 JTAG/COP interface. Factory This switch should the OFF MPC8540 attached. PCI-X GAP#=1 GA4#=1 GA3#=1 GA2#=1 GA1#=1 GA0#=1
Preparation and Geographical Switch Assignments (continued) SW2 SW1 SW3 SW4 SW5 SW6 SW7 SW8 Factory SW2 to PCI-X only. The OFF. Geographical GAP GA(4:0) SW3 SW4 SW5 SW6 SW7 SW8 OFF OFF OFF OFF OFF ON OFF OFF OFF OFF ON OFF ON OFF OFF OFF ON ON OFF OFF OFF ON OFF OFF ON OFF OFF ON OFF ON ON OFF OFF ON ON OFF OFF OFF OFF ON ON ON OFF OFF ON OFF OFF OFF ON OFF ON OFF OFF ON ON OFF ON OFF ON OFF OFF OFF ON OFF ON ON ON OFF ON ON OFF OFF OFF OFF ON ON OFF ON OFF OFF ON ON ON OFF ON OFF ON ON ON ON OFF ON OFF OFF OFF OFF ON ON OFF OFF OFF ON ON ON OFF OFF ON OFF OFF ON OFF OFF ON ON MVME3100 and (6806800M28C OFF OFF PCI OFF OFF OFF OFF OFF OFF
Geographical GAP GA(4:0) SW3 SW4 SW5 SW6 SW7 SW8 ON ON OFF ON OFF OFF OFF ON OFF ON OFF ON PMC I/O The onboard PMC to 3.3V or 5.0V I/O PMC To 3.3V or 5.0V I/O PMC both PMC I/O the If both the location or the the PMC function. that the PMC I/O to 5.0V forces the PMC to PCI instead of PCI-X The factory 3.3V PMC I/O RTM SEEPROM Switch (S1) SMT switch located the RTM to the of the RTM EEPROM The switch the following Table RTM EEPROM Switch Assignments SW1 SW2 SW3 SW4 Function A0 A1 A2 Not Used OFF EEPROM A(2:0) SW1 SW2 SW3 $A0 ON ON ON $A2 OFF ON ON $A4 ON OFF ON $A6 OFF OFF ON $A8 ON ON OFF $AA (Factory) OFF ON OFF MVME3100 and (6806800M28C) Preparation and
Preparation and Table EEPROM A(2:0) SW1 SW2 SW3 $AC ON OFF OFF $AE OFF OFF OFF The RTM EEPROM switches $AA this to MotLoad. of the Product and Additional and Incorrect or of or the or the or or or the respective of and incorrect and of the or their life. touching the that or wear ESD wrist or ESD shoes. the its and or Product Malfunction Switches as might production-related functions and the to malfunction their of switches as MVME3100 and (6806800M28C
Procedure the following to the MVME3100 chassis. ESD to wrist. the other of the ESD to ground to Unpacking The ESD to wrist and to ground throughout the that might that the top and of the MVME3100 the of the chassis. that the of the the outward the MVME3100 the chassis the that the MVME3100 properly seated and to the chassis the screws located to the the to the MVME3100. To the board from the chassis, the locking (IEEE only) and the Connecting to Peripherals the MVME3100 chassis, ready to peripherals and apply to the board. MVME3100 and (6806800M28C) Preparation and
Preparation and shows the locations of the while and Table them to Chapter Assignments the assignments of the below. of the Product and Additional Devices and Incorrect or of or the or the or or or the respective and MVME3100 Connectors Connector Function J4 PMC J11, J12, J13, J14 PCI (PMC) J21, J22, J23 PCI (PMC) J24 Boundary header J25 COP header J27 USB J28 J29 J30 J41B Ethernet J41A COM P1, P2 VME MVME721 Rear Connectors Connector Function J1A, J1B, J1C, J1D COM MVME3100 and (6806800M28C
MVME721 Rear Transition Connectors (continued) Connector Function J2A Ethernet J2B Ethernet J10 PIM power/ground J14 PIM I/O P2 VME backplane Completing the that and the power/peripheral connected the chassis or cover, the to the AC or DC and the MVME3100 and (6806800M28C) Preparation and
Preparation and MVME3100 and (6806800M28C
and Introduction This chapter information about the: switches and that and correctly, apply to the ready to apply to the MVME3100: that the chassis supply matches the the country of the supply On the MVME3100 the MVME3100> Switches and The MVME3100 switch that both abort and (ABT/RST) the switch than seconds, abort to the If the switch than seconds, board The board the MPC8540, PCI/PCI-X buses, Ethernet and PLD(s). If the MVME3100 as the VME the VME and input The MVME3100 four The following these Table LED Function FAIL On or this LED ON extinguished or software. USER This software assertion of its MVME3100 and (6806800M28C) Chapter
and Table LED Function GENET SPEED GENET Activity ACT Activity to MVME3100 and (6806800M28C 10/100Base-T 1000Base-T operation activity
and Connectors MVME3100 and (6806800M28C) SATA COM ENET PMC PMC ABORT/RESET USER FAIL SPEED ACT and
and Operation The MVME721 four The following these Table MVME721 LED Function GENET SPEED GENET Activity ACT Activity to ENET SPEED ENET Activity ACT Activity to Table Additional Onboard Function LED LED DS1 This to supply DS4 activity Activity DS5 activity Activity MVME3100 and (6806800M28C 10/100Base-T 1000Base-T activity 10/100Base-T operation activity DS7 This software assertion of its DS8 This software assertion of its
Table Additional Onboard Function MPC8540 DS3 Indicates that the MPC8540 completed the Ready and The MPC8540 Ready with the MPC8540 TRIG_OUT the LED to of three based the the MPC8540 TOSR GENET DS2 Quality GENET DS3 as DS2} Quality MVME3100 and (6806800M28C) to ratio SNR SNR to threshold SNR and
and Operation MVME3100 and (6806800M28C
The firmware as board and as as vehicle from which user booted. secondary function of the firmware to as This chapter includes of commands, the VME and firmware that changeable the and the through easy-to-use, interface. The software to the such as the operating currently to the B, Related and Memory The of and its memory The MVME3100 (SBC) offered with of memory DRAM, cache, flash). Typically, the amount of on-board DRAM that Emerson SBC MB. Each its image(s). Currently the than MB Commands of commands and tests. Both of commands from the fashion. that, and distinctly The of stated, command, Typically, that the user (that they something From the perspective of MOTLoad, of monitors, MVME3100 and (6806800M28C)
Operationally, from operates (that concurrently) interact with the whether or the tests. to specification. to directly the functionality of SBC subsystem or These the of such SBC memory, cache, NVRAM, clock, to functionality with interaction. Once launched, without interaction. There where the functionality user interaction (that switch tests, interactive printed. tests/commands and to the this information). that to testing the to specify the when the of through the devShow command. If SBC and directly tested. There to the testing RAM, which and directly tested without to the devShow the MVME3100 and (6806800M28C
to as of related through the of the command. The their testing and creating The of built-in and and their obtained the that included as of firmware information, to the the and obtained through the and taskActive commands. to the the information. Command The following of commands. Products or the command the commands Table Command as Instruction bdTempShow Copy Block Format Block MVME3100 and (6806800M28C) Block Block
Commands Command Assign/Delete/Display Break-Points ISO9660 Directory ISO9660 clear Clear the Status/History Table(s) devShow (Direct-Access Mass-Storage S-Record from Instruction of Text ELF the of the Table FAT Directory FAT MVME3100 and (6806800M28C Search Checksum Command-line
Table (continued) Command fdShow Memory Sector Memory flashShow Memory flashUnlock Memory Sector Unlock Direct Break-Points) (NVRAM (NVRAM to Next Instruction to Temporary Break-Point History History Entry Command/Test l2CacheShow of L2 and L2CR l3CacheShow of L3 and L3CR memShow Memory mpuFork from MVME3100 and (6806800M28C) Memory Bytes/Halfwords/Words Memory Bytes/Halfwords/Words
Table Commands Command mpuShow the other MPU Network (BOOT/TFTP) netShow Network Interface (Shutdown) Network Interface Network Interface Statistics off PCI PCI PCI PCI PCI Network and SROM SROM Table Stop and (Power-Save taskActive the of the Active Table tc Trace td Trace to MVME3100 and (6806800M28C
Table Commands Command Ethernet NVRAM NVRAM Read/Write RAM (Directory) RAM RAM RAM testRamBounce RAM Bounce testRamCodeCopy RAM Copy and ECC testRamMarch RAM March RAM RAM Permutations testRamQuick RAM RAM RTC testRtcReset RTC testRtcRollOver RTC testRtcTick RTC testSerialExtLoop Loopback Loopback the of the Table testWatchdogTimer the of the TFTP MVME3100 and (6806800M28C)
Commands Command tftpPut TFTP and to tsShow from String(s) specified VME vpdDisplay VPD VPD I/O to Complete the Command Interface Interaction with interface through the SBC, which connected to or Hypercomm). The parity. The interface to UNIX interface. Commands initiated the and the to the of input. then the specified action. of shown below. The to what MVME5500, MVME6100, MVME3100). MVME3100> If the displays that the found. MVME3100 and (6806800M28C
MVME3100> found MVME3100> If the that to and the the as the This user-input shortcut that the amount of command input. user-input shortcuts as MVME3100> Copyright: Inc.1999-2002, Rights RTOS PAL MVME3100) MVME3100> Copyright: Inc. Rights RTOS PAL MVME3100) If the to command, inform the that the command MVME3100> MVME3100> MVME3100 and (6806800M28C)
Command There things to when command: commands they the the (command/arguments/options) The character character character Option immediately follow the option commands, and tree MVME3100> flashProgram information operation and function, to the Command firmware facility that through the command. The the command to of and MVME3100> with or the the following the <command_name> The of to the MVME3100> MVME3100 and (6806800M28C
[-tPd] RAM [Directory] to Allocation) 16KB) Iterations of 1MB) OS MVME3100> The following sections information to the VME of the MVME3100. VME while the of the VME the VME shipped from the factory, the MVME3100 the following VME the VME The firmware allows VME to the to the The following of the VME that changeable the information, to the and B, Related MVME3100> MVME3100> MVME3100 Computer and (6806800M28C) the selected VME as follows: VME PCI [Y/N] MVME3100> The PCI the selected VME as follows: MVME3100>
MVME3100> MVME3100> MVME3100> MVME3100 and (6806800M28C The to the (RESET) the selected VME as follows: MVME3100> The to Timeout of seconds. the selected VME as follows: CRG Attribute CRG CRG MVME3100> The CRG Attribute to the (RESET) the selected VME as follows: Inbound Attribute 000227AF Inbound Starting Inbound Starting Inbound Inbound 1FFF0000 Inbound Translation Inbound Translation MVME3100>
Inbound Translations, the Translation to to to to the PCI-X MVME3100> MVME3100> MVME3100 and (6806800M28C) Inbound (ITAT0) FIFO bytes, SST320, to MBLT, and BLT A32 to Supervisor, and from to the to the PCI-X to memory). To this of ITAT0 to the selected VME as follows: Outbound Attribute Outbound Starting Outbound Starting Outbound Outbound AFFF0000 Outbound Translation Outbound Translation Outbound Broadcast Select MVME3100> Outbound (OTAT1) SST320, of A32/D32 Supervisory access. The the PCI-X from and them the using offset of to the PCI-X becomes to the the selected VME as follows: Outbound Attribute Outbound Starting Outbound Starting B0000000 Outbound Outbound B0FF0000
MVME3100> MVME3100> MVME3100 and (6806800M28C Outbound Translation Outbound Translation Outbound Broadcast Select MVME3100> Outbound (OTAT2) SST320, of SCT, A24/D32 Supervisory access. The the PCI-X from and them the using offset of to the PCI-X becomes to the the selected VME as follows: Outbound Attribute Outbound Starting Outbound B3FF0000 Outbound Outbound B3FF0000 Outbound Translation Outbound Translation 4C000000 Outbound Broadcast MVME3100> Outbound (OTAT3) SST320, of SCT, A16/D32 Supervisory access. The the PCI-X from and them the using offset of to the PCI-X becomes to the the selected VME as follows: Outbound Attribute Outbound Starting Outbound B1000000 Outbound Outbound B1FF0000
The CR/CSR to the based the Geographical that the VME the VME64 Specification and the VME64 512K CR/CSR from the the CR/CSR AM VME To the changeable VME type the following the firmware selected Inbound selected Outbound PCI PCI MVME3100 and (6806800M28C) Outbound Translation Outbound Translation 4F000000 Outbound Broadcast Select MVME3100> Outbound (OTAT7) SST320, of SCT, CR/CSR Supervisory access. The the PCI-X from and them the offset of to the PCI-X becomes to the
AM Access Editing VME To the changeable VME type the following the firmware selected Inbound selected Outbound PCI PCI AM Access MVME3100 and (6806800M28C
VME To the changeable VME type the following the firmware selected Inbound selected Outbound PCI PCI AM Access Restoring VME To of the changeable VME back to their type the following the firmware MVME3100 and (6806800M28C)
the B, Related allows the to information about the board, and/or memory the and These the the of the MVME3100. of four the VME as the inter-board (IBCA) the and the CR/CSR assigned to the the backplane, as indicated the VME64 Specification reference, the following Position CS/CSR Starting C further CR/CSR please to the VME64 Specification B, Related The MVME3100 Discovery II its VME The offsets of the the Discovery II the Discovery II B, Related noted reference: MVME3100 and (6806800M28C
offset the CR/CSR offset 7f34C the CR/CSR Mailbox offset the CR/CSR offset the CR/CSR The selection of the MVME3100 the of (GEV). The Another GEV whether or to the Remote the GEV The MVME3100s IBCA to through the to MVME3100 the to reads and writes of VME CR/CSR and of and recovery If the MVME3100, supported. With the bootloader the the 8MB of the If found, to the Following The firmware following of cache, MMU, FPU, and other CPU internal items the memory Search the active possibly interactively, POST If found, the POST Once completed, the POST and Search the active possibly interactively, USER If found, the USER to the anticipated. MVME3100 and (6806800M28C)
If USER found, search the active possibly interactively, MCG to of MCG firmware. If found, the executed. to the anticipated. the recovery of the firmware the USER or MCG found interactive the jumper/switch or <ESC> to the within seconds of the board interactive the the option to locations which discovered, which to or specify that the recovery the of the active to executed. Scan The examining each 1MB boundary of that the as On (POST), USER, or MCG. MCG POST user-developed On that would of and then to the bootloader would such as the VxWorks which would board bootable VxWorks USER restricted to MB or however, they 1MB boundary within the 8MB of the flash The shown below: to Recovery to 0XFFFFFFFF MCG to First (FBD00000 or F7D00000) to (FBC00000 or F7C00000) to or F3800000) MVME3100 and (6806800M28C
The from and searches first POST, then USER, and finally MCG the of of the type, to the first the whether ESC the within the first seconds following or the the The user then the and the The to recovery when the The following of interactive ABCDEInteractive Interactive commands: directory of with without specified (or specified (or POST '?':this 'h':this FFE00000 FFD00000 Copyright Inc. Rights RTOS PAL EA02 MVME3100> MVME3100 and (6806800M28C)
whether POST, USER, or MCG, located 1MB boundaries within flash. The 1MB through the of and other with as the following Notes 0x424f4f54 of character RAM from header to to The of each location the The of (word-aligned). The of the location the header of the The the location to The implemented using the following int int int int while MVME3100 and (6806800M28C
The of the header options that the executed. COPY_TO_RAM Copy to RAM IMAGE_MCG IMAGE_POST POST DONT_AUTO_RUN to COPY_TO_RAM If this that the to to RAM the specified the header passed. If the flash. both instances, the offset specified the header from the of the IMAGE_MCG If this the as MOTLoad, as to USER, This should of IMAGE_POST If this the as This to that the and should to USER or MCG POST expected, to to the MVME3100 and (6806800M28C) ImageRamAddress
DONT_AUTO_RUN If this that the to selected through the interactive facility, specify the to executed. currently of which as that from RAM. currently from flash. These VxWorks bootrom the software to as follows The MMU L1 instruction cache and L1 and L2 cache L3 cache RAM and CPU If RAM ECC or supported, RAM of ECC or The active from the of the If COPY_TO_RAM, the to RAM the specified CPU R1 (the to the of RAM. CPU R3 to the following int board's RAM MB to this boardType[16];/* MVME3100 16K, int MVME3100 and (6806800M28C
The of the to of RAM which to the This of RAM cleared the of POST or other It to to POST to The other of the board than that to the of to POST, USER, or MCG to the to whatever the further its POST expected, to to the the with the POST that to the that the of the with the that the board POST USER should to the and of and recovery If the MVME3100, supported. With the the the MB of the If found, to the MVME3100 and (6806800M28C)
Scan The examining each MB boundary of that the as POST, USER, or MOTLoad. POST user-developed On that of and then to the USER would such as the VxWorks bootrom, which would bootable VxWorks would USER restricted to MB or however, they MB boundary within the MB of the The shown below: to Recovery to 0XFFFFFFFF to First to to of The the location of the first and searches first POST, then USER, and finally the of of the type, to the first encountered the whether ESC the within the first seconds following or the the process. The user then the and the The to recovery when the The following of interactive ABCDEInteractive Interactive commands: directory of with without specified (or (or POST '?':this MVME3100 and (6806800M28C
'h':this FFE00000 FFD00000 Copyright Inc. Rights RTOS PAL EA02 MVME3100> The firmware following of to: cache, MMU, FPU, and other CPU internal items the memory Search the active possibly interactively, On (POST) If found, the POST Once completed, the POST and Search the active possibly interactively, USER If found, the USER to the anticipated. If USER found, search the active possibly interactively, to of firmware. If found, the executed. to the anticipated. the recovery of the firmware the USER or found interactive the jumper/switch or <ESC> to the within seconds of the interactive the the option to locations which which to executed, or specify that the recovery the of the active to MVME3100 and (6806800M28C)
MVME3100 and (6806800M28C
Functional This chapter the MVME3100 and the MVME721 (RTM) The following the of the MVME3100 and its RTM. MVME3100 Summary Processor/Host MPC8540 III integrated Controller/Memory Integrated 256KB L2 cache/SRAM Integrated DMA Integrated PCI/PCI-X integrated Ethernet Integrated Integrated UART Integrated I2C Integrated Integrated Integrated DDR SDRAM Memory One SODIMM to DDR333, ECC One or of memory SODIMM C Interface One 8KB VPD EEPROM 64KB user One clock (RTC) with One Interface to SPD(s) SODIMM and P2 RTM VPD 128MB with 1MB sectors switch switch or software write protection MVME3100 and (6806800M28C) Chapter
Functional Table MVME3100 Summary PCI Interface A: I/O One front RJ45 with integrated front I/O: One front RJ45 with integrated front I/O: Ethernet One front front I/O: One front USB upright front I/O: USB PMC front I/O and rear P2 I/O PMC front I/O ATA One I/O, I/O, P0 I/O, and One and interface to the USB One USB front Ethernet MPC8540 Ethernet I/O and P2 I/O One MPC8540 Ethernet P2 I/O MVME3100 and (6806800M28C PCI-X One One ATA One MPC8540 PCI6520 B: PCI/PCI-X (PCI and PCI-X +3.3V/5V VIO, single-wide PMC or PMC ANSI/VITA and PCI-X ANSI/VITA One PCI6520 (secondary C PCI (PCI One USB One PCI interface to One PCI6520 (secondary
Table MVME3100 Summary Interface One to KBAUD, MPC8540, asynchronous I/O One UART to four to KBAUD, rear P2 I/O MPC8540 PLD One MPC8540 VME Interface VME64 (ANSI/VITA VME64 (ANSI/VITA (ANSI/VITA VITA five-row P1 and P2 backplane One Factor 6U VME One reset/abort switch Ethernet and activity, board and software LED LED, software three activity One COP header Boundary Switches VME geographical three-row backplane Software VxWorks operating operating Table MVME721 RTM Summary I/O One five-row P2 backplane and Ethernet I/O from the MVME3100 RJ-45 I/O: four asynchronous RJ-45 with integrated I/O: Ethernet and Ethernet One PIM with I/O MVME3100 and (6806800M28C) Functional
Functional MVME721 RTM Summary and Ethernet and activity MVME3100 and (6806800M28C
shows of the board architecture and shows of the MVME721 architecture. MVME3100 MVME3100 and (6806800M28C) Functional
Functional MVME721 RTM PMC VPD 8K8 C The MVME3100 the MPC8540 The or The MPC8540 integrated 256KB L2 cache. Memory The MPC8540 DDR SDRAM SODIMM This or SSTL-2 DDR-I, JESD8-9B SODIMM with ECC. The MPC8540 DDR memory interface to operation. MVME3100 and (6806800M28C Option PIM PIM P2 P0 Rear RJ45 RJ45 RJ45 USB RJ45 RJ45 RJ45 Option
Interface The MVME3100 the MPC8540 (LBC) to on-board and I/O The LBC to of as as of and The MVME3100 the LBC GPCM to interface to physical of on-board Flash, on-board UART (QUART), on-board timers, and the to the MVME3100 Reference B, Related the LBC and assignments. Memory The MVME3100 physical of memory. The of physical to to The the MVME3100-1263 128MB using and the MVME3100-1152 64MB using to the MVME3100 Single-Board Reference B, Related information. and The MVME3100 and the This the following the board: Chip selects and QUART and clock (RTC) reference clock to the MVME3100 Reference B, Related information. MVME3100 and (6806800M28C) Functional
Functional C Interface and Devices The MVME3100 the following on-board I2C connected to the MPC8540 I2C interface: 8KB EEPROM VPD 64KB EEPROM SODIMM SPD DS1375 RTC DS1621 8KB EEPROM RTM VPD The DS1375 RTC the MVME3100 routed to the MPC8540 (PIC). the RTC reference. the RTC board. The DS1621 of the of the board. The C interface routed to the on-board SODIMM This allows the (SPD) the EEPROM, which located the memory to and to the memory accordingly. the I2C interface routed to the P2 to the EEPROM located the RTM. The the RTM EERPOM switches the RTM. to the MVME3100 Single-Board Reference B, Related information. Ethernet Interfaces The MVME3100 and Ethernet interfaces using the MPC8540 Ethernet (FEC) and Ethernet (TSEC). BCM5461S PHY each TSEC interface, and each TSEC interface and PHY to GMII One Ethernet interface routed to RJ-45 with integrated and activity indication. The other Ethernet interface routed to P2 rear I/O. MVME3100 and (6806800M28C
BCM5221 PHY the FEC interface. The Ethernet interface routed to P2 I/O. on-board each interface. The assigned PHY the MPC8540 MII (MIIM) interface found the MVME3100 Reference B, Related Ethernet interface assigned Ethernet Station Address. The each The Ethernet Station displayed attached to the PMC The MVME3100 front-access interface from the MPC8540 UART (DUART) This routed to the RJ-45 This UART (QUART) connected to the MPC8540 to asynchronous The QUART four asynchronous SP1 SP4, which routed to the P2 to the ST16C554D Datasheet B, Related and/or information. PCI/PCI-X Interfaces and Devices The MVME3100 three PCI/PCI-X operates PCI-X and connected to the MPC8540, the VME the ATA and and the PMC and operates PCI or PCI-X the PMC C A, the USB and the C operates PCI MPC8540 PCI-X Interface The MPC8540 PCI-X to PCI-X only, switch "OFF" to PCI-X The software. to the MPC8540 Reference B, Related and/or information. MVME3100 and (6806800M28C) Functional
Functional VME The interface the MVME3100 the ASIC. The the VME, VME and to the VME the and the VME backplane. to the B, Related and/or information. ATA The the PCI-X to ATA This four and with the ATA: High AT Specification, Revision It the of II. The MVME3100 of the four routed to mounted the front routed to the chassis" Collocated with the The (Native PCI IDE) and Direct Access (DPA) The MVME3100 to activity. to the PCI-X to ATA B, Related and/or information Bridges The MVME3100 PLX PCI6520 to isolate the PCI A. These from with the PMC and from C with the USB and interface. The PCI6520 PCI-X It operates and or secondary to the PCI6520CB B, Related and/or information. MVME3100 and (6806800M28C
PCI Card The MVME3100 PMC that or Both PMC located PCI and the and as the PMC The routing of PCI-X operation each the PMC options and 5V or 3.3V. Both the or the Each PMC enough 3.3V and 5V allocated to PMC or from supply. PMC PMC PCI Card S1B and with front PMC Connectors: J11, J12, J13, and J14 PCI with front and rear I/O) VIO +3.3V (+5V or +5V, selected PMC PMC PCI Card S1B and with front PMC Connectors: J21, J22, and J23 PCI with front I/O) VIO +3.3V (+5V or +5V, selected You 3.3V and 5V together; the and 5V the the PMC located such that double-width PMC of the single-width MVME3100 and (6806800M28C) Functional
Functional this the MVME3100 PMC PCI Card and with front PMC Connectors: J11, J12, J13, J14, J21, J22, and J23 PCI with front and I/O) J14 VIO +3.3V (+5V or +5V, selected On PMC the I/O J14 only the low-current, high-speed and to supply The rating of each USB The USB USB with connectivity with or USB routed to USB located the front DC to the front USB USB switch, which over-current and to the USB B, Related PMC The MVM3E3100 PMC through the of C that with the boards. to four PMC existing boards. to the PMC and B, Related MVME3100 and (6806800M28C
There of timers. integrated the MPC8540 and four the PLD. The four MPC8540 clocked the RTC input, which clock. The clock the four the PLD to the MPC8540 Reference B, Related and/or information. Clock Battery There on-board SMT the MVME3100. This SMTU2430-1 allows and easy of 3V lithium (CR2430), which to the on-board DS1375 RTC. switching switching the 3.3V and The to the RTC of year The of the MVME3100 the following: switch the including the MPC8540, PCI/PCI-X Ethernet and PLD(s). If the MVME3100 as the VME the VME and input MVME3100 and (6806800M28C) Functional
Functional The MVME3100 boundary header boundary and This board COP header MPC8540 COP MVME3100 and (6806800M28C
Assignments This chapter assignments and the MMVE3100 single-board and the MVME721 PMC Connector (J4) Ethernet Connectors (GENET1/J41B, GENET2/J2B, ENET1/J2A) PCI Card (PMC) Connectors (J11 J14, J21 J23) Connectors (COM1/J41A, COM2COM5/J2A-D) P1 Connector P2 Connector MVME721 PMC I/O (PIM) Connectors (J10, J14) Connector (J30) USB Connector (J27) Connectors (J28 and J29) The following this chapter: Boundary Scan (J24) COP (J25) Connectors This section the assignments and the the MVME3100. MVME3100 and (6806800M28C) Chapter
Assignments PMC Connector (J4) One Mictor with of and ground to PCI The assignments this as follows: PMC Connector (J4) Assignments +3.3V GND +3.3V PCICLK PMCINTA# GND PMCINTB# PURST# PMCINTC# HRESET# PMCINTD# TDO TDI TMS TCK TRST# PEP# PCIXGNT# PCIXREQ# +12V -12V PERR# SERR# LOCK# DEVSEL# GND PCI XCAP TRDY# IRDY# STOP# FRAME# GND M66EN ACK64# REQ64# MVME3100 and (6806800M28C
Table PMC Connector (J4) Assignments (continued) PAR +5V PCIRST# C/BE1# C/BE0# C/BE3# C/BE2# AD1 AD0 AD3 AD2 AD5 AD4 AD7 AD6 AD9 AD8 AD11 AD10 AD13 AD12 AD15 AD14 AD17 AD16 AD19 AD18 AD21 AD20 AD23 AD22 AD25 AD24 AD27 AD26 AD29 AD28 AD31 AD30 MVME3100 and (6806800M28C) Assignments
Assignments Table PMC Connector (J4) Assignments PAR64 GND C/BE5# C/BE4# C/BE7# C/BE6# AD33 AD32 AD35 AD34 AD37 AD36 AD39 AD38 AD41 AD40 AD43 AD42 AD45 AD44 AD47 AD46 AD49 AD48 AD51 AD50 AD53 AD52 AD55 AD54 AD57 AD56 AD59 AD58 AD61 AD60 AD63 AD62 PMC shared with the USB MVME3100 and (6806800M28C
Ethernet Connectors (GENET1/J41B, GENET2/J2B, ENET1/J2A) There and Ethernet interfaces the MPC8540 Ethernet (FEC) and Ethernet (TSEC). One Ethernet interface routed to RJ-45 with integrated and activity indication. The other Ethernet interface and the interface routed to P2 I/O. The assignments these as follows: Table Ethernet Connectors Assignment MDIO0+ _DA+ TD+ MDIO0- _DA- TD- MDIO1+ _DB+ RD+ MDIO1- _DC+ Not Used MDIO2+ _DC- Not Used MDIO2- _DB- RD- MDIO3+ _DD+ Not Used MDIO3- _DD- Not Used PCI Card (PMC) Connectors (J11 J14, J21 J23) There SMT the MVME3100 to PCI interfaces and P2 I/O optional PMC. PMC J14 the that to VME P2 I/O A, C, D, and Z. The assignments these as follows. Table PMC Connector (J11) Assignments TCK -12V GND INTA# INTB# INTC# MVME3100 and (6806800M28C) Assignments
Assignments Table PMC Connector (J11) Assignments PMCPRSNT1# +5V INTD# PCI_RSVD GND CLK GND GND PMCGNT1# PMCREQ1# +5V +3.3V (VIO) AD31 AD28 AD27 AD25 GND GND C/BE3# AD22 AD21 AD19 +5V +3.3V (VIO) AD17 FRAME# GND GND IRDY# DEVSEL# +5V GND LOCK# PCI_RSVD PCI_RSVD PAR GND +3.3V (VIO) AD15 AD12 AD11 AD09 +5V GND C/BE0# AD06 AD05 AD04 GND +3.3V (VIO) AD03 AD02 AD01 MVME3100 and (6806800M28C
Table PMC Connector (J11) Assignments AD00 +5V GND REQ64# Table PMC Connector (J12) Assignments +12V TRST# TMS TDO TDI GND GND Not Used Not Used Not Used +3.3V RST# +3.3V Not Used GND AD30 AD29 GND AD26 AD24 +3.3V IDSEL1 AD23 +3.3V AD20 AD18 GND AD16 C/BE2# GND IDSEL1B TRDY# +3.3V GND STOP# PERR# GND +3.3V SERR# C/BE1# GND MVME3100 and (6806800M28C) Assignments
Assignments PMC Connector (J12) Assignments AD14 AD13 M66EN AD10 AD08 +3.3V AD07 REQ1B# +3.3V GNT1B# Not Used GND Not Used EREADY0 GND Not Used ACK64# +3.3V GND (MONARCH#) PMC Connector (J13) Assignments GND GND C/BE7# C/BE6# C/BE5# C/BE4# GND +3.3V (VIO) PAR64 AD63 AD62 AD61 GND GND AD60 AD59 AD58 AD57 GND +3.3V (VIO) AD56 AD55 AD54 AD53 GND GND AD52 MVME3100 and (6806800M28C
Table PMC Connector (J13) Assignments AD51 AD50 AD49 GND GND AD48 AD47 AD46 AD45 GND +3.3V (VIO) AD44 AD43 AD42 AD41 GND GND AD40 AD39 AD38 AD37 GND GND AD36 AD35 AD34 AD33 GND +3.3V (VIO) AD32 GND GND PMC Connector (J14) Assignments PMC1_1 (P2-C1) PMC1_2 (P2-A1) PMC1_3 (P2-C2) PMC1_4 (P2-A2) PMC1_5 (P2-C3) PMC1_6 (P2-A3) PMC1_7 (P2-C4) PMC1_8 (P2-A4) PMC1 (P2-C5) PMC1_10 (P2-A5) PMC1_11 (P2-C6) PMC1_12 (P2-A6) MVME3100 and (6806800M28C) Assignments
Assignments Table PMC Connector (J14) Assignments PMC1_13 (P2-C7) PMC1_14 (P2-A7) PMC1_15 (P2-C8) PMC1_16 (P2-A8) PMC1_17 (P2-C9) PMC1_18 (P2-A9) PMC1_19 (P2-C10) PMC1_20 (P2-A10) PMC1PMC1_21 (P2-C11) PMC1_22 (P2-A11) PMC1_23 (P2-C12) PMC1_24 (P2-A12) PMC1_25 (P2-C13) PMC1_26 (P2-A13) PMC1_27 (P2-C14) PMC1_28 (P2-A14) PMC1_29 (P2-C15) PMC1_30 (P2-A15) PMC1_31 (P2-C16) PMC1_32 (P2-A16) PMC1_33 (P2-C17) PMC1_34 (P2-A17) PMC1_35 (P2-C18) PMC1_36 (P2-A18) PMC1_37 (P2-C19) PMC1_38 (P2-A19) PMC1_39 (P2-C20) PMC1_40 (P2-A20) PMC1_41 (P2-C21) PMC1_42 (P2-A21) PMC1_43 (P2-C22) PMC1_44 (P2-A22) PMC1_45 (P2-C23) PMC1_46 (P2-A23) PMC1_47 (P2-C24) PMC1_48 (P2-A24) PMC1_49 (P2-C25) PMC1_50 (P2-A25) PMC1_51 (P2-C26) PMC1_52 (P2-A26) PMC1_53 (P2-C27) PMC1_54 (P2-A27) PMC1_55 (P2-C28) PMC1_56 (P2-A28) PMC1_57 (P2-C29) PMC1_58 (P2-A29) PMC1_59 (P2-C30) PMC1_60 (P2-A30) PMC1_61 (P2-C31) PMC1_62 (P2-A31) PMC1_63 (P2-C32) PMC1_64 (P2-A32) MVME3100 and (6806800M28C
Table PMC Connector (J21) Assignments TCK -12V GND INTC# INTD# INTA# PMCPRSNT1# +5V INTB# PCI_RSVD GND CLK GND GND PMCGNT1# PMCREQ1# +5V +3.3V (VIO) AD31 AD28 AD27 AD25 GND GND C/BE3# AD22 AD21 AD19 +5V +3.3V (VIO) AD17 FRAME# GND GND IRDY# DEVSEL# +5V GND LOCK# PCI_RSVD PCI_RSVD PAR GND +3.3V (VIO) AD15 AD12 AD11 AD09 +5V GND C/BE0# AD06 AD05 MVME3100 and (6806800M28C) Assignments
Assignments PMC Connector (J21) Assignments AD04 GND +3.3V (VIO) AD03 AD02 AD01 AD00 +5V GND REQ64# Table PMC Connector (J22) Assignments +12V TRST# TMS TDO TDI GND GND Not Used Not Used Not Used +3.3V RST# +3.3V Not Used GND AD30 AD29 GND AD26 AD24 +3.3V IDSEL1 AD23 +3.3V AD20 AD18 GND AD16 C/BE2# GND IDSEL1B TRDY# +3.3V GND STOP# MVME3100 and (6806800M28C
PMC Connector (J22) Assignments (continued) PERR# GND +3.3V SERR# C/BE1# GND AD14 AD13 M66EN AD10 AD08 +3.3V AD07 REQ1B# +3.3V GNT1B# Not Used GND Not Used EREADY1 GND Used ACK64# +3.3V GND (MONARCH#) PMC Connector (J23) Assignments GND GND C/BE7# C/BE6# C/BE5# C/BE4# GND +3.3V (VIO) PAR64 AD63 AD62 AD61 GND GND AD60 AD59 AD58 AD57 GND +3.3V (VIO) AD56 MVME3100 and (6806800M28C) Assignments
Assignments PMC Connector (J23) Assignments AD55 AD54 AD53 GND GND AD52 AD51 AD50 AD49 GND GND AD48 AD47 AD46 AD45 GND +3.3V (VIO) AD44 AD43 AD42 AD41 GND GND AD40 AD39 AD38 AD37 GND GND AD36 AD35 AD34 AD33 GND +3.3V (VIO) AD32 GND GND MVME3100 and (6806800M28C
Connectors (COM1/J41A, COM2COM5/J2A-D) There front asynchronous interface (SP0) that routed to the RJ-45 There four asynchronous interfaces, SP1 SP4, which routed to the P2 The assignments these as follows: Table COM Connector Assignments RTS GND TX RX GND CTS P1 Connector The VME P1 DIN. The P1 and VME and The assignments the P1 as follows: P1 Connector Assignments ROW ROW ROW ROW C ROW D00 BBSY* D08 +5V GND D01 BCLR* D09 GND D02 ACFAIL* D10 GND D03 BG0IN* D11 D04 BG0OUT* D12 GND D05 BG1IN* D13 D06 BG1OUT* D14 MVME3100 and (6806800M28C) Assignments
Assignments P1 Connector Assignments ROW ROW ROW ROW C ROW GND D07 BG2IN* D15 GND BG2OUT* GND GAP_L GND SYSCLK BG3IN* SYSFAIL* GA0_L GND BG3OUT* BERR* GA1_L GND DS1* BR0* SYSRESET* DS0* BR1* LWORD* GA2_L GND WRITE* BR2* AM5 GND BR3* A23 GA3_L GND DTACK* AM0 A22 GND AM1 A21 GA4_L GND AS* AM2 A20 GND AM3 A19 GND IACK* GND A18 IACKIN* SERA A17 GND IACKOUT* SERB A16 AM4 GND A15 GND A07 IRQ7* A14 A06 IRQ6* A13 GND A05 IRQ5* A12 A04 IRQ4* A11 GND A03 IRQ3* A10 A02 IRQ2* A09 GND A01 IRQ1* A08 -12V +5VSTDBY +12V GND GND +5V +5V +5V +5V MVME3100 and (6806800M28C
P2 Connector The VME P2 DIN. of the P2 to the MVME3100 and to the and The assignments the P2 the both the MVME3100 and MVME721, and as follows: Table VME P2 Connector P2-Z P2-A P2-B P2-C P2-D SP1RX PMC1_IO2 +5V PMC1_IO1 E1-1+ GND PMC1_IO4 GND PMC1_IO3 E1-1- SPITX PMC1_IO6 VRETRY_L PMC1_IO5 GND GND PMC1_IO8 VA24 PMC1_IO7 E1-2+ SP1CTS PMC1_IO10 VA25 PMC1_IO9 E1-2- GND PMC1_IO12 VA26 PMC1_IO11 GND SP1RTS PMC1_IO14 VA27 PMC1_IO13 NC GND PMC1_IO16 VA28 PMC1_IO15 NC SP2RX PMC1_IO18 VA29 PMC1_IO17 GND GND PMC1_IO20 VA30 PMC1_IO19 NC SP2TX PMC1_IO22 VA31 PMC1_IO21 NC GND PMC1_IO24 GND PMC1_IO23 GND SP2CTS PMC1_IO26 +5V PMC1_IO25 I2C_SDA GND PMC1_IO28 VD16 PMC1_IO27 I2C_SCL SP2RTS PMC1_IO30 VD17 PMC1_IO29 E1_LINK GND PMC1_IO32 VD18 PMC1_IO31 E1_ACT SP3RX PMC1_IO34 VD19 PMC1_IO33 E2_LINK GND PMC1_IO36 VD20 PMC1_IO35 E2_ACT SP3TX PMC1_IO38 VD21 PMC1_IO37 GND GND PMC1_IO40 VD22 PMC1_IO39 E2-4- SP3CTS PMC1_IO42 VD23 PMC1_IO41 E2-4+ GND PMC1_IO44 GND PMC1_IO43 GND MVME3100 and (6806800M28C) Assignments
Assignments Table VME P2 Connector (continued) P2-Z P2-A P2-B P2-C P2-D SP3RTS PMC1_IO46 VD24 PMC1_IO45 E2-3- GND PMC1_IO48 VD25 PMC1_IO47 E2-3+ SP4RX PMC1_IO50 VD26 PMC1_IO49 GND GND PMC1_IO52 VD27 PMC1_IO51 E2-2- SP4TX PMC1_IO54 VD28 PMC1_IO53 E2-2+ GND PMC1_IO56 VD29 PMC1_IO55 GND SP4CTS PMC1_IO58 VD30 PMC1_IO57 E2-1- GND PMC1_IO60 VD31 PMC1_IO59 E2-1+ SP4RTS PMC1_IO62 GND PMC1_IO61 GND GND PMC1_IO64 +5V PMC1_IO63 +5V MVME721 PMC I/O (PIM) Connectors (J10, J14) PMC I/O J10 and ground from VME P2. There I/O this The MVME3100 PMC I/O from J14 of PMC to VME P2 and C. The MVME721 these (pin-for-pin) from VME P2 to PMC I/O J14. Table and Table the assignments. Table MVME721 I/O Connector (J10) Assignments +5V +3.3V GND MVME3100 and (6806800M28C
Table MVME721 I/O Connector (J10) Assignments GND +5V +3.3V GND GND +5V +3.3V GND GND +5V +3.3V MVME3100 and (6806800M28C) Assignments
Assignments Connector (J30) There pitch header as header the MVME3100 to to ATA mounted the or somewhere within the chassis. The assignments this header as follows: Table Connector (J30) Assignments +5V +5V GND GND USB Connector (J27) There USB located the MVME3100 front The assignments as follows: USB Connector (J27) Assignments USB_VBUS (+5.0V) USB_DATA- USB_DATA+ GND MVME3100 and (6806800M28C
Connectors (J28 and J29) The MVME3100 J28 internal type located the and to to located the board or somewhere the chassis. J29 type connected located the front and to to The assignment these as follows: Connectors (J28 and J29) Assignments GND SATA_TX+ SATA_TX- GND SATA_RX- SATA_RX+ GND This section the assignments of the the MVME3100. Hheader to Boundary Scan (J24) The boundary header interface the on-board and boundary The assignments this header as follows: Table Boundary Scan (J24) Assignments TRST_L GND TDO GND MVME3100 and (6806800M28C) Assignments
Assignments Table Boundary Scan (J24) Assignments TDI GND TMS GND TCK GND NC GND (BSCANEN_L) BSCAN_AW_L GND grounded the to boundary COP (J25) There header that to the COP function. The assignments this header as follows: Table COP (J25) Assignments CPU_TDO CPU_TDI CPU_TRST_L CPU_VIO (+3.3V) CPU_TCK CPU_CKSTPI_L CPU_TMS CPU_SRST_L GND (optional pull-down) CPU_HRST_L KEY CPU_CKSTPO_L GND +3.3V and supply to 0.5A to I/O the COP MVME3100 and (6806800M28C
Memory Memory Memory The MPC8540 memory following RESET The following shows the memory from the of of the The TLB to and allows within the highest 4KB of memory. To the 8MB of (and the 1MB of CCSR TLB within the these to the MPC8540 Reference B, Related This the location the CCSRs, Table Definition Notes FF6F FFFF 4087M Not FF70 FF7F FFFF 1M MPC8540 CCS FF80 FFFF FFFF 8M FFFF F000 to FFFF FFFF The fetches the first instruction from FFFF FFFC following MVME3100 and (6806800M28C) Chapter
Memory MOTLoads Memory MOTLoads memory the following MOTLoads Definition Notes Memory (on-board DRAM) (2GB DFFF FFFF 1.5GB PCI Memory E000 E0FF FFFF 16MB PCI I/O E100 E10F FFFF 1MB MPC8540 CCSR E1100 E1FF FFFF 15MB Not Used E200 E2FF FFFF 16MB Status/Control E300 EFFF FFFF 208MB Not Used F000 F7FF FFFF 128MB FFFF FFFF (128MB The ligically back RESET, the MPC8540 PCI memory (inbound or outbound), and to VME Memory The MVME3100 of both the and the CHRP VME Memory with RAM to 2GB. MVME3100 and (6806800M28C
I/O Memory including and timers, and the QUART 16MB from the MVME3100 the MPC8540 (LBC). The memory the following including the LBC to the Table I/O Memory LBC Definition Chip Select Notes E200 E200 E200 E200 E200 PCI E200 PCI E200 PCI C E200 E200 E200 PLD Revision E200 000C PLD E200 E200 E200 E200 0FFF E201 COM (QUART E201 1FFF E201 COM (QUART E201 2FFF E201 COM (QUART E201 3FFF E201 COM (QUART E201 4FFF MVME3100 and (6806800M28C) Memory
Memory Table I/O Memory LBC Definition Chip Notes E201 E201 FFFF E202 PLD E202 PLD E202 PLD E202 PLD Counter E202 001C E202 PLD E202 PLD E202 PLD Counter E202 002C E202 PLD E202 PLD E202 PLD Counter E202 003C E202 PLD E202 PLD E202 PLD Counter E202 004C E2FF FFFF write only read/write MVME3100 and (6806800M28C
The MVME3100 read-only to information. REG BIT FIELD OPER RESET BD_TYPE type. These the board type. VME SBC ABORT: This reflects the of the on-board abort This of the abort switch and to the of the abort switch. cleared the abort switch depressed, while the abort switch asserted. SAFE_START: ENV This reflects the of the ENV switch. that firmware should the ENV cleared that the ENV NVRAM should the firmware. RSVD: MVME3100 and (6806800M28C) RSVD RSVD RSVD SAFE_START ABORT Memory BD_TYPE RSVD
Memory The MVME3100 Table REG BIT FIELD OPER R/W R/W R/W RESET TSTAT_MASK: Thermostat This the DS1621 thermostat If this cleared, the thermostat to If the the thermostat from EEPROM_WPEEPROM: protect. This protection writes to the on-board EEPROM Clearing this writes to the EEPROM this write protects the The write protected following BRD_RST: These force of the board. If written where cleared, and other written These cleared when the board completed. These cleared read. RSVD: MVME3100 and (6806800M28C BD_RESET RSVD RSVD TSTAT_MASK EEPROM_WP RSVD
The MVME3100 board that the software to the of the on-board or written to software to the on-board Table REG BIT FIELD OPER R/W R/W R/W R/W RESET BRD_FAIL: This the LED located the front the LED and cleared extinguishes the LED. USR1_LED: LED This the USR1 LED located the front the LED and cleared extinguishes the LED. USR2_LED: LED This the USR2 LED. the LED and cleared extinguishes the LED. USR3_LED: LED This the USR3 LED. the LED and cleared extinguishes the LED. RSVD: MVME3100 and (6806800M28C) RSVD RSVD RSVD RSVD USR3 Memory BRD_FAIL USR2 USR1
Memory The MVME3100 software-controlled write and as as select, write protect, and activity the Flash. Table REG BIT FIELD OPER R/W R/W RESET FLASH_RDY: ready. This the of the These from each to Ready. FBT_BLK_SEL: select. This reflects the of the BOOT BLOCK SELECT switch. cleared that selected and to the highest that selected and to the highest F_WP_HW: write switch This reflects the of the FLASH BANK WP switch. that the write protected. cleared that the write protected. F_WP_SW: Software write protect. This software-controlled protection writes to the memory that the write-protected. cleared that the write-protected, only when the write-protect This and cleared the software to writing of the MAP_SEL: Memory select. this cleared, the memory the Select switch. the selected and to the highest MVME3100 and (6806800M28C RSVD RSVD RSVD F_WP_SW MAP_SEL FBT_BLK_SEL FLASH_RDY F_WP_HW
RSVD: PCI The PCI PCI information each of the PCI buses. Table PCI REG PCI BIT FIELD OPER RESET PCI_A_SPD PCI Indicates the of PCI A. PCIX_A: PCI-X A. that operating PCI-X cleared PCI PCI_A_64B: PCI that to cleared RSVD: PCI REG PCI BIT MVME3100 and (6806800M28C) RSVD RSVD RSVD PCI_A_64B RSVD Memory PCI_A_SPD PCIX_A
Memory PCI REG PCI FIELD OPER RESET PCI_B_SPD: PCI Indicates the of PCI B. PCIX_B: PCI-X B. that operating PCI-X cleared PCI PCI_B_64B: PCI that to cleared ERDY1: EREADY1. Indicates that the PMC ready when If cleared, the ready If this ERDY2: EREADY2. Indicates that the PMC ready enumeration when If cleared, the ready enumeration. If the 5.0V_VIO: 5.0V VIO Enabled. This that the PMC (PCI B) 5.0V VIO. MVME3100 and (6806800M28C 3.3V_VIO 5.0V_VIO ERDY2 PCI_B_64B ERDY1 PCI_B_SPD PCIX_B
3.3V_VIO: 3.3V VIO This that the PMC (PCI B) to 3.3V VIO. Table PCI C REG PCI C BIT FIELD OPER RESET PCI_C_SPD: PCI C Indicates the of PCI C. PCIX_C: PCI-X C. that C operating PCI-X cleared PCI PCI_C_64B: PCI C that C to cleared RSVD: MVME3100 and (6806800M28C) RSVD RSVD RSVD PCI_C_64B RSVD Memory PCI_C_SPD PCIX_C
Memory The MVME3100 that the software to which of the Ethernet originated their combined REG BIT FIELD OPER RESET TSEC1_PHY: TSEC1 PHY If cleared, the TSEC1 asserted. If the TSEC1 asserted. TSEC2_PHY: TSEC2 PHY If cleared, the TSEC2 asserted. If the TSEC2 asserted. FEC_PHY: FEC PHY If cleared, the FEC asserted. If the FEC asserted. RSVD: The MVME3100 that the software to the of optional Table REG BIT MVME3100 and (6806800M28C RSVD RSVD RSVD RSVD RSVD TSEC2_PHY TSEC1_PHY FEC_PHY
Table REG FIELD OPER RESET PMC1P: PMC If cleared, there PMC If the PMC PMC2P: PMC If cleared, there PMC If the PMC installed. PEP: If cleared, there If the installed. RSVD: PLD Revision The MVME3100 PLD Revision that the software to the of the PLD. Table PLD Revision REG PLD Revision BIT FIELD PLD_REV OPER RESET PLD_REV: containing the PLD revision. The with MVME3100 and (6806800M28C) RSVD RSVD RSVD RSVD RSVD Memory PMC2P PMC1P PEP
Memory PLD The MVME3100 PLD that the of the PLD. Table PLD REG PLD BIT FIELD OPER R/W RESET of the Month The MVME3100 read/write that software PLD or REG BIT FIELD TEST1 OPER R/W RESET TEST1: read/write field. MVME3100 and (6806800M28C
The MVME3100 that reads back the of the Table REG BIT FIELD TEST2 OPER R/W RESET FFFF TEST2: from this the of the write to this writes the to TEST1. The MVME3100 of to the four implemented the PLD. These and writable. The following sections the and The the clock each of the four timers. The clock input. The input clock to the The $E7, which reference clock input clock REG of BIT FIELD OPER R/W RESET $E7 MVME3100 and (6806800M28C) Memory
Memory The the following (CLKIN/CLKOUT) where CLKIN the input clock and CLKOUT the clock reference The the clock each of the four timers. The clock input. The input clock to the The $E7, which reference clock input clock Table REG BIT FIELD RSVD OPER R/W RESET ENC: counter. this high, the counter this the counter COC: Clear counter this high, the counter to when with the this the counter COVF: Clear overflow The counter cleared when written to this OVF: Overflow These the of the counter. The overflow counter incremented each the to the The counter cleared writing to the COVF ENINT: this high, the this the CINT: Clear MVME3100 and (6806800M28C RSVD CINT INTS ENINT OVF RSVD COVF COC ENC
INTS: RSVD: The counter to the they the asserted and the counter incremented. If the clear-on-compare the counter cleared. this should to the (T): the the counter should cleared to software and then If the counter initially the to the first or shorter than expected. The the counter Table BIT FIELD OPER R/W RESET MVME3100 and (6806800M28C) Memory
Memory Counter the Counter every microsecond. Software or write the counter Table Counter REG BIT FIELD Counter OPER R/W RESET Geographical The the the geographical of the MVME3100. This reflects the inverted of the geographical the P1 MVME3100 and (6806800M28C Counter Counter Counter Counter
Introduction This chapter includes information the MVME3100 single-board Items MPC8540 MPC8540 Chip Select Assignments Interface EEPROM VPD EEPROM RTM VPD EEPROM Ethernet PHY Memory PCI IDSEL Definition PCI Assignments Clock Distribution MPC8540 Clock MPC8540 LBC Clock MVME3100 and (6806800M28C) Chapter
MPC8540 The MVME3100 the (POR) MPC8540 The of the the MPC8540 when to the operating The following the options and the to the MPC8540 Reference B, Related and/or information. Table MPC8540 State of Function MPC8540 Option PCI_REQ64_L PLD PCI-32 PCI/PCI-X interface PCI_GNT1_L PCI Interface I/O PCI_GNT2_L PCI on-chip PCI/PCI- PCI_GNT3_L PCI PCI PCI_GNT4_L Switch PCI/PCI-X PCI-X EC_MDC TSEC Ethernet reduced (RTBI or RGMII) MVME3100 and (6806800M28C PCI/PCI-X interface on-chip PCI/PCI- PCI operates PCI Ethernet (TBI or GMII)
MPC8540 State of Function MPC8540 Select Option TSEC1_ TSEC1 TSEC1 TXD7 GMII (RGMII TSEC1 reduced TSEC1_ ROM Location PCI/PCI-X TXD TSEC2_ TSEC2 TSEC2 TXD7 GMII (or RGMII TSEC2 reduced MVME3100 and (6806800M28C) TSEC1 TBI (RTBI TSEC1 reduced DDR SDRAM GPCM ROM GPCM ROM GPCM ROM TSEC2 TBI (or RTBI TSEC2 reduced
MPC8540 State of Function MPC8540 Select Option TSEC2_ TXD LALE) TSEC2_ ID Unconnected TXD CPU off LA27 CPU LA PLD PCI MVME3100 and (6806800M28C CCB Clock PLL Ratio (CCB Clock SYSCLK) PCI LALE) LALE) LALE) without
MPC8540 State of Function MPC8540 Select Option LWE _L PCI LWE _L MPC8540 of and PCI/PCI-X LALE, LGPL2 Core Clock PLL Ratio Core CCB Clock) LGPL0, LGPL1 Clock Source MVME3100 and (6806800M28C) PCI-X of of PCI/PCI-X of both and PCI/PCI-X clock of clock clock of clock CCB clock of clock
MPC8540 State of Function MPC8540 Select Option LGPL3, LGPL5 LAD XX POR XX POR to CPPORCR MSRCID0 Memory info from the LBC MSRCID MDVAL MSRCID1 DDR info ECC instead of ECC The selected indicated required. PCI/PCI-X to MVME3100 and (6806800M28C with I2C with I2C info from the DDR SDRAM MSRCID MDVAL ECC function
LAD[0:31] POR, LAD[28:31] option. Software this to inform the or operating about board ECC from memory disconnected. MPC8540 The MVME3100 the MPC8540 integrated (PIC) to locally Currently and assignments, with and shown the following Table MPC8540 Polarity Source Notes VME0 ABORT Ethernet DS1375 PLD. QUART. to the MPC8540 Reference B, Related the operation of the MPC8540 PIC. MVME3100 and (6806800M28C)
Chip Select Assignments The following shows (LBC) and assignments the MVME3100 board. LBC Chip Select Assignments LBC Chip Select Function Notes 32MB 128MB Optional 32MB 128MB KB UART KB KB Not VPD and write written as Interface interface the MVME3100 C integrated the MPC8540. The MPC8540 C the software to the of the C located the MVME3100. The following the C the MVME3100 and their assigned Table I2C A2 A1 A0 (bytes) Function Notes I2C N/A DS1621 MVME3100 and (6806800M28C
Table I2C Addressing (continued) A2 A1 A0 (bytes) Function Notes I2C $A0 DDR memory SPD (SODIMM and to MPC8540 memory selects and $A2 $A4 $A6 $A8 VPD (on-board $AA RTM VPD (off-board $AC $AE $D0 N/A N/A DS1375 clock SPD the physical of each or of If both of SODIMM they the and memory This EEPROM. The switches the RTM. The recommended the MVME3100 $AA. EEPROM The MVME3100 board 64KB of 128KB These to IDs as shown Table and each ID other function. to the EEPROM Datasheet B, Related MVME3100 and (6806800M28C)
VPD EEPROM The MVME3100 8KB EEPROM containing (VPD) information to the MVME3100. Typical information that the EEPROM revision, of assembly, memory options L2 cache information, The VPD EEPROM to ID as shown to the EEPROM Datasheet B, Related RTM VPD EEPROM The MVME3100 board 8KB EEPROM containing VPD information to the MVME3100 RTM. Typical information that the EEPROM revision, of assembly, options The RTM VPD EEPROM ID with the recommended MVME3100 as shown Table to the EEPROM Datasheet B, Related Ethernet PHY The assigned Ethernet PHY the MPC8540 MII (MIIM) shown the following PHY and MII MPC8540 PHY MIIM Ethernet Function/Location PHY TSEC1 Ethernet routed to front BCM5461S TSEC2 Ethernet routed to P2 BCM5461S Ethernet routed to P2 BCM5221 MVME3100 and (6806800M28C
Memory The MVME3100 to or physical of memory. with AMD Spansion 3.0V to to The connected to LBC Chip Select the and populated. The connected to LBC Chip Select or and The VPD which and the of the Software or LBC selects based the VPD information. The following the options each The factory the MVME3100-1152 of 64MB; the MVME3100-1263, of 128MB. Table Spansion 32MB S29GL128N 64MB S29GL256N 128MB S29GL512N write switch the MVME3100 to write protection of both physical of the of the software write the write protection both when this switch ON. this switch OFF, write protection the of the software write and only clearing this the to information. The F_WE_HW reflects the of the switch and software whereas the F_WP_SW both and write operations. The MVME3100 option booting from of the which to as and B. and each 1MB and located the top (highest MB of the memory located the highest 1MB and the highest 1MB FLASH switch to and B. the switch OFF, the memory and selected. the MVME3100 and (6806800M28C)
switch ON, to the highest as shown below. The MAP_SEL the the switch and the memory to the with selected. RESET, this to the switch selection. PCI IDSEL Definition Each PCI associated to its IDSEL The following shows the IDSEL assignments the PCI and each of the PCI the board, with the assignment to the PIC to the MPC8540 Reference and PCI6520CB and each of the PCI Table IDSEL and PCI Devices PCI following PMC1 IRQ4 IRQ5 IRQ6 IRQ7 (PCI6520-1) MVME3100 and (6806800M28C AD PCI IDSEL or INT to MPC8540 IRQ internal MPC8540 VME IRQ0 IRQ1 IRQ2 IRQ3 PCI6520-1 PCI6520-2 IRQ2 PMC1 IRQ5 IRQ6 IRQ7 IRQ4 Secondary PMC2 IRQ6 IRQ7 IRQ4 IRQ5 PMC2 IRQ7 IRQ4 IRQ5 IRQ6 Secondary INTA# INTB# INTC# INTD#
IDSEL and PCI Devices (continued) PCI C IRQ4 IRQ5 IRQ6 (PCI6520-2) USB PCI IRQ6 IRQ7 IRQ4 IRQ5 The as when PCI-X If PCI to the The following shows the ID and the ID each of the PCI the MVME3100. Table PCI Function ID ID MPC8540 Bridge PCI6520CB VME USB MVME3100 and (6806800M28C) AD PCI IDSEL or INT to MPC8540 IRQ IRQ7 IRQ4 IRQ5 IRQ6 IRQ4 IRQ5 IRQ6 IRQ7 IRQ5 IRQ6 IRQ7 IRQ4 INTA# INTB# INTC# INTD#
PCI Assignments The integrated PCI/X to the MPC8540 and the PCI6520 PCI the MVME3100. The MPC8540 and the four PCI-X PCI A. The PCI6520 secondary PCI/X interface to the PCI6520. One secondary the PMC PCI B, and the other the and USB PCI C. The assignments the MVME3100 shown the follow that software assignments necessary. Table PCI Assignments PCI Assignment PCI Master(s) MPC8540 PCI_REQ/GNT[0] MPC8540 PCI_REQ/GNT[1] TSI148 VME MPC8540 PCI_REQ/GNT[2] PCI6520 to MPC8540 PCI_REQ/GNT[3] PCI6520 to C PCI6520-1 S_REQ/GNT[0] PMC PCI6520-1 S_REQ/GNT[1] PMC secondary PCI6520-1 S_REQ/GNT[2] PMC PCI6520-1 S_REQ/GNT[3] PMC secondary C PCI6520-2 S_REQ/GNT[0] USB C PCI6520-2 S_REQ/GNT[1] Clock Distribution The clock function and of the clocks operation. The clock tree such as to the edge-to-edge and clock-to-clock the Additional clocks the Table MVME3100 and (6806800M28C
the clocks the MVME3100 with their and The clock tree of The clocks the of the PCIXCAP and M66EN B. The PCI clock A, B, and C to with each other. Table Clock Assignments Clock Tree Clock Source VIO MPC8540 CLK_8540 3.3V CLK_VME 3.3V CLK_SATA PCI6520 CLK_P2P_ABP 3.3V PMC1 CLK_PMC1 3.3V PMC2 CLK_PMC2 3.3V PCI6520 CLK_P2P_ABS 3.3V Secondary USB CLK_USB C 3.3V CLK_SPAN C 3.3V MPC9855 CLK66 3.3V BCM5461S CLK25_25V_PHY 2.5V BCM5221 CLK25_33V_PHY 3.3V MVME3100 and (6806800M28C) CLK_P2P_ACP CLK_P2P_ACS C 3.3V
Table Clock Assignments Clock Tree Clock Source VIO and CLK25_33V_PLD 3.3V PLD QUART CLK_UART 3.3V CLK25 3.3V USB CLK48 3.3V RTC CLK32 3.3V MPC8540 Clock The MPC8540 clock (RTC) input clock the and PLD. This clock reference the RTC that software as known reference. To this clock as the RTC reference, software the SEL_TBCLK the MPC8540 HID0 MPC8540 LBC Clock The MPC8540 LBC clock the and PLD. The LBC clock from or ratio of the internal CCB clock as the clock ratio (LCRR[CLKDIV]). of the CLKDIV which the The software this MVME3100 and (6806800M28C CLK_LBC CCB_CLK/8 MPC8540 3.3V
Specifications A.1 its the MVME3100 operation. On-board supply the V, V, and V. PMC that or V, these the chassis. A-1 of the typical and from each of the input supply A-1 MVME3100 Typical: W) V.0 or peripherals attached W) chassis, PMC should to of both PMC chassis, the PMC of A.2 Specifications Table A-2 the specifications, with the board Table A-2 MVME3100 Specifications Characteristics Specifications to C/32F to 131F or with forced cooling to C/-40F to 185F Relative Humidity to Non-operating: to RMS, RMS, Physical 6U, 4HP (IEEE MTBF hours based MIL-HDBK-217F Notice MVME3100 and (6806800M28C)
Specifications Product High and the the specified the completely and there applying A.3 Thermally The following that These the that should to thermal performance. The the reference and the allowable operating You the board their reference of the board that of these Table A-3 Thermally Allowable Reference Location U1012 0C to 105C/32F to 221F Junction XU1 Memory 0C to 70C/32F to 158F U21 VME Bridge 0C to 70C/32F to 158F U1009, U1010 PCI Bridge 0C to 70C/32F to 158F U5000 SATA -0C to 70C/32F to U1028, U1029 Ethernet 0C to 70C/32F to 158F U1039 Ethernet PHY -40C to 85C/-40F to U1051, U1052 Clock -40C to to U1054 0C to to Junction MVME3100 and (6806800M28C
A-1 MVME3100 and (6806800M28C) U21 U1052 U5000 U1051 U1010 U1012 XU1 Specifications
Specifications The location or as the Junction to the measured on-chip thermal to the the top, of the to the near the A-2 Secondary MVME3100 and (6806800M28C U1039 U1029 U1028 U1054
Related B.1 Emerson Network Computing The Emerson Network Computing publications below referenced this You of Emerson Network Computing publications Emerson office. of released (GA) products, the following Services> Technical Search. This the of Emerson Network Computing Table B-1 Emerson Network Computing Publication MVME3100 Single-Board Reference 6806800G37 6806800C24 PMC and 6806800A59 B.2 Manufacturers information, to the following sheets or the provided. Please that, while these the information to without B-2 Manufacturers and Source Publication MPC8540 Integrated Specifications Technical Telephone: www.freescale.com MPC8540 III Integrated Reference Technical Telephone: www.freescale.com MVME3100 and (6806800M28C) MPC8540EC MPC8540RM
Related Table B-2 Manufacturers and Source Publication PCI/X to VME Bridge Corporation March K2K 2M5 www.tundra.com BCM5421S 10/100/1000BASE-T Corporation www.broadcom.com BCM5221S Corporation www.broadcom.com PCI or PCI-X Datasheet Corporation S29GL S29GL512N, S29GL256N, S29GL128N AMD, Inc. www.amd.com/us-en/FlashMemory USB NEC PCI6520CB PLX Inc. CA www.plxtech.com EXAR ST16C554/554D, ST68C554 UART with EXAR Corporation CA MVME3100 and (6806800M28C 80A3020_MA001_02 BCM5421 BCM5221 SiI-DS-0160-C.pdf Revision S16265EJ3V0DS00 ST16C554/554D
Table B-2 Manufacturers and Source Publication EEPROM Corporation CA www.atmel.com/atmel/support DS1621 Thermometer and Thermostat Integrated Products DS1375 Clock Integrated Products TSOP SMT USA B.3 Related Specifications information, to the following related specifications. the provided. Please that, while these the information to without B-3 Related Specifications and Source Publication VITA VME64 Specification ANSI/VITA VME64 ANSI/VITA Source Synchronous VITA PCI (PCI SIG) (PCI) Specification, Revision PCI-X to the PCI Specification MVME3100 and (6806800M28C) Related AT24C512 DS1621 PCI
Related Table B-3 Related Specifications and Source Publication IEEE IEEE Common Card Specification (CMC) of and P1386 Inc. IEEE PCI Card Specification (PMC) of and Inc. USB Revision MVME3100 and (6806800M28C P1386.1
MVME3100 and (6806800M28C) Related
Notes This section that procedures throughout this Instructions contained the phases of operation, service, and of this You should other the of the operating to with these or with this or to the Emerson to information to and the this of the complexity of this and its that the information If information, Emerson This (SELV) to the EN60950-1 Information The of the other to that trained Emerson or or authorized to or the The information this to the knowledge of and as from the covers. factory authorized service or other service covers internal subassembly or or internal or unauthorized of the or the warranty Emerson service and to that maintained. EMC The tested Emerson and found to comply with the Class this to of the FCC EN Class respectively. These to reasonable protection interference when the operated MVME3100 and (6806800M28C)
This Class based the of the Council Interference Information Interference (VCCI). If this such the to corrective The and and, properly and with this interference to the to interference, which the user to the interference his of and incorrect and or their life. touching the or that of the Product and Additional Devices and Incorrect or of or the or the or or or the respective and Switches/Jumpers Product Malfunction Switches as might production-related and the to malfunction their of switches as MVME3100 and (6806800M28C) Notes
Notes Product High and the the specified the completely and there applying Improperly of products the of products to countrys legislation and instructions. MVME3100 and (6806800M28C)
MVME3100 and (6806800M28C) Notes
Emerson Informationen Informationen Informationen Emerson. SELV EN Emerson Informationen Fachpersonal Emerson. MVME3100 Notes Summary (6806800M28C)
EMV Emerson EN A. A. MVME3100 and (6806800M28C)
MVME3100 and (6806800M28C)
HOW TO REACH LITERATURE AND TECHNICAL SUPPORT: USA and technical and www.emersonnetworkpowerembeddedcomputing.com Emerson Network The Business-Critical Continuity AC Connectivity DC Emerson, Business-Critical Continuity, Emerson Network and the Emerson Network and service of Emerson other or service the property of their respective owners. Emerson Computing Integrated www.emersonnetworkpowerembeddedcomputing.com Switching Precision Cooling Services Protection