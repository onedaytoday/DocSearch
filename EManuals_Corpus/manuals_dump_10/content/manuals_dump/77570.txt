Introduction The MVME147 MPU to the Interface (SCSI) The interface the WD33C93 SCSI interface To of to follow SCSI the SCSI allows to commands to the through high furnished, as as SCSI that easily to With this the firmware interface greatly software The SCSI firmware 128K and with the the MVME147 MPU The SCSI firmware offers the following features: Custom SCSI that allow creation of TARGET to peripheral High of SCSI allows Polled operation DMA with memory/scatter/gather interface allows through Thirty-one or function of the SCSI firmware, choice of of operation: and GENERAL INFORMATION
GENERAL INFORMATION the of operation. allowed TARGETs that reselection, and the phase. the specify the the to the Chapter The to the the whenever the SCSI phases), or whenever the TARGET with reselection; this allows commands the to Polled of operation. the user who This selected specifying the user thread the SCSI branch to the entry, the the SCSI the finished or interaction to the MVME147 SCSI Entry section that follows to this the the WD33C93. This Therefore, this recommended that MVME147 SCSI Entry The SCSI firmware the branch located the RAM and instructions to the SCSI the You to the RAM instead of the ROM releases the SCSI firmware within the The branch offsets $FFFE077C $FFFE0782 (reactivation entry) $FFFE0788 entry) $FFFE078E (FUNNEL $FFFE0794
$FFFE079A (RTE entry) Within the SCSI firmware, which without the the first longwords the branch referenced The within the RAM. ote The following of the of their to the Interface section $FFFE077C: COMMAND ENTRY to FUNNEL entry. $FFFE0782: REACTIVATION ENTRY to FUNNEL entry. commands activated the service through software $FFFE0788: INTERRUPT ENTRY This as the service vectors the MVME147 (offset from VBR) the WD33C93 the SCSI firmware. (offset from VBR) the DMA and $4B (offset $12C from VBR) the software the SCSI to service commands. The SCSI firmware these vectors. ote WAIT FOR INTERRUPT (OPEN) Intermediate indicating that WD33C93 the back to the SCSI firmware. The MVME147 commands currently from the SCSI to the SCSI The following intermediate with which to the entry: MVME147 SCSI Entry
GENERAL INFORMATION $FFFE078E: FUNNEL COMMAND ENTRY This that interfaces to the SCSI firmware. the command entry, commands anytime the firmware RTE to If RTE required, and to the accomplish both using the RTE below). The of the FUNNEL the FUNNEL to the of the SCSI the currently and the to the If the currently the FUNNEL the or the and to the with intermediate of $A002. This preprocessed or and to the SCSI when the free. $FFFE0794: COME-AGAIN ENTRY to FUNNEL entry. the commands serviced the service through software $FFFE079A: RTE ENTRY The SCSI firmware the that RTE instruction to the RTE of the If this RTE required; this RTE (the SCSI the RTE instruction as to or SYSTEM V/68 SCSI firmware RTE from another because of the interface. RTE inherited from another the of the RTE to RTE instruction. Supported The following shows the type assignments SCSI explicitly the SCSI firmware, and the each. /f3Note, however, that or Chapter or SCSI activity Additional commands to the SCSI firmware peripheral
responsibility the of to information to this firmware CONTROLLE DEVICE PART MANUFACTUR CODE TYPE NUMBER NOTES ER/MODEL 0D TEAC FD235J 0E 1002921-1B 0F Common Command WREN III 900475-11-2B Streaming Archive WREN IIIHH SWIFT SWIFT Streaming Streaming Streaming Supported
GENERAL INFORMATION CONTROLLE DEVICE PART MANUFACTUR CODE TYPE NUMBER NOTES ER/MODEL CONTROLLE DEVICE PART MANUFACTUR CODE TYPE NUMBER NOTES ER/MODEL WREN IV ST 157N/M U92-9662-0004 Synchronous Common Streaming TEAC MT- 2ST/45S2 WREN 4380S Maxtor 8760S ST 125N/M ST 1096N ST 296N/M HP 88780A Command
CONTROLLE DEVICE PART MANUFACTUR CODE TYPE NUMBER NOTES ER/MODEL EXB- 8760S Devices Supported Synchronous Common Command NO Supported and TE: Supported and Supported Common Command 1002921-1B WREN III WREN IIIHH 900475-11-2B WREN IV WREN SWIFT SWIFT 4380S WREN 4380S Maxtor 8760S Supported
GENERAL INFORMATION Common Command matches SCSI II rather than 17B. Common Command the cache these /M assembly as shown with type. from: A/S, P.O. N-0808, Norway, or Newbury CA Related The publications the following helpful information. If shipped with this they purchased from Distribution AZ telephone obtained from the listed. DOCUMENT TITLE PUBLICATION NUMBER MVME147 MPU MVME147 MVME147S MPU MVME147S MVME147BUG MVME712A/MVME712AM/MVME712B MVME712A Transition and MVME147P2 MVME712M Transition and MVME712M MVME147P2 MOTOROLA
M68000 M68000UM Reference M68000 Family M68KVSF Reference to VME and Software MVMEDOS NOTE: Although shown the each publication with characters which the of the such as /D2 (the of bears the as the such as /A1 (the first to the The following publications from the indicated. SCSI Inc., CA SCSI Interface; X3T9.2/82-2, Revision and business Association, First N.W., Washington, D.C. WD33C92 and WD33C93 SCSI Interface Irvine, CA Common Command (CCS) of the Interface (SCSI) X3T9.2/85-52 Revision 4B; and Association, First N.W., Washington D.C. Terminology Throughout this whereby and character which the as follows: DOCUMENT TITLE PUBLICATION NUMBER Terminology MOTOROLA
GENERAL INFORMATION otherwise specified, throughout this following the which that the or when the following the which that the actions initiated that high to this assertion and to specify forcing to assertion and assert to that active or and that inactive or These of the (high or that they
Introduction The SCSI firmware from SCSI and from SCSI of these functions and write, and write, and positioning operations. The the SCSI that the Supported section Chapter If to function that or to with SCSI that the SCSI firmware, to rewrite the SCSI firmware. SCSI operation through the of the SCSI SCSI of Following typical You to SCSI that the SCSI firmware. offline COPY command directly the SCSI firmware. You this COPY through the SCSI You to interface the MVME147 to SCSI You to commands from There three of SCSI the following They TARGET TARGET Custom The shown the following CUSTOM SCSI PACKETS
CUSTOM SCSI PACKETS LUN LUN (MSW) (LSW) Command Table (MSW) +$0A Command (LSW) +$0C +$0E Scatter/Gather Count Function (1C) +$1A Retry Count from SCSI firmware from SCSI (MSW) (LSW) Command (MSW) $0A Command (LSW) $0C FC B8
$0E (TARGET $0F Scatter/gather count. SCSI function ($1C SCSI to to from SCSI firmware from SCSI $1A $1B Retry count of SCSI Custom scatter/gather DMA because command scatter/gather the occurred. to scatter/gather count
CUSTOM SCSI PACKETS NOTES: to Chapter This first and/or through the MVME147 SCSI firmware while the the According to SCSI SCSI (usually which operation to another SCSI TARGET SCSI which operations to other SCSI the the SCSI firmware. These SCRIPT: of SCSI phases that the the TARGET to when command. SCSI typically the following SCSI phases: MESSAGE-OUT: The IDENTIFY from the to the TARGET. This the of the of the selected that the wishes to read. The whether the of reselection. COMMAND: The Command (CDB) the phase to the to read, the to from, the of to read, and whether the DATA-IN: The from the TARGET to the the phase. STATUS: The the of the that this phase. MESSAGE-IN: this phase, the the of the executed. The command information would appear the this phase, BUS DISCONNECT: command from the SCSI releasing the BSY* The as follows. On the SCSI the TARGET the SCSI that the of phases that with the (this Command Table RAM
PHASE DIRECTION NOTES activity the SEL* and BSY* activated. SCSI the of the activating BSY* and their ID. (Re)Selection One SCSI selects another activating SEL* with its ID and the ID the other Information Phases: Command command to TARGET the TARGET what the initiator. The CDB this phase. TARGET The of to to initiator. TARGET from the TARGET to the to as of phase the CDB. from the to the to TARGET TARGET as of phase the CDB. TARGET to the to to command, and information. commonly "thread"). The allows the SCSI firmware to follow the TARGET and allows the firmware to thread once the SBC allows "multithreading" of SCSI commands the SCSI to disconnected threads. Without the SCSI firmware to whether the TARGET the that through the CDB. The following the SCSI phases. Custom
CUSTOM SCSI PACKETS PHASE DIRECTION NOTES to the TARGET to to TARGET command, and information. abort, only the information phases. The free, and selection phases to specified The that the MVME147 SCSI the following that TARGET the Custom section this chapter. CODE BUS PHASES ROLE END OF SCRIPT COMMAND PHASE and TARGET DATA-OUT PHASE and TARGET $0C DATA-IN PHASE and TARGET STATUS PHASE and TARGET MESSAGE-OUT PHASE and TARGET MESSAGE-IN PHASE and TARGET $1C END OF SCRIPT TARGET TARGET WAIT, TARGET TARGET WAIT, TARGET TARGET WAIT, TARGET $2C TARGET WAIT, TARGET DISCONNECT TARGET NOT DEFINED NO DISCONNECT DISCONNECT NO DISCONNECT DATA RECEIVED DISCONNECT DATA RECEIVED
If the SCSI to the phase and then from the or as without from the the phase and then the firmware command and command back to You the as as the to what SCSI should to the TARGET to to with phase), and to the SCSI command. the the would $14,$04,$0C,$10,$18,$00. The of written anywhere the MVME147- It ROMed. The the SCSI the of the first of the the would to the Therefore, the phase should the first phase COMMAND TABLE of RAM). The the SCSI firmware the of SCSI Command the of DMA, commands, SCSI DMA scatter/gather, SYNC/ASYNC to the firmware through the of the Command The CDB of the of the The of the SCSI the CDB to to the SCSI that to selected. The SCSI Command Table which the of the first of this the the Command Table RAM the firmware writes to of the the of the Command shown the following Custom
CUSTOM SCSI PACKETS Retry Count (MSW) (LSW) Command SCSI Command (CDB) +$0A SCSI Command Block (CDB) +$0C SCSI Command (CDB) +$0E SCSI Command (CDB) SCSI Command (CDB) SCSI Command Block (CDB) SCSI SCSI to (MSW) (LSW) +$1A (MSW) +$1C (LSW) +$1E (MSW) (LSW) (MSW) (LSW) +$2A +$2C Sector (MSW) Sector (LSW) SCSI FC B8
+$6A +$6C +$6E Command +$9E FC B8 Parity Parity MVME147 SCSI DMA DMA off DMA CSCSI Custom commands out/in
CUSTOM SCSI PACKETS CSCSI SCSI SCSI SCSI SASI firmware SASI SG scatter/gather SG scatter/gather SYNC to scatter/gather SCSI to this scatter/gather DMA On INITIATOR SCSI firmware initiates On TARGET SCSI firmware initiates IF DOES NOT first phase.
Retry count (MSW) commands. (LSW) Command of the CDB SCSI command (CDB) $0A SCSI (CDB) $0C SCSI (CDB) $0E SCSI (CDB) SCSI (CDB) SCSI (CDB) SCSI ASYNC asynchronous Custom bytes) SCSI 17B allows On INITIATOR this the of On TARGET SCSI 0(LSB), and The with
CUSTOM SCSI PACKETS SCSI TARGET to (MSW) of (LSW) $1A (MSW) to memory $1C (LSW) the firmware and to initiator. If to such as the higher priority. You should this with the and the SCSI phase the TARGET expected or phase where reads or writes
$1E expected (MSW) to RAM (LSW) expected (MSW) to RAM (LSW) $2A $2C Sector (MSW) Custom where to phase, to phase where to to TARGET
CUSTOM SCSI PACKETS Sector (LSW) from SCSI or write. or write. to Command following within (unchanged) TARGET firmware SCSI This the of the to This the memory of the $0B) SCSI command This the information the
the INITIATOR $9E NOTE to scatter/gather scatter/gather S: commands to You to function operating The of commands the SCSI of commands the TARGET commands. the phase command, the TARGET switches to phase the command. The and selection phases the If and SCSI firmware SCSI and command to the If SCSI firmware the SCSI from the command and the reflects firmware MVME147 SCSI firmware ONLY SCSI TARGET the CDBs received from the SCSI and to the user without with CDB length. LUN or when or abort received, the CDB the firmware to the Instead, Custom following and command. information This firmware and
CUSTOM SCSI PACKETS command. The following command the commands). The SCSI command with PACKET FOR THE LINKED COMMAND EXAMPLE: PACKET DC.W CONTROLLER LEVEL=4, DEVICE LUN=0 DS.W RETURNED STATUS WORD (BYTES AND DC.L LSCRIPT SCRIPT POINTER DC.L CT1 COMMAND TABLE POINTER DC.W RESERVED +C DC.W INITIATOR ROLE CUSTOM SEQUENCE +E DC.W RESERVED DC.W RESERVED DC.W $001C FUNCTION CODE=CUSTOM SCSI SEQUENCE DC.W INTERRUPT LEVEL VECTOR DS.W STATUS BYTES AND DC.W RETRY COUNT=3 +1A SCRIPT READ WRITE: LSCRIPT DC.B MESSAGE OUT (IDENTIFY) DC.B COMMAND (READ) DC.B $0C DATA IN DC.B STATUS DC.B MESSAGE IN DC.B COMMAND (WRITE) DC.B DATA OUT DC.B STATUS DC.B MESSAGE IN DC.B END OF SCRIPT (LINKED COMMANDS REQUIRE AS MANY COMMAND TABLES AS THERE ARE PIECES OF THE LINKED COMMAND. I.E. FOR READ/WRITE LINKED COMMAND, TABLES ARE REQUIRED)
*****************************COMMAND TABLE FOR THE FIRST COMMAND************** CT1 DC.B LINK FLAG ON PARITY CHECKING ENABLED DMA ENABLED CUSTOM SEQ. FLAG=> FIRMWARE CHECKS STATUS FIRMWARE USES SCSI RULES (RESELECT, ETC.) RESERVED NO SCATTER/GATHER OPERATION ASYNC SCSI TRANSFER DC.B RETRY COUNT=0 DC.L CT2 THE ADDRESS OF THE SECOND COMMAND TABLE DC.W COMMAND LENGTH (GROUP COMMAND) DC.B READ COMMAND DC.B LUN=0, BLOCK ADDR MSB=0 DC.B BLOCK ADDR DC.B (FULL BLOCK ADDR=$00086) DC.B BLOCKS REQUESTED DC.B CONTROL BYTE: FLAG BIT=1, LINK BIT=1. *NOTE below the DC.B DONT CARE DC.B DONT CARE DC.B DONT CARE DC.B DONT CARE DC.B DONT CARE DC.B DONT CARE DS.B USERS STATUS BYTE IS STORED HERE DC.B SCSI INITIATOR ADDRESS DC.L BLOCKS BYTES/BLOCK= BYTES DC.L BUFF DATA BUFFER ADDRESS DC.W MESSAGE IN AREA ALLOCATION= BYTE DC.L MSIN1 MESSAGE IN AREA POINTER DC.W MESSAGE OUT AREA ALLOCATION BYTE DC.L MSOUT1 MESSAGE OUT AREA POINTER DS.B REMAINING OF THE BYTE COMMAND TABLE MSIN1 DS.B MESSAGE IN AREA FOR COMMAND TABLE MSOUT1 DC.B $C0 THE IDENTIFY MESSAGE FOR LUN WITH RESELECTION BUFF DS.B BLOCK DATA BUFFER Custom
CUSTOM SCSI PACKETS *****************************COMMAND TABLE FOR THE WRITE COMMAND************** CT2 DC.B LINK FLAG OFF PARITY CHECKING ENABLED DMA ENABLED CUSTOM SEQ. FLAG=> FIRMWARE CHECKS STATUS FIRMWARE USES SCSI RULES (RESELECT, ETC.) RESERVED. NO SCATTER/GATHER ASYNC SCSI TRANSFER DC.B RETRY COUNT=0 DC.L NO LINK ADDRESS PROVIDED. DC.W COMMAND LENGTH (GROUP COMMAND) DC.B $0A WRITE COMMAND DC.B LUN=0, BLOCK ADDR MSB=0 DC.B BLOCK ADDR DC.B (FULL BLOCK ADDR=$00086) DC.B BLOCKS REQUESTED DC.B CONTROL BYTE: FLAG BIT=0, LINK BIT=0. DC.B DONT CARE DC.B DONT CARE DC.B DONT CARE DC.B DONT CARE DC.B DONT CARE DC.B DONT CARE DS.B USERS STATUS BYTE IS STORED HERE DC.B SCSI INITIATOR ADDRESS DC.L BLOCKS BYTES/BLOCK= BYTES DC.L BUFF DATA BUFFER ADDRESS DC.W MESSAGE IN AREA ALLOCATION= BYTE DC.L MSIN2 MESSAGE IN AREA POINTER DC.W MESSAGE OUT AREA ALLOCATION BYTE DC.L MSOUT2 MESSAGE OUT AREA POINTER DS.B REMAINING OF THE BYTE COMMAND TABLE MSIN2 DS.B MESSAGE IN AREA FOR COMMAND TABLE MSOUT2 DC.B NO MESSAGE OUT PHASE FOR THE SECOND COMMAND.
command with the supported, and the ote TARGET Custom The TARGET shown the following LUN LUN Not Used Used Command (MSW) +$0A Command (LSW) +$0C +$0E C Function (1C) +$1A Retry Count from SCSI firmware FC B8 TARGET Custom
CUSTOM SCSI PACKETS from SCSI firmware Not Not Command (MSW) $0A Command (LSW) $0C $0E TARGET $0F SCSI function ($1C Custom SCSI to to from SCSI firmware from SCSI firmware $1A $1B Retry count NOTES: to Chapter TARGET Command RAM
This "class" of to TARGET service the MVME147 SCSI serviced through the firmware. Each to other TARGET each that to service. The TARGET should TARGET and received TARGET It recommended that the TARGET and TARGET The should the TARGET received. WORD CONTROLLER LUN This the SCSI of the MVME147. already the SCSI this field to with the known SCSI If the match, ID when the received. DEVICE LUN This through which TARGET to only TARGET WORD STATUS and These the to the firmware. to WORDS and SCRIPT POINTER The the firmware the TARGET WORDS and $0A: COMMAND TABLE POINTER This the to the of RAM). TARGET command of command allowed the TARGET this because of the TARGET commands. WORD $0E=$C000: This classifies the as TARGET to the firmware. WORD The of $1C classifies the as TARGET Custom
CUSTOM SCSI PACKETS WORD The because TARGET (If TARGET nothing to the MVME147 other than the TARGET firmware the would selection as TARGET.) The to the to (You that and to service IMPLEMENTATION NOTE: It highly recommended that each TARGET to the service of each LUN and from the other WORD Not the the TARGET WORD $1A: Not the firmware the TARGET TARGET Custom The TARGET shown the following LUN LUN (MSW) (LSW) Command Table (MSW) +$0A Command (LSW) +$0C +$0E Function (1C) FC B8
+$1A Retry Count from SCSI firmware from SCSI firmware (MSW) (LSW) Command (MSW) $0A Command (LSW) $0C $0E TARGET $0F SCSI function ($1C SCSI to to from SCSI firmware TARGET TARGET Custom
CUSTOM SCSI PACKETS from SCSI firmware $1A $1B Retry count NOTES: to Chapter This third "class" of to service commands and MVME147 TARGET selects the MVME147 as TARGET, the firmware switches to TARGET which the initiator, and to the TARGET service (through the the TARGET service of the If the that selected the MVME147 as TARGET the TARGET firmware the SCSI to the phase, CDB, the CDB the through the TARGET and through the the selected service. If the received, of or intermediate of the of the LUN The of IDENTIFY WITH RESELECTION received. The intermediate of ATN* asserted selection or IDENTIFY WITHOUT RESELECTION received. You then TARGET to service the command. IMPLEMENTATION NOTE: The SCSI DOES information to as to which SCSI service from the TARGET command offset WORD CONTROLLER LUN This match the SCSI of the MVME147 as Custom DEVICE LUN This the to service WORD STATUS and This the that serviced (finished, Command Table RAM
WORDS and SCRIPT POINTER The of the TARGET to to service the TARGET the MVME147 the SCSI The TARGET the firmware which information phases to through to service the that the CDB. TARGET the of the information phases with SCSI referenced to the initiator. That the phase INTO the initiator. TARGET the phase INTO the OUT of the TARGET). ote the phase, the to the initiator. the phase, the GOOD to the initiator. TARGET to service commands include phases. Below of TARGET CDBs; CDB and the other CDB. (peripheral type CDB Command CDB The LUN CDB MSB CDB CDB LSB CDB DC.B $0C DATA-IN PHASE DC.B STATUS PHASE DC.B MESSAGE-IN PHASE DC.B $1C END OF TARGET SCRIPT The the information to the phase. the the where the located MVME147- memory. TARGET Custom
CUSTOM SCSI PACKETS the phase, the COMMAND COMPLETE to the The END OF TARGET SCRIPT the firmware to from the and to (through the the TARGET with of indicating the TARGET completed successfully. the phase, the writes to the MVME147. The count the phase, the GOOD the phase, the COMMAND COMPLETE The of TARGET the to from the SCSI and to through the the TARGET WORDS and $0A: COMMAND TABLE POINTER The of the TARGET Below of the of the TARGET TARGET COMMAND TABLE DESCRIPTION: CT assignments: (peripheral type CDB $0A Command write CDB The LUN CDB MSB CDB CDB LSB CDB DC.B DATA OUT PHASE DC.B STATUS PHASE DC.B MESSAGE IN PHASE DC.B $1C END OF TARGET SCRIPT
Not the TARGET firmware. to CT and LINK POINTER. Not the TARGET firmware. CT COMMAND LENGTH. Not the TARGET (The CDB from the that the TARGET You the command the and to CDB, the TARGET of the command and of the CDB CT through COMMAND DESCRIPTOR BLOCK. Not the TARGET to CT length.) CT SCSI STATUS. TARGET the the The MVME147 SCSI firmware the of this with the SCSI offset phase encountered the TARGET SCSI which interfacing with the TARGET firmware.) D7 Not the TARGET firmware. (This the Command accomplished with the of this D6 Not the TARGET firmware. (This the D5 Not the TARGET firmware. (This the DMA DMA TARGET DMA, DMA) D4 MUST Not the TARGET firmware. (This the and D3 Not the TARGET firmware. (This the SASI/SCSI The TARGET which to follow the assertion of ATN and the option of the IDENTIFY D2 This scatter/gather If DMA the the to to the scatter/gather this D1 SYNC =ASYNC D0 TARGET Custom
CUSTOM SCSI PACKETS CT and DATA LENGTH. The of to the or the phase. Not DMA and SG CT $1A and $1C: DATA POINTER. If DATA-IN the TARGET the FROM the pointed to this If DATA-OUT the TARGET the firmware TO the pointed to this This to SG DMA SG used. CT $1E: MESSAGE-IN LENGTH. Not the TARGET firmware the count the phase. CT and MESSAGE-IN POINTER. If the TARGET the firmware the from where this CT MESSAGE-OUT LENGTH. Not the TARGET firmware. CT and MESSAGE-OUT POINTER. If the that threaded to the MVME147 to the MVME147, the firmware the that pointed to this (The ATN serviced the ATN asserted selection or phases. The IDENTIFY internally the threading If the ATN phase that serviced, the that from the the to this CT TARGET SCSI firmware The of the $0E=$8000: This classifies the SCSI as TARGET $14=$001C: This classifies the as SCSI The TARGET The the the to
STATUS BYTES and Not the TARGET firmware. $1A: RETRY COUNT. Not the TARGET firmware. TARGET Custom
CUSTOM SCSI PACKETS
to the they with offset of and the other with offset of as shown the below, respectively. The first the the offset to the Interface the SCSI section information. Also, to the command offset PACKET RETURN STATUS to Table (RTE FLAG) (of to the This preceded and the first this RTE This and the first return, therefore, RTE to from where occurred. A3 to (D0-D7, A0-A6). (ADDITIONAL STATUS)
PACKET RETURN STATUS (FINALSTAT) Intermediate The completed essfully, OR the This that the operation that the the SCSI The the ote *(L1 *(L2 *(L3 *(L4 offset SCSI Phase used) (RES) (ILI) Incorrect
*(L1 *(L2 *(L3 *(L4 *(L5 *(L6 *(L7 (EOM) of (FM) (COMMAND RETRY) (COMMAND RE- TRY OVERFLOW) Retry overflow. The count" and
PACKET RETURN STATUS (MSW) (LSW) SCSI +$6A +$6C +$6E Command Block +$9E Block (MSW) This the (LSW) from SCSI (unchanged) or write. FC B8 information from following from SCSI and command.
or write. Command following within $9E CODE MEANING NOTES Intermediate OK to commands other to firmware. received. You (TARGET command from allowed. (TARGET from initiator, then with This the memory of the to $0B)
PACKET RETURN STATUS CODE MEANING NOTES (TARGET from with then with GOOD. OK. TARGET without and user then with with IRQ ($F00050). Reselection expected from this TARGET. TARGET thinks it commands the command command aborted. The to rejected. TARGET Encountered phase and then with Intermediate
CODE MEANING NOTES $0A SCSI (A1 to to the SCSI section Chapter $0B Command or closed when received) Custom SCSI to or Format: with type supported. SCSI type. type. type. $0C $0D ID or ID. $0E previously attached, LUN, $0F There and TARGET the of that to BERR* while DMA Selection TARGET SCSI SCSI. mismatch. CHECK STATUS. If SCSI within (offset then mismatch, otherwise SCSI The TARGET of operation match the SCSI Command (TARGET Disconnect allowed. TARGET and (TARGET command). $1A TARGET called. TARGET supported. Table
PACKET RETURN STATUS CODE MEANING NOTES $1B TARGET rejected and with this to LUN service $1C TARGET with to the LUN that the $1D TARGET to the the LUN that the already servicing command. $1E TARGET ABORT from the SCSI initiator. $1F TARGET DEVICE RESET from the SCSI initiator. NO SENSE. Indicates that there information to the RECOVERED ERROR. Indicates that the completed with recovery action the TARGET. examining the and information bytes. NOT READY. Indicates that the accessed. intervention to this MEDIUM ERROR. Indicates that the TARGET nonrecoverable that caused the or recording HARDWARE ERROR. Indicates that the TARGET nonrecoverable while the or ILLEGAL REQUEST. Indicates that there the or the as
CODE MEANING NOTES UNIT ATTENTION. Indicates that the or the TARGET DATA PROTECT. Indicates that that reads or writes the attempted that protected from this operation. BLANK CHECK. Indicates that write-once or while reading or write-once while writing. VENDOR UNIQUE. Used reporting AP $2A COPY ABORTED. Indicates that or and aborted to $2B ABORTED COMMAND. Indicates that the TARGET aborted the command. The to recover trying the $2C EQUAL. Indicates search $2D VOLUME OVERFLOW. Indicates that peripheral reached end-of-medium and the that written to the recover issued to the from the $2E MISCOMPARE. Indicates that the match the from the $2F RESERVED. This SCSI Phase SCSI CHECK. SCSI CONDITION MET. SCSI BUSY. SCSI INTERMEDIATE/GOOD. $3A SCSI INTERMEDIATE/CONDITION MET/GOOD. $3C SCSI RESERVATION CONFLICT. Table
PACKET RETURN STATUS CODE MEANING NOTES NO ERROR STATUS. NO INDEX SIGNAL. NO SEEK COMPLETE. WRITE FAULT. DRIVE NOT READY. DRIVE NOT SELECTED. NO TRACK MULTIPLE DRIVES SELECTED. CARTRIDGE CHANGED. $4D SEEK IN PROGRESS. ID ERROR. ECC the field. DATA ERROR. read. ID ADDRESS MARK NOT FOUND. DATA ADDRESS MARK NOT FOUND. SECTOR NUMBER NOT FOUND. SEEK ERROR. WRITE PROTECTED. CORRECTABLE DATA FIELD ERROR. BAD BLOCK FOUND. $5A FORMAT ERROR. track command. $5C UNABLE TO READ ALTERNATE TRACK ADDRESS. $5E ATTEMPTED TO DIRECTLY ACCESS AN ALTERNATE TRACK. $5F SEQUENCER TIME OUT DURING TRANSFER. INVALID COMMAND. ILLEGAL DISK ADDRESS. ILLEGAL FUNCTION. VOLUME OVERFLOW. Table through
NO TES Intermediate offset of to The SCSI from the with $1E, shifted right and offset of to Command Intermediate the allowed to the
PACKET RETURN STATUS
SCSI The SCSI interface firmware efficiency. Whenever the SCSI that the firmware releases the other such as and these back to the firmware. to the SCSI through the pointed to A2. the firmware to the through this whether the brought back to the firmware through This the RTE FLAG the the If the RTE to the If the eventually RTE the to the to the whenever the RTE instruction to executed, the the the RTE. This of to properly the that interrupted. through the A3 of where the If A3 then (that and the RTE FLAG should to the of Intermediate Command (TARGET or to the Interface section the intermediate back to the firmware One through WD33C93 (WAIT FOR INTERRUPT (OPEN)). The other through branch or SCSI FIRMWARE INTERRUPT STRUCTURE
SCSI FIRMWARE INTERRUPT STRUCTURE the REACTIVATION of the SCSI firmware. The WAIT FOR INTERRUPT (OPEN) usually when TARGET "threaded" to the MVME147 the SCSI and transitioning information phases. phase the back to the SCSI to the command that temporarily the TARGET. the WAIT FOR INTERRUPT (OPEN) the the SCSI free. The of the branch or to the REACTIVATION of the firmware. the (WAIT TIME, MESSAGE RECEIVED, COMMAND RECEIVED), the MVME147 the SCSI and the service the "thread". The SCSI firmware to both and the chooses the of operation, the WD33C93 the specified the MVME147 the WD33C93 the SCSI and the SCSI offset to to the SCSI to the SCSI the MC68030 than that specified the switched of the the MC68030 the
Introduction This chapter covers information writing to the SCSI interface of the The approach to the sections of that to The shown extracted from the SCSI and the interface to the operating this interface, of the interaction the and the SCSI firmware, that to the SCSI building memory and the SCSI_CMD the The of the A2. Access to the SCSI through the of located within the of the MVME147 The and their SCSI firmware shown the following SCSI_CMD EQU SCSI $FFFE077C SCSI_ACTV EQU SCSI $FFFE0782 reactivation SCSI_INT EQU SCSI entry. $FFFE0788 SCSI_FUN EQU FUNNEL $FFFE078E entry. SCSI_CA EQU Come-again $FFFE0794 SCSI_RTE EQU RTE entry. $FFFE079A from the SCSI through (offset from the MVME147 SCSI DMA through (offset The from the MVME147 SCSI the $4B (offset $12C) to to SCSI firmware. The SCSI firmware these vectors to to its WRITING DRIVER
WRITING DRIVER from the SCSI to the through the the The $4E (offset and $4D (offset These vectors to to which the to the Interface the SCSI section this chapter the The SCSI firmware commands peripheral too commands the completed, or abnormally terminated, other command to the firmware. Commands to other issued intermediate or from the SCSI firmware to the information, to the Interface the SCSI section this chapter. Building the Chapter the to the the built, to to the SCSI firmware. to the SCSI from the to the SCSI directly to the firmware from the The from the back to the through the within the the SCSI commands each to internal commands to to Interface the SCSI SCSI firmware or to the SCSI firmware or that from the firmware. other SCSI the that the firmware This imply that SCSI Interface to SCSI
information; imply that only the of the the known as the of the SCSI firmware that SCSI without knowledge of other This that than the of the first Interface COMMANDS ARE SENT TO FUNNEL COMMAND ENTRY. You the of A2 and to the FUNNEL ($FFFE078E). The supervisory and the the specified the to the FUNNEL as noted below. command to the FUNNEL command the following intermediate received. Command (TARGET The intermediate when TARGET threaded and the SCSI These to the RTE to the firmware-specified to below. You to the FUNNEL with clear, indicating that RTE to executed. this the the SCSI_RTE $FFFE079A. A3 intact.) IMPLEMENTATION NOTE: interface or interface usually the and decoupled. other commands to the SCSI firmware as of subroutine or as of TRAP to or Interface the SCSI
WRITING DRIVER Command the of firmware to the specified the If this the the SCSI firmware or That the to the the At the the to the the command and the to the without hesitation. INTERMEDIATE RETURNS MUST REENTER AT The following of intermediate the firmware The SCSI firmware this occurred the or firmware SCSI to action this other than servicing the RTE the firmware that or received TARGET You the of and TARGET The MVME147 threaded the when this to the The user the and the If of the the to the reactivation ($FFFE0782), and of the clear, the to the RTE ($FFFE079A) and A3 intact. this RTE the If the RTE with this RTE required. If this A3 to TARGET and the SCSI firmware the The this to to service the and to to the reactivation ($FFFE0782) REACTIVATION OR RTE ENTRY.
ALL FINAL RETURNS MUST EXIT (THE DRIVER) through of the the of the to about the of the SCSI firmware and of the SCSI BIT FINAL=(0)/INTERMEDIATE=(1) STATUS this BIT ADDITIONAL STATUS this found the (CT If this BIT RTE If this RTE to thread. this A3 to where D0 through D7 and A0 through A6 If the RTE to the the first restored. If this RTE to executed. The the only of the You MUST follow the below to interface to the SCSI firmware successfully. RETURN CODE: RTE or the RTE ($FFFE079A) RTE as This intermediate when the TARGET CAUTION to the of A3 when the RTE Interface the SCSI PROPERLY THROUGH RTE, COME- AGAIN, OR REACTIVATION.
WRITING DRIVER IF BIT IS SET THEN RETURN TO THE CALLER OF YOUR CODE THROUGH AN RTS IF HE CALLED YOU WITH BSR/JSR thread) AN RTE IF HE CALLED YOU WITH TRAP THAT REQUIRES AN RTE RETURN. ELSE: clear) RESTORE THE REGISTER SET POINTED TO BY A3. SOMEHOW PERFORM THE RTE REQUIRED BY THE FIRMWARE. thread) SOME OPERATING SYSTEMS HAVE COMMON INTERRUPT HANDLER THAT PERFORMS ALL RETURNS FROM INTERRUPT PROCESSING. IN THIS CASE, EXECUTE THE COMMON INTERRUPT HANDLER TO PERFORM THE RTE. IF THE PARTICULAR OPERATING SYSTEM OF THE USER DOES NOT HAVE COMMON INTERRUPT HANDLER, EXECUTE THE RTE INSTRUCTION. ENDIF. END OF RETURN CODE. from the the and the through the software $4B) the firmware and from the reasons: already through the firmware BLDPCKT command and ready to with the or TARGET the SCSI The reason that this to the that selection or reselection of the MVME147 beat this to the It that this to the FUNNEL processing. the and the the arrived, the
The RTE third RTE instruction effectively the command or the commands serviced, the or the commands would serviced. EXCEPTIONS TO THE RETURN ALGORITHM: THE SCSI FIRMWARE CAN ONLY PROCESS SIX The the of the SCSI peripheral the firmware to threading information the SCSI This the One peripheral to the and each there each (each to peripheral its respective the If peripheral that both and FUNNEL You this FUNNEL the and to with $A002 this to processing, the firmware the software to the ($FFFE0788). Interface the SCSI COMMAND PACKETS, IN AVERAGE, PER PERIPHERAL DEVICE AT TIME.
WRITING DRIVER the FUNNEL or the FUNNEL four and active command INTERFACE RULE SUMMARY FOR SCSI FIRMWARE USERS WITH MULTIPLE CALLERS: typical with the following interfaces: SCSI SCSI TARGET LUN service Services SCSI the MVME147 as TARGET and services of the MVME147 TARGET. TARGET LUN service Services of the MVME147 TARGET. TARGET LUN service Services of the MVME147 TARGET. TARGET LUN service Services of the MVME147 TARGET. TARGET LUN service Services of the MVME147 TARGET. TARGET LUN service Services of the MVME147 TARGET.
TARGET LUN service Services of the MVME147 TARGET. TARGET LUN service Services of the MVME147 TARGET. The summary below to who to the SCSI firmware. INTERMEDIATE RETURNS: PERFORM AN RTE (HOWEVER REQUIRED) IF BIT OF THE RETURNED STATUS WORD IS OR RETURN TO THE CALLER OF THE DRIVER/SERVER BY THE APPROPRIATE METHOD. E.G. IF THE DRIVER IS CALLED BY BSR, AN RTS SHOULD BE USED. AFTER APPROPRIATE PROCESS, RETURN TO THE REACTIVATION ENTRY ($FFFE0782) IF BIT OF THE RETURNED STATUS WORD IS OR RETURN TO THE RTE ENTRY ($FFFE079A) IF BIT OF THE RETURNED STATUS WORD IS SAME RULE AS FOR ABOVE. INITIATOR DATA RECEIVED, USER MUST INTERPRET THEN CONTINUE WITH NEW TARGET SEQUENCE PACKET BY FOLLOWING SAME RULE AS FOR ABOVE. Interface the SCSI
WRITING DRIVER SIMILAR TO ABOVE, ONLY THE DATA RECEIVED HAS SOME PARITY ERROR OCCURRED. FINAL RETURNS: STATUS WORD BIT IF CLEAR, SOMEHOW RESTORE REGISTER (RTE) SET AND PERFORM AN RTE. IF SET, SAMPLE RETURN CODE FOR ONE OF MANY CALLERS OF THE SCSI FIRMWARE: It clear to the that A3 this If RTE to A3 to the The subroutine RESTORE_REG A3 to the D0 through D7 and A0 through A6. If reentry to the RTE the A3 intact. ote SCSI_RET the that pointed to the the SCSI_RET THE FIRST RETURN FROM THE SCSI FIRM- WARE (COMMAND THREAD) AND THE USER SHOULD RETURN TO WHOMEVER CALLED THE DRIVER (RTS, ETC.).
MOVE.W 2(A2),D0 STATUS WORD TO D0. BTST #15,D0 FINAL/INTERMEDIATE STATUS? BEQ FINALSTAT IF THE RETURN IS FINAL ONE. *THE FOLLOWING CODE CHECKS ALL ALLOWED INTERMEDIATE RETURN CODES. CMP.B #$02,D0 WAITING FOR AN INTERRUPT? (BUS CLEAR) IF <EQ> THEN BRA RET_OUT NO NEW COMMANDS TO SEND BECAUSE NO QUEUING NECESSARY FOR MULTIPLE CALLERS, THE SCSI FIRMWARE QUEUES COMMANDS WHEN THE BUS IS BUSY. BECAUSE OF THIS REASON, NO COMMAND QUEUING IS NECESSARY IN THE DRIVER. IF THERE IS NO QUEUING IN THE DRIVER, THE DRIVER WILL NOT HAVE NEW COMMAND TO SEND WHENEVER AN INTERMEDIATE OR FINAL RETURN OCCURS. THE COMMANDS ARE ALWAYS SENT AS THEY ARRIVE TO THE DRIVER. RET_INT the to the from process. ENDI CMP.B #$04,D0 MESSAGE INTERPRETATION? IF <EQ> THEN BSR INTERPRET INTERPRET IS MESSAGE INTERPRETATION ROUTINE BRA RET_INT ENDI CMP.B #$06,D0 COMMAND RECEIVED FOR THE TARGET? IF <EQ> THEN BSR SERVCMD SERVCMD IS TARGET ROLE COMMAND SERVICE ROUTINE BRA RET_INT ENDI Interface the SCSI
WRITING DRIVER THE CODE BELOW HANDLES FINAL RETURN CODES. FINALSTAT: BSR POSTSTAT POSTSTAT IS SUBROUTINE THAT POSTS FINAL STATUS POSTSTAT RETURNS THE BIT=1 IF STATUS IS O.K. THE CODE BELOW IS COMMON EXIT CODE FOR THIS DRIVER. RET_OUT BTST #13,D0 RTE REQUIRED? IF <EQ> THEN BSR RESTORE_REG A3 IS THE INPUT TO THIS REGISTER RESTORE ROUTINE RTE EXECUTE THE RTE FOR THE SCSI FIRMWARE ENDI THERE ARE ONLY TWO WAYS TO ACTUALLY EXIT THIS CALLER ROUTINE. IS TO EXIT VIA THE EXECUTION OF AN RTE. (A TASK WAS INTERRUPTED BY THE SCSI BUS AND THE EXECUTION OF THE RTE WILL RESUME THAT TASK.) ROUTINE CALLED THIS DRIVER BY SUBROUTINE CALL. IT IS RETURNED TO WITH THE EXECUTION OF AN RTS. ALL OTHER EXITS GO BACK TO THE SCSI FIRMWARE (FOR THIS EXAMPLE). RTS
RESTORE REGISTERS FOR SCSI ROUTINE The the the SCSI used. A3 to of the to The following or and advanced as used. Entry: A3 to of to to RESTORE_REG: MOVE.L #14,D0 of to ADDA.L #60,A3 from of RSTRLOOP MOVE.L -(A3),-(SP) the MOVEM instruction. DBRA D0,RSTRLOOP MOVEM.L (SP)+,D0-D7/A0-A6 REST_OUT RTS END Interface You the as callers. or third without the of the using the the firmware to than would otherwise to Interface the SCSI
WRITING DRIVER the specifically, If choose to follow the the whenever the of the SCSI interface SCSI the operating to If the used, then SCSI the operating without affecting the that the vectored through than the SCSI to the Interface section this chapter
Introduction According to SCSI SCSI that initiates the to the TARGET; TARGET SCSI that selected and what the initiator. The MVME147 of both the and TARGET with the WD33C93 SCSI interface of the SCSI the WD33C93, the TARGET of the MVME147 SCSI the of and the MVME147 operating as TARGET the SCSI the SCSI revisions and three commands processor-type these SEND (0A), RECEIVE and REQUEST SENSE The of the SCSI and the built around the three commands the SCSI MVME147 SCSI Background The MVME147 SCSI firmware that the SCSI of reads, writes, and read, write, and respectively. Another of SCSI the SCSI of the MVME147 firmware. With the SCSI to of information phase and to the that this to the firmware, with the the SCSI and and With this interface, the firmware of SCSI information phases that The TARGET the these SCSI of the TARGET The SCSI allowance SCSI SCSI to service peripheral If peripheral the SCSI there of The MVME147 SCSI firmware of the the SCSI This the of each to TARGET ROLE ROUTINES
TARGET ROLE ROUTINES the SCSI The accomplished the of peripheral Each of to each SCSI The MVME147 of these SCSI other SCSI to the SCSI to as there another SCSI that the the then the MVME147 the TARGET the The the SCSI with TARGET of peripheral other the SCSI firmware TARGET allow of peripheral associated with the MVME147. The of these through the of the MVME147 the SCSI LUN LUN RS-232C and through I/O the (as Each of the other as as the SCSI firmware concerned. To this each service each should to the SCSI firmware. SCSI SASI as the SCSI concerned, SCSI that reselection, and the phase. Typically, SASI and least TARGET. SASI with only and reselection clearly only SCSI to the With these clear that the MVME147 to both as and as TARGET the SCSI SCSI that reselection, and the phase. (The phase of reselectability the selection phase and of the immediately following reselection.) If the MVME147 to only as TARGET the SCSI with only the then SASI with the MVME147 as TARGET only. MVME147 SCSI TARGET The following sections the the SCSI the TARGET to Chapter Custom Custom Chapter
Command Table through TARGET MVME147 LUN through Below the TARGET SCSI phases. DISCONNECT COMMAND PHASE DATA-OUT PHASE $0CDATA-IN PHASE STATUS PHASE MESSAGE-OUT PHASE MESSAGE-IN PHASE $1CEND OF SCRIPT TARGET WAIT, NO DISCONNECT ALLOWED TARGET WAIT, DISCONNECT ALLOWED TARGET WAIT, NO DISCONNECT, DATA RECEIVED $2CTARGET WAIT, DISCONNECT, DATA RECEIVED Command shown the section Chapter Status/Control the TARGET Parity the TARGET DMA (implemented the TARGET CSCSI SCSI SG with DMA the TARGET SYNC/ASYNC (implemented the TARGET to the the first release). MVME147 SCSI TARGET
TARGET ROLE ROUTINES allowed command. If of required, commands to to the (user Command Count The of the Command Commands this This the phase the Count count. to the below. DATA-IN: to the initiator, DATA- OUT: from the Count of to to the initiator. to the below. to the initiator. Count used) to the below. from the initiator. TARGET as the TARGET Custom section Chapter with the of TARGET
Command Table bytes) the TARGET when the TARGET issued to the firmware, neither the command the because both TARGET service. ote (the SCSI allows SCSI referenced to the initiator. the phase phase OUT of the and INTO the TARGET. Therefore, the STORAGE from the to the TARGET. ote the specified the of the service the A2 with the of the the SCSI through the FUNNEL ($FFFE078E) of the FUNNEL to the SCSI Entry section Chapter the of This that the acknowledged the and the received. (This preceded $A002 the the that the to the firmware.) The service of the TARGET LUN the selection the to TARGET and commands and/or the service. If command TARGET then the to with (SCSI or intermediate of (SASI or indicating that the CDB $0E $C000), and with the following TARGET service. TARGET
TARGET ROLE ROUTINES the command The service of this This service SCSI TARGET which the section. IMPLEMENTATION NOTE: The TARGET LUN from the immediately the selection phase. If the LUN this phase the firmware the the MESSAGE REJECT and then from the If rejected, that other LUN this MVME147 TARGET otherwise the SCSI firmware would to the selection the first If selection the TARGET the firmware, the firmware the the SEL from the this the SCSI the and its from the Servicing the TARGET LUN TARGET selection the service TARGET and the TARGET the (The selection through the WD33C93 turned and the off. the selection accomplished clearing the the WD33C93 and/or turning the PCC SCSI off through the board TARGET the MVME147. If TARGET selection of the MVME147 the to to the selection asserting the BSY The following typical of SCSI If the ATN asserted with SEL, the the SCSI to the phase and reads the The firmware then the SCSI to the phase, reads the or bytes), and the count and the the If the and the LUN the firmware and the and command the firmware; this the If allowed then phase directed the firmware the phase: the DISCONNECT Then releasing the BSY The first TARGET
service the Finishing the to the service the selected LUN and of If phase and the TARGET intermediate received. If firmware the to commands with meaningful Also, "Not Ready" to ready, and commands. To other commands to the services. The CDB that the TARGET firmware the command phase the that when issued the TARGET to the firmware. (The command to this to the TARGET Custom section Chapter and $0A You to service the commands SEND ($0A) and RECEIVE The service of commands The SEND and RECEIVE commands to establish the SCSI Following of each service. Servicing the SEND through the TARGET STEP Command Below the CDB SEND command. (OP CODE) (M length) length) (L length) Servicing the TARGET
TARGET ROLE ROUTINES The of $0A the SEND command. The LUN should match the the MVME147 TARGET. The to exchanged the phase. The and the and to "INTERMEDIATE STATUS/GOOD STATUS" the and "GOOD STATUS" the clear. If the "LINKED COMMAND COMPLETE" the If both the and "LINKED COMMAND COMPLETE WITH FLAG" the If neither the the should "COMMAND COMPLETE" the (The of the The to and of the and features the first release of the TARGET STEP Preparation The SEND the following DATA-OUT PHASE STATUS PHASE MESSAGE-IN PHASE $1C END OF TARGET SCRIPT The SCSI firmware the and reselection of the disconnected The IDENTIFY to the disconnected initiator, therefore, the phase should the SEND command. ote
STEP Preparation the from the and this the and length. the and the to to the the phase the STATUS (MSB) of the the and and the to the phase the (pointed to and of the TARGET SCSI as the TARGET Custom section Chapter This should to the and to the that created or used. (You to the that the TARGET to the SCSI firmware.) STEP the SCSI A2 to the created and the SCSI through the FUNNEL command entry. Servicing the RECEIVE through the TARGET STEP Command Below the CDB RECEIVE command. (OP CODE) (M length) length) (L length) Servicing the TARGET
TARGET ROLE ROUTINES The operation of the RECEIVE command. The LUN should match the the MVME147 TARGET. The to exchanged the phase. The and should treated the as the SEND (Not the first release.) STEP Preparation The RECEIVE command the following $0C DATA-IN PHASE STATUS PHASE MESSAGE-IN PHASE $1C END OF TARGET SCRIPT The SCSI the and reselection of the initiator. The IDENTIFY to the initiator, therefore, the phase should the RECEIVE command. ote STEP Preparation the from the CDB and this the and length. the and the to to the the phase the STATUS (MSB) of the
the and and the to the phase the to and of the TARGET SCSI as the TARGET Custom section Chapter This should to the and to the command that created or used. (You to the that the TARGET to the SCSI firmware.) STEP the SCSI A2 to the created and the SCSI firmware through the FUNNEL entry. the service and the SCSI TARGET issued to the firmware. This to service the that received. to the firmware to immediately following the reselection of the The firmware the phase with the to reestablish the thread. This information phase should NOT the The phases as instructed the "$1C=FINISHED" encountered. This the the firmware to from the or to service of the of command. The information to the through the of the CDB. If the the firmware the to the phase, the and count the the to the phase, and SCSI the firmware to the user service with of that following the of the earlier serviced The service then If the serviced and instead, the firmware cleans and to the service with SCSI TARGET shown the TARGET Custom section Chapter Servicing the TARGET
TARGET ROLE ROUTINES
Introduction Command the SCSI functions Table The the following FUNCTION CODE DESCRIPTION read, to below) write, to below) to $0C Format (with/without Assign Sector $1C Custom SCSI to Chapter SCSI SCSI $2C $3C CRC Select SCSI Functions SCSI SCSI PACKETS below) to $6C below) of
SCSI PACKETS FUNCTION CODE DESCRIPTION $4C Load/Unload Recover $5C Release $6C New New and New and New $7C of first of Read/Write command to A. DISK. Commands to the and ($2A). or write function, the of that If the command type the on/off the cache within the If the currently the as the field cache of to the to on/off the to the read/write command. TAPE. Commands to the and write ($0A). or write the and the to the To write, the or write positioning that the (space-to-end-of- recorded-media). Also, the (BOT), Table SCSI Functions SCSI
space-to-end-of-recorded-media, or write command. To read, the BOT or following space-blocks, space-filemarks, or command. The the the to or and the to DISK and TAPE. scatter/gather operation, the scatter/gather count the memory and scatter/gather field the of the scatter/gather The of sectors field and to the count. The of read/write shown below. New LUN LUN Memory (MSW) Memory (LSW) Sector (MSW) +$0A Sector (LSW) +$0C of Sectors to (MSW) +$0E of Sectors to (LSW) Scatter/Gather Count Command Function FC B8 Read/Write
SCSI PACKETS from SCSI from SCSI firmware Memory (MSW)/scatter/gathe Memory (LSW)/scatter/gather Sector (MSW) $0A Sector (LSW) $0C of sectors to $0E of sectors to Scatter/gather count, of scatter/gather count scatter/gather count of blocks/bytes to (MSW) of to (LSW)
Command SCSI function Read, through to from SCSI firmware from SCSI firmware ON type only OFF type that that Read/Write SG SG this this that this that this (Notes (Notes
SCSI PACKETS NOTE to Chapter S: to the following scatter/gather The of this firmware from to It should the throughout the firmware when the chosen there command. The should to the the path. both the and the the (VBR) to the to the operation, the VBR should there SCSI commands. scatter/gather operation, RETRY SCSI and the scatter/gather the firmware when the completed. the previous both physical and This field of to Supported LUN LUN Memory (MSW) Memory (LSW) Sector (MSW) +$0A Sector (LSW) +$0C of Sectors to +$0E Scatter/Gather Count FC B8
Command Function from SCSI from SCSI firmware Memory (MSW)/scatter/gathe Memory (LSW)/scatter/gather Sector (MSW) $0A Sector (LSW) $0C of sectors to $0E Scatter/gather count, of Read/Write scatter/gather count scatter/gather count of to
SCSI PACKETS Command SCSI function Read, through to from SCSI firmware from SCSI firmware ON type OFF type that that SG SG this this that this that this (Notes (Notes
NOTE to S: DMA Scatter/Gather Table Entry scatter/gather longwords: first DMA memory control/byte count. XXXX XXXX XXXX XXXX XXXX XXXX |function to entryused (supervisory to the following scatter/gather The of this firmware from to It should the throughout the firmware when the chosen it there command. The should to the the path. both the and the the (VBR) to the to the operation, the VBR should there SCSI commands. scatter/gather operation, RETRY SCSI and the scatter/gather the when the completed. DMA MEMORY ADDRESS (32-BIT) Read/Write
SCSI PACKETS NOTES: There of scatter/gather to A. The following SCSI commands DEVICE NAME COMMAND NOTES SCSI on-attach/release-on-detach command to the SCSI to the Release on-attach/release-on-detach release to the and the clears internal release command SCSI to release the ready whether the selected ready. $1A To the If the the than the reads/writes and The scatter/gather MVME147 RAM (the DMA offboard RAM). COMMAND CONTROLLER
DEVICE NAME COMMAND NOTES TAPE and the to BOT to command. other commands to the SCSI firmware SCSI or the SCSI and internal RAM SCSI firmware building internal and the to the SCSI The RAM should reallocated the or COMMAND CONTROLLER on-attach/release-on-detach to the SCSI to the Release on-attach/release-on-detach release to the and the firmware clears internal release command SCSI to release the This the operat-ional ready whether the selected ready.
SCSI PACKETS SCSI the first command to them or The SCSI firmware the the information and that or the the the to You then the command. The first below shows the of The shows the of streaming third the specified the and commands. The normally examined when the to the Chapter On operations scatter/gather) which DMA used, the "sector and "command to New LUN LUN Rate of Heads of +$0A +$0C Sectors Track +$0E SCSI Function +$1A Retry Count +$1C Physical Block FC B8
+$1E RAM Work (MSW) RAM Work (LSW) Sectors to (SCSI from SCSI firmware from SCSI firmware Rate of of heads of $0A $0C sectors track, physical this $0E SCSI Block of to sectors track
SCSI PACKETS FM encoding, MFM encoding, TPI TPI, TPI TPI) 250K inch) 500K inch) release release Non-buffered IBM sectors sectors Soft-sectored Hard-sectored
type to type type SCSI function through to from SCSI firmware from SCSI firmware $1A $1B Retry count: of SCSI commands $1C Sector/block (MSW) $1E Sector/block (LSW) $0C this to the correction and off the Also, the firmware the SCSI and
SCSI PACKETS of SCSI RAM (MSW) of SCSI RAM (LSW) of physical the of sectors This SCSI RAM or or command. The firmware this the SCSI CDB and and and the of the of the then the sectors track field This sector of to The as or as specified of the SCSI
the of NOTE: to Chapter Supported LUN LUN Rate of Heads of +$0A +$0C Sectors Track +$0E SCSI Function 0C) +$1A Retry Count +$1C Physical +$1E Sectors to FC B8 offset that to the of the
SCSI PACKETS RAM Work (MSW) RAM Work (LSW) (SCSI from SCSI firmware from SCSI firmware Rate of of heads of $0A $0C sectors track, physical this $0E SCSI FM encoding, MFM encoding, of to sectors track
type to type TPI TPI, TPI TPI) 250K inch) 500K inch) release release Non-buffered IBM sectors sectors Soft-sectored Hard-sectored track
SCSI PACKETS type SCSI function through to from SCSI firmware from SCSI firmware $1A $1B Retry of SCSI commands $1C Sector/block $1E the of sectors $0C this to the firmware correction and off the Also, the the SCSI and to The
$1F the of of SCSI RAM (MSW) of SCSI RAM (LSW) NOTE: to High PCXT PCAT FM/MFM FM/MFM MFM MFM as track or as specified of the SCSI offset that to the of the This SCSI RAM or or command. The firmware this the SCSI CDB and and
SCSI PACKETS Rate Heads or $4D Sectors/Track $1A $0F Attribute Word $020B $028B $0F $0F $0F $0F Function $4E $4E $4E $4E Retry Count Physical to Work NOTE: to New LUN LUN 250K B/S 500K B/S 250K B/S 500K B/S Rate Rate Rate Rate FC B8 to
of Tracks Read +$0A Streaming Count +$0C +$0E SCSI Function (6C) +$1A Retry Count +$1C Physical +$1E to RAM Work (MSW) to RAM Work (LSW) from SCSI firmware from SCSI of Block
SCSI PACKETS write $0A $0B Streaming count $0C $0D Tracks BPI NR PE GC QIC-11 GC Cartridge lowest higher $0F highest
QIC-24 GC Cartridge PE $0E SCSI attributes type to type type SCSI function $6C through to from SCSI firmware from SCSI firmware $1A $1B Retry count: of SCSI commands Non-buffered writes writes release release
SCSI PACKETS $1C Physical (MSW) $1E Physical (LSW) of SCSI RAM (MSW) of SCSI RAM (LSW) NOTE to Chapter If both then used, and the the read/write offset $C the of to writes to allow to the streaming. If non-buffered, written to the If when to the although written to the to the Supported this to the correction and off the Also, the firmware the SCSI and of physical
LUN LUN of Tracks +$0A Streaming Count +$0C +$0E SCSI Function +$1A Retry Count +$1C Block +$1E RAM Work (MSW) RAM Work (LSW) from SCSI firmware from SCSI firmware FC B8
SCSI PACKETS of write $0A $0B Streaming count $0C $0E type to type type SCSI function $6C Non-buffered writes writes release release
through to from SCSI firmware from SCSI firmware $1A $1B Retry count: of SCSI commands $1C $1E of SCSI RAM (MSW) of SCSI RAM (LSW) NOTE to Chapter this to the firmware correction and off the Also, the firmware the SCSI and
SCSI PACKETS writes to allow to the streaming. If non-buffered, written to the If when to the although written to the This the SCSI to the SCSI command and to information. The this Shown below the This RAM or or command. The this the SCSI CDB and and ote Block (MSW) (LSW) SCSI (MSW) (LSW) +$6A +$6C +$6E Command Block FC B8
+$9E (MSW) Block (LSW) from SCSI (unchanged) (MSW) or write (LSW) or write gather used. operation only. This the of the to to gather used. only. This the of the to to
SCSI PACKETS Command following within $9E NOTE following or write to S: Format operation to A. The to the The following SCSI commands SCSI command This the information the following and command. information
DEVICE NAME COMMAND NOTES the Format The optional this command. If the of the with to the If the field the to the The the SCSI firmware, necessary, to the the Assign Sector (SCSI) The SCSI command to the Assign there least the The the with count the the SCSI firmware. The first the of format/assign sector The the related LUN LUN of Defect to Defect (MSW) to Defect (LSW) +$0A +$0C COMMAND CONTROLLER Format FC B8 Assign Sector (SCSI)
SCSI PACKETS +$0E Interleave Factor Command Function from SCSI from SCSI firmware of to (MSW) to Defect (LSW) $0A $0C $0E Interleave factor $0F Command to below)
CL DP DC SF CL Complete Clear and supplied. existing supplied. Clear and supplied. existing to the and supplied. existing user supplied. and supplied. existing user as the DP of Defects Clear. the DC Clear. the SF Stop Format Format accessed. Clear. formatting when of the accessed. SCSI function through Assign Sector (SCSI)
SCSI PACKETS to from SCSI firmware from SCSI firmware NOTE: to Chapter DEFECT LIST TYPE Defect Sector (MSW) Sector (LSW) FC B8 Sector (MSW) Sector (LSW)
DEFECT LIST TYPE FC B8 DEFECT LIST TYPE FC B8 Defect (MSW) (LSW) Sector Within Track (MSW) Sector Within Track (LSW) Defect (MSW) (LSW) Assign Sector (SCSI) Head
SCSI PACKETS Defect Sector (MSW) Sector (LSW) Sector (MSW) Sector (LSW) NOTES: Head from (MSW) from (LSW) The to the The sector Following the provided. This to 2N (where of the and the SCSI builds the the provided. of that the specified as physical sector numbers. the and their as follows: Sector head, sector head, from
SCSI This function activates the RST* (RESET) the SCSI the and commands that terminated. The SCSI cleans internal and the to the with ($0A). of the cleared this command, the should The following shows the of SCSI LUN +$0A +$0C +$0E Function FC B8 SCSI SCSI firmware 2N 4N of bytes.
SCSI PACKETS from SCSI from SCSI $0A $0C $0E SCSI function through to from SCSI firmware from SCSI NOTE: to Chapter only)
SCSI This function ($0C) to the specified the with ($0A). This command affects the specified the command, the to to SCSI to interface with the the specified cleared. this the the the ($0C). ote The command the the specified motion; the then and the BOT. The BOT this issued. to BOT The below shows the LUN LUN +$0A +$0C +$0E FC B8 SCSI
SCSI PACKETS Function (2C) from SCSI firmware from SCSI $0A $0C $0E SCSI function ($2C through to from SCSI firmware from SCSI firmware
NOTE: to Chapter The command the to the BOT. If the immediately, though the If the finished, to the MVME147, the firmware internal the If the the finished. The SCSI firmware shows the LUN LUN +$0A +$0C +$0E Immediate Function FC B8
SCSI PACKETS from SCSI firmware from SCSI firmware $0A $0C $0E Immediate $0F SCSI function through to from SCSI firmware from SCSI firmware NOTE: to Chapter when
Block The the and written the The the SCSI firmware QIC or QIC type which bytes. The below shows the LUN LUN (MSW) (LSW) +$0A +$0C +$0E Function from SCSI firmware from SCSI FC B8
SCSI PACKETS (MSW) (LSW) $0A $0C $0E SCSI function through to from SCSI from SCSI firmware NOTE: to Chapter of Recorded The command to the There four
to of recorded where of or to backwards using to the The below shows the LUN LUN of (MSW) of (LSW) +$0A +$0C +$0E Function of Recorded FC B8
SCSI PACKETS from SCSI firmware from SCSI of (MSW) of (LSW) $0A $0C $0E $0F SCSI function through to from SCSI firmware to of recorded used) used)
from SCSI firmware NOTE: to Chapter The write writes the specified of to the The or write to read/write information. ote The below shows the write LUN LUN of +$0A +$0C +$0E Function (3C) FC B8
SCSI PACKETS from SCSI from SCSI firmware of $0A $0C $0E SCSI function ($3C write through to from SCSI firmware from SCSI NOTE: to
CRC The Character (CRC) instructs the to the specified of and the CRC of each The the and the the of the to the MVME147 this operation. The or ote The below shows the CRC LUN LUN of (MSW) of (LSW) +$0A +$0C +$0E Function FC B8 CRC
SCSI PACKETS from SCSI from SCSI firmware of $0A $0C $0E SCSI function CRC) through to from SCSI firmware from SCSI NOTE: to Chapter The the the specified The ($1A) the QIC and type, and
The below shows the LUN LUN of Tracks +$0A Streaming Count +$0C +$0E SCSI (Notes Function +$1A +$1C from SCSI firmware from SCSI firmware FC B8 Select/Sense
SCSI PACKETS of or write $0A $0B Streaming count $0C $0E SCSI type to type SCSI function select, through Non-buffered writes Writes when specified of the when specified of the
to from SCSI firmware from SCSI firmware $1A $1C NOT to Chapter E: writes to allow to the streaming. If written to the If when to the although written to the The command information from the that which attached and its attributes. The and the of from to to the this information). The the specified and the the provided; however, the and information the The first below shows the The shows the FC B8
SCSI PACKETS LUN LUN (MSW) (LSW) +$0A +$0C +$0E Function from SCSI firmware from SCSI $FF) (MSW) (LSW) $0A $0C $0E
SCSI function inquiry) through to from SCSI firmware from SCSI NOTE: to Chapter SCSI Format Additional +$0A +$0C +$0E FC B8
SCSI PACKETS +$1A +$1C +$1E type access) type SCSI of ANSI unspecified) ECMA of access) (7F this to ECMA) unspecified)
$1E NOTE: Load/Unload The ($1B) the or to BOT. The the BOT, and the the (EOT). The the to to BOT, then to EOT, then to BOT the This the or function, If the immediately though the If the finished, back to the MVME147 firmware, the firmware internal the If the the finished. The below the LUN LUN +$0A +$0C +$0E Load/Unload FC B8 Load/Unload
SCSI PACKETS Function from SCSI firmware from SCSI firmware $0A $0C $0E $0F of of to BOT then EOT then BOT when Immediate first)
SCSI function through to from SCSI firmware from SCSI NOTE: to Chapter Recover The recover to recover the the following while writing to This the written to The and the specified. The below shows the recover LUN LUN Memory (MSW) Memory (LSW) +$0A FC B8 Recover
SCSI PACKETS +$0C of +$0E Function from SCSI firmware from SCSI firmware Memory (MSW) Memory (LSW) $0A $0C of $0E SCSI function recover through to
from SCSI firmware from SCSI firmware NOTE: to Chapter The command the of the The and the to this The and the of to the information. The below shows the LUN LUN (MSW) (LSW) +$0A +$0C +$0E Function (5C) FC B8
SCSI PACKETS from SCSI firmware from SCSI firmware (MSW) (LSW) $0A $0C $0E SCSI function ($5C through to from SCSI from SCSI firmware
NOTE: to Chapter The ready command to the The the to Command The below shows the LUN LUN +$0A +$0C +$0E Function FC B8
SCSI PACKETS from SCSI firmware from SCSI firmware $0A $0C $0E SCSI function through to from SCSI from SCSI firmware NOTE: to Chapter The of the first of This as that the count when the of the unknown.
LUN LUN Memory of to +$0C of to +$0E Command Function (7C This the first of or to the of or the of whichever first. If the of and the of match, the If the of of than the and the If the of of than requested, the count FC B8 +$0A
SCSI PACKETS
The first high to interface with ATTACH. ATTACH the SCSI and RAM to the SCSI the phase, and to incoming and This of the ATTACH and to and changeable The ATTACH the following to If of offset The firmware SCSI Command to the SCSI Command CDB BYTE OFFSET VALUE COMMENTS NOTE: Third reservation supported. If the offset CCS), and this the first ATTACH this the firmware and ready command. Synchronous COMMON COMMAND SET AND DISK OPERATION Command LUN BYTE VALUE COMMENTS C0 with reselection
COMMON COMMAND SET AND DISK OPERATION BYTE VALUE COMMENTS Unit Ready Command CDB BYTE OFFSET VALUE COMMENTS The The to the the they the the firmware internal to or write commands. this the command ($0B) Command CDB BYTE OFFSET VALUE COMMENTS The READ/WRITE the following to A-2 Synchronous REQ/ACK offset Command LUN 1A Command LUN 2C
If the scatter/gather field offset the the offset as scatter/gather the the READ/WRITE typical scatter/gather would Scatter/Gather Table ENTRY NUMBER ENTRY COMMENTS The READ and WRITE commands based the ATTACH and the READ/WRITE command. READ/WRITE Command CDB BYTE OFFSET VALUE COMMENTS DMA memory 0018E400 function count DMA memory 0022C800 function count DMA memory function (read), 2A (write) Command LUN count A-3
COMMON COMMAND SET AND DISK OPERATION NOTES: If the previous command the ATTACH or the ATTACH and the physical-bytes-per-block to the logical-bytes-per-block, the from the offset If the previous the ATTACH and the logical-bytes-per-block of the physical-bytes-per- the the sector offset the to physical logical-bytes-per physical-bytes- and the sector The ratio and the sector $C00. The information each below with each the FORMAT PARAMETER PAGE. The FORMAT the following to FORMAT PARAMETER PAGE If changeable If of the commands this and optional). If the previous commands and If the match the and the changeable changeable), to the the field the changeable A-4 If the the ATTACH or the ATTACH and the physical-bytes-per-block to the logical-bytes-per-block, the of sectors from the offset $0C. If the previous the ATTACH and the logical-bytes-per-block of the physical-bytes-per- the the of sectors offset $C) the to physical logical-bytes-per physical-bytes-per-block and the user of sectors The ratio would and the would
If the offset the the offset and the user command. FORMAT PARAMETER PAGE If changeable If of the previous commands this and optional). If the commands and If the match the and the changeable changeable), to the the the changeable If the offset the field the offset and command the command. FORMAT PARAMETER PAGE If changeable If of the commands this and optional). If the commands and If the count and the changeable changeable), to and count to using the changeable If the offset the field the command offset and the command. A-5
COMMON COMMAND SET AND DISK OPERATION The operation supplied, built below the with the four as the SCSI Three accepted. type type head, sector within track. type head, from The built as following: header: ORed with of offset Defect length. to Defect as If the header built. header. with of offset Defect length. The command built based the information type, the CL offset of and the interleave from offset $0E. A-6 of These the and and from type to another type. of These the user and and
Below the Command Block the Format command. Format Command CDB BYTE OFFSET VALUE COMMENTS NOTES: FMT CMP from the CL the offset Defect the type the Below of type and Defect and Defect Format. DEFECT LIST TYPE FORMAT (BITS (head, sector within track) (head, from Command LUN FMT CMP Interleave Interleave from the offset $0E. DEFECT LIST A-7
COMMON COMMAND SET AND DISK OPERATION MVME147 SCSI Firmware: formatting the MVME147 SCSI firmware read/write recovery to the the the command: Select Command CDB BYTE OFFSET VALUE COMMENTS NOTE: If of the match or changeable, only the header and and the $0C. If based the changeable, and the the including the header and the and the The first that the DATA OUT phase the the header, and the which below: Select and Block BYTE OFFSET VALUE COMMENTS A-8 Command LUN PF SP Select type
NOTE: The from the offset $1C, The that the DATA OUT phase the command the Select BYTE OFFSET VALUE COMMENTS Block of (MSB) of of (LSB) (MSB) Block Block (LSB) 0A AWRE, ARRE, TB, RC, ERR, PER, DTE, count Correction Heads offset count offset count count Recovery (MSB) Recovery (LSB) DCR A-9
COMMON COMMAND SET AND DISK OPERATION NOTES: If the field the offset $1B the DCR correction) and the count field to If the field the offset $1B NOT the and as the as from the command. formatting the MVME147 SCSI firmware command to the the command the command: Select Command CDB BYTE OFFSET VALUE COMMENTS NOTE: If of the match or changeable, the header and and the $0C. If based the changeable, and the the including the header and the and the The first that the DATA OUT phase the the header, and the which below: Select and A-10 This field as the as from the command. Command LUN PF SP
BYTE OFFSET VALUE COMMENTS NOTE: The from the offset $1C, The that the DATA OUT phase the command the Select BYTE OFFSET VALUE COMMENTS Select type of (MSB) of of (LSB) (MSB) Block (LSB) Tracks (MSB) Tracks (LSB) sectors (MSB) sectors (LSB) (MSB) (LSB) A-11
COMMON COMMAND SET AND DISK OPERATION BYTE OFFSET VALUE COMMENTS (MSB) (LSB) Sectors track (MSB) Sectors track (LSB) C sector (MSB) sector (LSB) Interleave (MSB) Interleave (LSB) Track factor (MSB) Track factor (LSB) factor (MSB) BYTE OFFSET VALUE COMMENTS factor (LSB) type field NOTES: Tracks to of the offset Tracks to the of heads offset of the offset A-12 sectors from the sectors field offset $1E or offset ATTACH field as the as from the command.
formatting the MVME147 SCSI to the the the command: Select Command CDB BYTE OFFSET VALUE COMMENTS from the to offset $1F or offset ATTACH the of heads (to to tracks). The of sectors track, sectors track, the offset $0C) sectors offset $1E) track offset sector from the offset $1C. Interleave from the offset $0E. Track factor field as the as from the command. factor field as the as from the command. type field HSEC the hard-sectored the offset the SSEC Other this field to This as the as from the command. Command LUN PF SP A-13
COMMON COMMAND SET AND DISK OPERATION NOTE: If of the match or changeable, the header and and the $0C. If based the changeable, and the the including the header and the and the The first that the DATA OUT phase the the header, and the which below: Select and BYTE OFFSET VALUE COMMENTS NOTE: The from the offset $1C, The that the DATA OUT phase the command the A-14 Select type of (MSB) of of (LSB) (MSB) Block (LSB)
Select BYTE OFFSET VALUE COMMENTS Select BYTE OFFSET VALUE COMMENTS of (MSB) of of (LSB) of heads Starting write Starting write write Starting reduced write Starting reduced write Starting reduced write C (MSB) (LSB) (MSB) (LSB) (MSB) (LSB) (MSB) (LSB) A-15
COMMON COMMAND SET AND DISK OPERATION NOTES: of from the offset the OMTI7000, the MVME147 SCSI to the Below the the command: Select Command CDB BYTE OFFSET VALUE COMMENTS The first that the DATA OUT phase the the header, and the which below: Select and A-16 of heads from the offset write from the offset $0A. Starting reduced write as the as from the command. The the offset of microseconds. This to writing to of the command. of the the to the as the as from the command. This field as the as from the command. Command LUN PF SP 2C
BYTE OFFSET VALUE COMMENTS NOTES: The type selected using the offset MEDIA ALL SECTORS 500K BITS/ MFM TYPE SAME BIT SEC BIT BIT NOTES 1B PCAT 0A FM/MFM FM PCXT type of (MSB) of of (LSB) Block (MSB) (LSB) ATTRIBUTE FLAGS A-17
COMMON COMMAND SET AND DISK OPERATION MEDIA ALL SECTORS 500K BITS/ MFM TYPE SAME BIT SEC BIT BIT NOTES FM/MFM The that the DATA OUT phase the the header and The header consists of the first below, the the bytes. Select BYTE OFFSET VALUE COMMENTS 1E (MSB) (LSB) of heads Sectors sector (MSB) sector (LSB) of (MSB) of (LSB) Starting write Starting write A-18 ATTRIBUTE FLAGS The from the offset $1C, (MSB) (LSB)
BYTE OFFSET VALUE COMMENTS Select BYTE OFFSET VALUE COMMENTS 1A 1D NOTES: $1F4 the $FA the This the the offset C Starting reduced write Starting reduced write (MSB) (LSB) Head (MSB) Head (LSB) 0C off E0 TRDY SSN MO Head Head 1B 1C 1E 1F of heads from the offset (MSB) (LSB) A-19
COMMON COMMAND SET AND DISK OPERATION and Definition High PIN CONTROL PIN CONTROL BIT COMMENTS ready, (high and Definition A-20 Sectors/track from the offset $0C. The of bytes/sector from the field the offset $1C. The of from the offset The write from the offset $0A. The reduced write from the offset $0A The specified the offset of microseconds. This converted to writing to of the command. of the of milliseconds ($003C) to written offset $0E. The field or the and track SCSI of the offset If TPI= TPI, then the field. If TPI= TPI, then the field. selected as Ready", and high/low select. The this the the offset If this selected and This below:
BIT COMMENTS ready, PIN CONTROL PIN CONTROL This field as the as from the command. A-21
COMMON COMMAND SET AND DISK OPERATION A-22