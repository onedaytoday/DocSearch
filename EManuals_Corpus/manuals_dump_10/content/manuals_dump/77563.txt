PowerPC-Based PMC from Emerson Network Computing
The information this and to and HOWEVER, NO RESPONSIBILITY IS ASSUMED BY EMERSON NETWORK POWER, EMBEDDED COMPUTING FOR ITS USE OR FOR ANY INACCURACIES. Specifications to without EMERSON DOES NOT ASSUME ANY LIABILITY ARISING OUT OF USE OR OTHER APPLICATION OF ANY PRODUCT, CIRCUIT, OR PROGRAM DESCRIBED HEREIN. This Emerson or the rights of others. Emerson. It and Business-Critical Continuity, Emerson and the Emerson Network and service of Emerson Emerson Revision Changes: release October Artwork stitch, RoHS Compliance, memory and SRAM front switch; updated chapter and Copyright Emerson rights
Agency Notices or to the without the of Emerson Network the authority to this where the without front or where the front the interference (EMI) shielding to EMC The Emerson the forth the tions (FCC) of the of Regulations. The following infor- mation as this agency. This with of the FCC to the following This interference, and this interference received, including interference that tion. FCC RULES AND REGULATIONS PART This tested and found to comply with the Class to of the FCC These to reason- protection interference installation. This and and, and with the instructions, interference to tions. there that interference tion. If this interference to or reception, which turning the off and the to to the interference or of the following or the Increase the the and the outlet from that to which the the or EMC COMPLIANCE The (EMC) that includes front assembly from Emerson Network
Agency Notices Emerson Network Computing Address: Wisconsin that the following with the of 2004/108/EEC, EMC Directive and 1999/5/EC, RTTE Directive and their Product: PMC and to the following specifications: EN55022:1998 Information characteristics, and of EN55024:1998 Information Immunity characteristics, and of EN300386 V.1.3.1 and (ERM); Telecommunication EMC that the to comply with the sections of the referenced specifications. This with the health and of the EMC Directive and RTTE Directive. that the products and the technical EC Declaration of Conformity According to EN
Memory Top LED Location Emerson CC1000-DM. the and Product ID MPC7448 MV64460 PCI and ID. PCI0 Monarch PCI0 Non-Monarch PCI JTAG PMC Connector Ethernet Connector (P1). Ethernet Assembly Connector (P2) Assembly (Emerson C0007662-00) M41T00 Clock DMC Top and (Revision DMC P1 PCB-to-PCB Connector DMC P2 Connector to DMC JTAG DMC P3 JTAG/COP DMC P4 JTAG Chain DMC JP1 Assignments DMC Location Power-up/Reset
Summary Table Agency Table Technical References Table Table CPU Features. CPU MPC7448 Table Memory Table Memory Table NVRAM Memory Table P11/P12 Assignments32-Bit PCI P13/P14 Assignments64-Bit PCI Ethernet Table Ethernet Assignments (P1) Table Ethernet Assignments Table I2C Table Assignments (P2) Table Assignments Table RTC DMC Mechanical Specifications Table DMC P1 Connector Assignments Table DMC P2 Assignments DMC P3 Assignments DMC P4 Assignments Table POST Table Optional
MPC7448 HID0. MPC7448 HID1. CPU State (MSR) L2 (L2CR). (RER) Command (RCR) (ROER) (IER) (IPR) Product ID (PIR) (HVR) PLD (PVR) (BCR3) (BCR1) (BCR0) DMC DMC LED
Bridge: SDRAM: The includes 32M Rate (DDR) Synchronous Access Memory (SDRAM) Memory (SO-DIMM). include and The to the of (ECC). The MV64460 acts as the memory I/O: The includes to EIA-232 operating and routed to the Card (DMC) options to the front or the P14 routed to P14, the the option of EIA-232 or TTL routed to P14 with the The includes three Ethernet BCM5461S PHY Ethernet and through P14. The KSZ8721CL PHY Ethernet through the front The and IEEE The Emerson PCI Card (PPMC). It based the MPC7448 and the which with PPMC architecture. The memory memory, PCI three Ethernet interfaces, as as clock, and EEPROM. COMPONENTS AND FEATURES The following summary of the and features: CPU: The MPC7448 RISC internal of to and The MPC7448 includes (L1) and instruction caches and L2 cache. supply with option both and The MV64460 (DiscoveryIII) that PCI-X three integrated Ethernet Access (MAC) integrated Synchronous Random Access Memory (SRAM), four Direct Memory (IDMA) and XOR Direct Memory Access (DMA) The PCI interface to (60X) or (PCI-X). Flash: The includes options of or The of booting from PLCC ROM the Card (DMC) or from Section
and Card (DMC): and routed through the directly to P14. Therefore, the Rear Transition (RTM) or CPLD: The Complex (CPLD) to memory-mapped and to to the Flash, ROM and tion of Monarch/non-Monarch RTC: The clock STMicroelectronics M41T00 Access The DMC optional mounted the back of the This and software Chapter
Functional FUNCTIONAL OVERVIEW The following functional the
Physical Memory Memory PHYSICAL MEMORY MAP the memory
Physical Memory Summary Table the physical the and reference to information: Physical Access Address: FF80,0000 R/W FF80,0000 R/W F854,0000 F850,0000 MV64460 SRAM F830,0000 F820,E000 R/W PCI F820,D000 DMC LED F820,C000 (BCR3) F820,B000 (BCR2) F820,A000 R/W (BCR1) F820,9000 (BCR0) F820,8000 PLD (PVR) F820,7000 (HVR) F820,6000 (JSR) R/W F820,5000 F820,4000 Product ID (PIR) F820,3000 R/W (IPR) F820,2000 R/W (IER) F820,1000 Command (RCR) F820,0000 (RER) F820,0000 R/W CPLD F810,0000 R/W MV64460 F800,0000 R/W ROM EBFF,FFFF E800,0000 R/W MB, MB) C000,0000 R/W PCI Memory and I/O R/W SDRAM MB, MB, GB, GB) 1.If Monarch, only; non-Monarch, write only.
Additional Information Table Agency ADDITIONAL INFORMATION This section the and the terminology and this It technical Mean (MTBF) hours Product The tested to comply with immunity, and as specified the (FCC), Industry (IC), (UL), and the Union Directives (CE The following this Specification: UL60950-1, CSA C22.2 Edition of Information including (Bi-National) NEBS: GR-63 Section Transportation and Section Section Office Section Transportation Section Airborne IEC60950/EN60950 of Information AS/NZS and New
Additional Information Specification: EMC FCC Class of Regulations, Devices EMC testing without the front or Ethernet These only. Also, EMC testing the with the This customers that PCI cards. It the responsibility to this ration their Emerson reports that information the and testing. Unshielded I/O screws, or poorly grounded chassis the to with of the stated specifications. UL The UL of Emersons UL To the search the directory Emersons UL E190079. There products distributed the United States, as as products shipped to To the search the the and/or The PCI Card (PPMC). The Printed (PCB) artwork which with each artwork revision). ICES Class Industry Interference-causing Radiated and Conducted NEBS: GR-1089 and Immunity testing only) AS/NZS Class radiated and conducted and New EN55022, Class Information Characteristics, and of EN55024 Information Immunity Characteristics, and of EN300386-2 and (ERM); Network (EMC) VCCI, Class Radiated and Conducted
Additional Information Active active indicated with the Throughout this to to to and to and with or with shown with Table Technical References The with the Unions (Restriction of of created to to the and health restricting the of and July restricts the of mercury (VI)), ethers and that built with lead-free that 5-of-6 built with tin-lead the lead-in- To of conformity (CoC) the to or the number(s) C000####- when Emerson. Terminology and Notation MAC: This the MAC to to both and the within IEEE specifications. PLD: This the PLD as known as FPGA, CPLD, EPLD, Technical References information basic operation and of the found the following Interface: CPU MPC7450 RISC Family MPC7450UM Discovery III MV64460 Product PCI MV64460-001 VESA Unified Memory Architecture
Additional Information Interface: Ethernet KSZ8721CL 3.3V 10/100BASE-TX/FX MII Physical Inc., M9999-041405 StrataFlash Memory (P30) Datasheet Revision: Access M41T00 Clock (ST July SDRAM (SO-DIMM) 32M (256MB) DDR SDRAM SO-DIMM with ECC (SimpleTech, Inc. PCI PCI Specification (PCI Group, Revision PMC IEEE Common Card (CMC) Family: IEEE (IEEE: New NY) PPMC PMC PCI Cards: VITA Revision (VITA: AZ) 3.Frequently, the information found the BCM5461S 10/100/1000BASE-T Ethernet Corporation, 5461S-DS05-R PCI-X to the PCI Specification (PCI Group, Revision July IEEE Physical and Layers PCI Cards: IEEE (IEEE: New NY)
protection and boards when necessary. wear wriststrap to ground touching board. grounded while the board. the its or the board shielding This chapter the physical of the boards, the process, and to once the boards This chapter includes troubleshooting, service, and warranty information. ELECTROSTATIC DISCHARGE the process, please that (ESD) easily the the those with to ESD, which tional ground properly, charges and ESD when the board. To ground yourself, wear grounding wriststrap. the top of static-shielding protectionplace grounded the board or other PMPPC7448 CIRCUIT BOARD The fourteen-layer board that conforms to the IEEE Common Card (CMC) It the following physical Width: Depth: (top Height (I/O I/O Section
Top The following the the board. P1 SW1 R5 U2 C1 C110 RN3 C300 R564 C323 R563 C326 C320 C325 C5 C321 R175 R183 R33 R34 RN4 C18 U4 MV64460 C44 C42 C43 R75 C50 C49 R493 R64 U9 R69 C286 R492 C45 R504 C281 R293 P11 C52 C54 C56 U12 U13 M5 M6 P12 U14 U15 R90 R91 C62 R1 R2 R4 R3 RN1 RN2 U1 MPC7447 CPU R6 R11 R10 R18 R22 R27 R23 R26 C9 C19 R29 C16 C15 R562 R585 R40 R37 R38 R39 R41 U3 SODIMM R43 U5 U6 C23 RN5 RN6 C26 R303 R306 R307 R308 C294 RN7 R47 C27 C30 RN8 U7 C28 C29 C199 L2 RN9 C46 R48 RN10 RN11 C33 C34 C31 C32 RN12 RN13 C35 C295 RN14 RN15 R51 R53 R52 R50 R54 R55 RN16 C37 R57 R58 R56 R61 R63 R62 R65 R59 R60 RN17 R66 R67 R68 RN18 R71 R70 C39 L4 U8 R73 R72 C280 RN19 C47 U10 U11 L5 C48 R76 C51 R78 R79 R80 P13 R82 R87 R81 C57 C61 C55 R85 R86 R89 C59 R84 R83 C58 C60 C53 P14 R485 R487 R491 R489 C63 R486 R484 R488 R490 P2 R8 R7 R13 R12 R20 R19 R505 R25 R24 R507 R32 R31 R510 R511 R30 R36 C17 R508 R42 C22 C24 C25 L3 C36 C38 C40 C41 R482 R483 R472 R473 R291 R88 C253 R471 R470
1000XXXX-XX XXXXXX R494 L6 L7 L8 L9 R515 R513 C14 C29 C299 R506 U16 U39 R138 R509 R512 RN35 RN36 RN37 RN38 RN39 RN31 RN32 RN33 RN34 R141 R186 R149 RN46 RN42 RN43 RN44 RN45 RN47 RN48 RN49 RN50 C112 RN52 RN53 C116 C312 U20 RN55 C315 RN58 R561 C317 RN61 C313 R45 C120 C124 R187 R189 R192 R188 R190 R191 R193 R503 RN63 R309 R44 R205 R304 R46 R204 R221 R310 C298 R217 Y1 C343 R203 U24 C345 R225 R521 R218 C139 C140 C141 C138 R246 R247 R250 R226 R249 C157 RN70 RN71 RN73 RN74 RN76 RN77 RN78 RN72 RN75 R256 R257 R258 C155 C154 RN79 RN80 RN81 RN82 RN83 RN87 RN88 RN89 RN90 R251 R252 C166 R269 R270 R271 RN100 R272 RN101 RN91 RN92 RN93 RN94 RN95 RN96 RN97 RN98 RN99 C167 C168 RN120 RN112 R285 RN111 R284 R286 R287 RN110 C171 R294 R299 C172 R295 R300 C173 R305 R519 CR14 R316 C180 R315 R326 R321 C189 C185 C190 M1 C188 R325 R327 R328 C200 R338 R332 R336 R331 R337 R330 CR15 C215 M2 L13 R343 C284 R476 CR16 R478 R477 U38 C285 R360 R479 M3 C227 C228 L22 C230 R385 R384 M4 C231 C232 R387 CR21 R389 U37 U30 R393 C235 R388 RN177 R401 R405 C245 R402 R403 R404 R406 R413 R399 R411 R412 R410 C252 R418 C251 U33 U34 C257 R424 R429 C255 C256 C263 C267 C268 R438 R439 C275 U36 C279 R578 L21 RN187 RN188 C335C336C337C338 CR22 Y3 R461 CR30 R93 R94 RN20 RN21 CR5 CR4 CR3 CR1 CR2 R92 R98 C65 R95 R96 R97 C64 C67 C69 R101 C66 R105 R99 R100 R106 C68 R103 R107 R108 R110 R454 R102 R104 C70 R109 R112 R113 C310 R111 C71 R116 R117 C72 R114 R115 C76 C80 C78 C81 C79 C77 C75 C74 R118 C322 C73 R525 C90 C84 C87 C82 C88 R119 C89 C85 C86 C83 R120 R121 C97 R514 C95 C94 C92 C96 R520 C93 R125 R129 R468 C98 C99 C100 U42 C103 C101 C102 R124 R524 C123 R528 R529 R532 R530 R531 R128 R127 RN189 C104 P3 PMC-to-PMC R131 R132 R133 R136 R137 C107 RN26 RN27 RN24 RN25 C109 RN30 R147 R148 R144 R142 R143 C111 R145 R146 RN41 C119 R151 R152 R150 C113 R559 R155 R153 R154 U18 PLD C114 U19 R157 R158 R156 RN54 R163 R159 R162 C115 RN57 R165 R167 R164 C314 R166 R170 R168 R169 C117 RN60 RN59 R172 R173 R171 R179 R180 R177 R174 R176 C302 R202 R538 R539 C301 R222 R185 RN62 R541 C118 R543 R206 R547 C308 C128 C121 RN64 RN65 RN66 C127 R546 R545 C303 R219 U40 U41 R552 C309 R544 Y4 C122 R549 R551 C304 R550 C306 C307 C305 R223 R555 C327 C136 C134 C133 R235 R245 C135 C137 R233 R244 R238 R234 R236 R536 R542 R535 R537 C311 R231 R232 C153 C147 C148 C151 RN67 RN68 RN69 C152 C143 C146 C149 C150 R518 C156 R500 RN84 RN85 RN86 C161 C162 R262 C160 C159 R516 R517 R263 R264 R265 R267 R268 R463 C165 R277 R281 C164 R523 R278 R279 R280 R462 R297 RN107 RN108 R282 R283 RN102 RN103 RN104 RN105 RN106 RN109 R501 RN113 RN114 C20 RN116 R298 R522 U26 RN119 RN115 RN123 R314 C179 C176 C178 C177 R313 RN122 RN127 RN124 C174 C21 R320 RN126 C181 R319 C184 C183 C182 R317 R318 RN125 RN134 C191 C195 L12 R323 RN138 C194 C192 C193 RN133 RN137 RN135 U27 C198 RN143 R255 RN146 RN147 R324 RN142 C205 C207 C206 C204 C208 RN145 RN148 RN149 C209 C214 C213 RN144 RN156 C212 RN157 RN158 RN155 RN154 R350 R351 R341 R342 R347 R348 RN153 R346 R345 RN161 C217 R352 C218 R353 R354 R355 RN165 C221 RN160 RN164 R357 R358 R359 R356 C220 L15 L16 L17 C224 C222 C223 RN163 RN166 C225 R363 R362 R365 R364 R367 R368 R369 R378 C226 R371 R464 R370 R373 R366 R372 R374 RN168 RN169 RN170 R382 R381 R380 R383 R466 R467 L18 C170 R475 C236 R495 C234 C233 R480 C282 RN173 RN174 RN172 R391 R392 RN175 RN176 R465 R74 C238 R396 C237 R397 C247 C242 C246 C241 C240 C243 R398 C244 R408 R409 U31 U32 C249 C248 R416 R417 C250 R421 R419 R420 C254 R423 R422 R469 C261 C259 C258 R400 R428 R427 C262 C260 C265 C266 C264 C274 C269 C272 R432 R453 C271 C270 C273 R436 L19 R431 R440 R571 U35 R569 R570 R572 R573 R574 R575 R576 R577 R579 R580 R581 R582 R583 R584 C334 C276 R443 R441 C344 R448 R449 R445 C331 C332 C333 R444 R447 R446 C277 R452 CR23 CR27 R459 R460 R450 R451 CR24 CR25 CR26 CR28 CR29 R455 R457 R458 R456 C318 C324 R565 R566 C319 R534 R567 R568 R122 R123 C91 R533 CR11 C328 CR10 R526 R527 C106 C105 C108 R134 RN28 R140 R139 RN29 RN40 RN51 R161 R160 RN56 R182 C126 C125 R195 R196 R197 R198 R199 R200 R194 R208 R209 R210 R211 R212 R213 R548 R557 C129 C131 R227 R229 R228 R230 C130 R253 R254 C142 C144 C145 C169 RN117 RN118 C158 R261 R259 R260 C163 R276 R275 RN128 R292 RN121 R296 R301 RN131 R274 R273 R311 R288 R289 RN129 C175 R312 RN130 RN136 C187 R322 L11 RN132 C186 RN141 RN139 RN140 R329 R335 C196 C197 R334 R333 C201 C203 R339 R340 C202 RN152 C211 RN150 RN151 C210 R349 C216 RN159 C219 L14 RN162 R361 RN167 R377 R376 R379 R49 RN171 R375 C229 R344 U28 R390 C239 R394 R395 R407 U29 R415 R414 RN178 R425 R426 R474 R481 R430 R290 R433 R434 R435 Y2 C297 R442 C278 R502
P11, P12, P13: These the PCI interface the and the PMC host. Connectors The the following P1: This the to the front PHY Ether- to the assignments. P2: P2 the front to Table the assignments. P3: This PCB-to-PCB the of the P3 memory, CPLD, and CPU from the to the DMC Table the assignments. P14: This conforms to the PCI as Ethernet P14. Table U3: This the the memory (SO-DIMM). The SO- DIMM board the memory and
LED The light-emitting the back of the
where the without front or where the front the interference (EMI) shielding to EMC The single-wide PPMC front with Interference (EMI) The (EMC) that includes front assembly from Emerson.
Power-on: This to the board, including the PCI interfaces. This switch through the front and to the board, including the PCI interfaces. force when the front switch. force the switch. PCI RESET: This to the board, including the PCI interfaces. COP HRESET: This activated the on-chip (COP) interface header located the Card (DMC). It to the board, including the PCI interfaces. COP SRESET: This activated the COP interface and to the MPC7448 and to Flash. COP TRST: This routed directly to the MPC7448 TRST. PMC TRST: This routed directly to the MV64460 TRST. Software controlled: The software the Command The routed to the CPLD, stated otherwise. Chapter the The following the
PMPPC7448 SETUP You the following items to and the of the Emerson Emerson board, such as the Emerson CC1000-DM or Card and supply CRT the board, the and or
the or the from while applied, of to the board. Table Table the board. however supply option Table the boards (typical): MPC7448 and GB DDR SDRAM typically of The with CPU and increased DDR memory and ate heat. the increase the (from the of the to the the C high to C The should the effects of PMC and Considerations with board, that flow to the board Chassis and other factors greatly the flow The as follows: Relative Humidity: to Not to board) (non-condensing) to to (non-condensing) to Flow the to than C specified C C
Location Emerson CC1000-DM the of four (J11, J12, J13, J14 and J21, J22, J23, J24), as the PMC P1386.1. This allows the to PPMC shows the location of these and the location of the the the following to the to PMC1 the screws from the standoffs the PPMC the and the the the
Troubleshooting To the and/or force the the the the P11 and P12 and the mated. four screws (Emerson the from the of the and the screws to the P11 through P14 Next, and the screws to the front TROUBLESHOOTING of difficulty, this
Troubleshooting the seated firmly the PPMC and that the PPMC seated the the the DMC the overheating. the and to they supply DC If to or below Technical If with the or to If access, Emerson further the following information when and and of the operating This information the Emerson or another whether board options such as higher or memory or (US) (UK)
Troubleshooting and Product ID Product If to the board to Emerson Network service, the or to to Authori- (RMA) to which items and the board purchase and information of warranty. and Services If the board, to such as the which originally shipped. to:
Troubleshooting Please the RMA the of the efficiently. service without RMA Emerson Network Computing and Services WI RMA
Processing Unit Table CPU This chapter of the the It includes informa- tion the CPU, and cache memory. The the MPC7448 RISC information reference the MPC7450 RISC Family The following of the features the MPC7448 CPU. MPC7448 Features: Instruction to three instructions dispatched, four instructions fetched, instructions the and instructions of CPU to with of with of complete/write back L1 instruction, L2 eight-way instruction and cache, ECC Units Branch (BPU), four (IU), floating-point (FPU), four (VPU, VIU1, VIU2, VFPU), three-stage (LSU), three (FIQ, VIQ, GIQ), buffers, and Memory or physical Units or lower, Switching and divide-by-four Section
Processing Unit: MPC7448 CPU PROCESSOR RESET the the and the board. It activates the RESET_OUT* of the P12 the of ance or the optional on-board switch activated. COP SRESET to the the Command PROCESSOR INITIALIZATION Initially, the with the CPU The of the (HID0) and the State (MSR) Table (Hex): Notes: HID0 and off) 8000,C000 (icache and MSR 0000,B032 State
Processing Unit: MPC7448 HID0 BHT TBE STE HBE NAP SLP DPM XAE NHR CLR ILO DLO XBS LRST FOL NOP NOP ICE DCE ICFI DCFI SPD SGE BTIC BHT CK CK EN DST TI BHTCLR: Clear Branch History Table The MPC7448 clears this this BHT The (HID0) features. of these cleared of the Please to the MPC7450 RISC Family of the The following HID0 the MPC7448 CPU: TBE: Enablethis and the TBEN asserted to the and STE: Software Table Search TLB of the three TLB that software search the the PTE. search Software search HBE: High Additional and Additional and NAP: SLP: DPM: Functional
Processing Unit: ICE/DCE: Instruction and Instruction and caches neither Instruction and caches I/DLOCK: Instruction and Normal operation the of the instruction and caches locked ICFI/DCFI: Instruction and Instruction and caches operation issued that the of each instruction and cache as XAE: Disabled; the MSB of the physical cleared, physical Enabled; the effective translated to physical NHR: Not (software only) occurred software previously this occurred SPD: and Access to nonguarded from both caches to nonguarded from both caches XBSEN: BAT and clears to IBAT[XBL] and DBAT[XBL] IBAT[XBL] and DBAT[XBL] SGE: Gathering BTIC: Branch Instruction BTIC and acts as BTIC and LRSTK: prediction Allows and bclrl instructions to the branch using the FOLD: Branch Folding Disabled
Processing Unit: NOPDST: the and instructions Instructions Instructions and previously streams MPC7448 HID1 EMC BCL ECL DFS DFS EBA EBD PAR PC5 PC0 SYN PC1 PC2 PC3 PC4 ABE CBE BCLK/ECLK: the CLK_OUT and clock type selection: BHT: Branch History Table Allows of prediction BHT NOPTI: the instructions Instructions Instructions One of the of the (HID1) to the of the PLL_CFG[0:5] The following HID1 the MPC7448 CPU: EMCP: (MCP*) to or EBA: checking Allows to or EBD: checking to or HRESET*: HID1[ECLK]: HID1[BCLK]: CLK_OUT: Asserted High Negated
Processing Unit: SYNCBE: Broadcast Asynchronous: other These and of HRESET*: HID1[ECLK]: HID1[BCLK]: CLK_OUT: Negated Negated Core Negated PAR: ARTRY*, SHD0*, and SHD1* high when high when DFS4: Switching divide-by-four DFS2: Switching divide-by-two Disabled PC5: PLL (PLL CFG[5]), only PC0: PLL (PLL CFG[0]), only PC1: PLL (PLL CFG[1]), PC2: PLL (PLL CFG[2]), PC3: PLL (PLL CFG[3]), only PC4: PLL (PLL CFG[4]), ABE: Broadcast broadcasting cache and TLB operations broadcasting cache and TLB operations EXCEPTION HANDLING Each CPU type to the The normally the first of RAM (with of or ROM (with of F800,0000 to to or or Table the with the highest the following four
Processing Unit: Instruction Synchronous Instruction Dispatch/Execution: Post-Instruction MPC7448 higher higher Priority: Notes: assertion of HRESET* and TRST* Assertion of SRESET* Assertion of SMI* Assertion of INT* Performance performance through Instruction Fetch Instruction to or (ISI) (T=1) Instruction Translation (ITLB) ISI to effective that translated, instruction from guarded memory, or protection Instruction Dispatch/Execution Instruction Highest priorityany instruction (IABR) breakpoint Trap or instruction (SC) of instruction Floating-Point floating-point (FPA) (PI) to floating-point (DSI) to or to or to ITLB with HID0[STEN]=1
Processing Unit: Processing Notes: Priority: (DSI) to ecowx with EAR(E)=0 (DSISR[11]) (DSI) to (DSI) to protection (DSISR[4]) or to BAT (DSI) to cache operations to SR[T]=1 (DSISR[5]) or T=0->T=1 crossing TLB to DTLB with HID0[STEN]=1 TLB to DTLB with HID0[STEN]=1 (DSI) to TLB protection (DSISR[4]), to entry, or search (DSISR[1]) TLB to HID0[STEN]=1 and the PTE (C=0) (DSI) to DABR match (DSISR[9]) as input or the floating-point (VFPU) while (VSCR[NJ]=0) Post-Instruction Trace Lowest prioritydue to MSR[SE]=1 (or MSR[BE]=1 branches) EXCEPTION PROCESSING the Save/Restore (SRR0) where instruction should when the to the process. (SRR1) to and to those when instruction executed. the MPC7448 SRR0 and SRR1 to the of the State (MSR) the and to where instruction the State The State (MSR) the of the MPC7448 CPU. On of the of the MSR cleared. Please to the MPC7450 RISC of the
Processing Unit: Processing CPU State (MSR) PO VEC ILE PM EE PR FP ME FE0 SE BE FE1 IP IR DR RI LE FE0/FE1: These the Floating-Point VEC: instructions instructions POW: this the or These selected the HID0 This operation (reduced ILE: Little-Endian modewhen ILE MSR[LE] to the the established the EE: enablethis allows the to or and or PR: and instructions instructions FP: Floating-Point availablethis floating-point instructions (loads, stores, floating-point instructions ME: FE0: FE1: FP nonrecoverable
Processing Unit: Memory FP FE0: FE1: recoverable SE: Trace instructions normally BE: Branch Trace instructions normally Branch type IP: the the of RAM the the of ROM (FFF0,0000 IR/DR: Instruction and translation translation PMM: the Performance RI: Recoverable and checkthis recoverable recoverable LE: CACHE MEMORY L1 The MPC7448 (L1) instruction and caches that eight-way, set-associative. The L1 four-state fied/exclusive/shared/invalid (MESI) cache coherency The caches least-recently-used (PLRU) algorithms within each
Processing Unit: Memory L2 (L2CR) L2D L2E L2PE L2I L2IO L2 L2 LVR LVRAMM REP HWF AME L2 The L2 cache eight-way instruction and cache with ECC The L2 to clock to the L1 caches. The L2 (L2CR) and operates the L2 cache. The L2CR read/write and cleared L2E: L2 and the operation of the L2 cache, with the Operation L2PE: L2 Parity Checking L2 L2 L2I: L2 this the L2 cache clearing the L2 Not L2IO: L2 Instruction-Only this operation, instruction to the L2 cache. L2DO: L2 this operation, to the L2 cache. Operation Operation L2REP: L2 counter algorithm
Processing Unit: Memory L2HWF: L2 LVRAME: LVRAM LVRAM LVRAM LVRAMM: LVRAM (read-only) LVRAM The L2 cleared following or the L2 cache, the L2CR and the L2 dated. the L2 cache the following the assertion of HRESET* and (DPM). L2 cache clearing L2CR[L2E]. L2 the L2 cache operation the L2CR[L2E] to
On-Card Memory Table Memory Table Memory The includes the following memory to of memory Synchronous DRAM (SDRAM) to of memory BOOT MEMORY CONFIGURATION The the on-board which the physical E800,0000 Selecting JP2 the optional Card (DMC) allows the ROM as the DMC (JP1) Read of F820,A000 the selection. Function: JP2 Selects JP2 JP2 JP2 DMC ROM The MV64460 the ROM. The allows boards of to with that than that the of the of USER FLASH This of memory. The StrataFlash (each allowing as as of location E800,0000 One the of the The following shows the options. Path Memory Width: of (Megabytes): The interface to the of the the the as D[0:63], where D0 the and D63 the least path, the interface to D[0:31]. path, the D[0:15]. Section
On-Card Memory On-Card SDRAM PLCC specifically that the PLCC If booting from Flash, the MV64460 initially of memory FF80,0000 the top of the the PLCC appears F800,0000 (and FF80,0000 when the the the ROM to the and that the from or through the PCI interface. ON-CARD SDRAM The and of SDRAM. This interface to the of (ECC). small-outline, memory (SO-DIMM) to reduce and routing EEPROM the the (SPD). SDRAM physical from to 7FFF,FFFF The SDRAM the MV64460 DRAM which memory and and write protection. to the SDRAM the MV64460 tional DRAM-related and the following performance Supports SDRAM to the SDRAM and to to Supports (ECC) and (RMW) the of writes than to DRAM. ECC correction and NVRAM ALLOCATION The SROM attached to the MV64460 information such as board, and operating as as information to Emerson-specific the of the The of the tion. the of within the SROM.
On-Card Memory NVRAM NVRAM Memory (bytes): software (POST)
MV64460 The MV64460 integrated with PCI interface and high performance applications. The MV64460 architecture: interface to the CPU interface to DDR SDRAM interface to PCI/PCI-X interfaces, PCI0 the These interfaces connected through or routing which of the CPU PCI and to memory. The to The MV64460 includes the following: Three Ethernet (MPSC) (SDMA) (BRG) C interface information the MV64460 this Please to the Section
CPU Interface the CPU once. the CPU interface to of (OOO) the to OOO CPU INTERFACE CPU interface features and Symmetrical (SMP) both and MPX to four the CPU CPU to the PCI access, write, and protection to to CPU Interface The the MV64460 that these to the the the The CPU of the CPU affects the MV64460 CPU This activates with to the CPU interface performance, this following these the CPU This that previous the CPU interface flushed. the to its of the the read. MEMORY INTERFACE DDR SDRAM The DDR SDRAM to four DRAM It (M_DA[13:0] and M_BA[1:0]) and (M_DQ[63:0] and M_CB7[7:0]). The DRAM DDR DRAM and Other ECC) SDRAM interface
Interface to clock to to DRAM Supports both physical (M_CS[3:0]) and (M_BA[1:0]) interleaving The MV64460 of SDRAM to the SRAM The MV64460 integrated SRAM of ory. The SRAM cleared the to ECC. ECC based ECC of ECC includes: correction, of write and counters Force ECC DEVICE CONTROLLER INTERFACE The to of memory to of with of Other features Dedicated from the SDRAM to selects, each with as high to Supports of memory
(IDMA) Each its own and to or The interface consists of of write and of INTERNAL (IDMA) CONTROLLER Each of the four DMA and such as the SDRAM, PCI_0, or CPU These performance amounts of without CPU intervention. and write and concurrently. Timer/Counter of the four timer/counters selected to as or counter. timer/counter with every TCLK counter the counter counts to count, and the counts count, to the and to count. Reads from the counter or completed directly from the counter, and writes to the timer/counter PCI INTERFACE The Emerson with the PCI (PMC) factor (PCI) and the PCI Cards (PPMC). The MV64460 PCI interfaces, to the PCI PCI0 functional the Other memory, I/O, and the PCI interfaces the PCI interfaces PCI to PCI or to PCI-X both PCI interfaces they asynchronous clocks to each other and to the MV64460 clock PCI and operations
PCI Interface PCI and ID PCI The PCI header as the PCI tion. The MV64460 and the header The PCI interface the header and this from the CPU or PCI PCI and ID Assignment The assigned the following PCI ID: ID: Reported the PCI The the PCI ID to the located the CPLDs PCI Read/Write The MV64460 becomes PCI when the CPU, IDMA, Ethernet or MPSC initiate to PCI PCI allows DMA PCI and memory. PCI-X to four and write combining. It PCI commands including (DAC). The MV64460 acts as when PCI initiates memory (or I/O the of internal or P2P It to memory and write including DAC, and to and I/O the of internal Its internal allow burst reads and writes, and to four reads PCI and to four PCI-X The PCI0 illustrated Monarch and non-Monarch typical the PCI and another the the the host, the PCI memory
PCI Interface PCI0 Monarch PCI0 Non-Monarch
PCI ACK64*: ACKNOWLEDGE TRANSFER This three-state the willing to AD[31:00]: ADDRESS and DATA These three-state both and consists of phase or phases. AD[63:32]: ADDRESS and DATA These phase the of otherwise these phase, of when the assertion of REQ64* and ACK64*. C/BE[3:0]*: BUS COMMAND and BYTE ENABLES These three-state the phase of the phase of these the command. phase the as PCI Interface PCI0 and PCI1 the of internal located offsets. CPU to the MV64460 the and PCI0 functional the PCI located their offset the header, as the PCI when from their PCI PCI0 PCI and Command the located The to other PCI or within their PCI The to caused another PCI when of memory, as the MV64460 memory the of the PCI INTA*INTD* routed directly to the memory (MPP). The MV64460 that the and of the PMC as to the PCI BUS CONTROL SIGNALS The following the PCI interface P11, P12, and P13. to the PCI these stated otherwise. high clock The board to the PCI (Revision terminating JTAG
PCI C/BE[7:4]*: BUS COMMAND and BYTE ENABLES the phase, the otherwise these phase the as DEVSEL*: DEVICE SELECT This three-state when the selected as the of the access. EREADY: READY This input Monarch and It that and the PCI ready to enumerated. FRAME*: CYCLE FRAME This three-state the to the of access, and to asserted the reaches its phase. INTA*, INTB*, INTC*, INTD*: M66EN: ENABLE MHZ This to whether the operating or PCI. MONARCH*: MONARCH this grounded, that the PPMC Monarch and PCI and CLK: CLOCK This input to PPMC PCI GNT*: GRANT This three-state that to the to Each its GNT*. IDSEL: INITIALIZATION DEVICE SELECT This input acts as and write PMC INTERRUPTS A, B, C, These the PPMC to the or IRDY*: INITIATOR READY This three-state that the ready to the phase of the PAR: PARITY This AD[31:00] and C/BE[3:0]*. Parity PCI This three-state and clock the phase, and clock the that ready to the phase IRDY* or TRDY* asserted). Once PAR asserted, clock the of the phase. PAR64: PARITY UPPER DWORD This three-state the that protects AD[63:32] and C/BE[7:4]*. PERR*: PARITY ERROR This three-state to PCI
PCI PRESENT*: PRESENT grounded, this input to that PPMC RESET_OUT*: RESET OUTPUT This to or other the PPMC It from the PPMC that becomes input to the the To RST* to RESET_OUT*. REQ64*: REQUEST TRANSFER asserted the this three-state the to REQ*: REQUEST This three-state to the that to the RST*: RESET The assertion of this input PCI and to The this as input to PPMC SERR*: SYSTEMS ERROR This to with catastrophic STOP*: STOP three-state the to that the the TCK: TEST CLOCK This input clocks information and and of the of the TAP. TDI: TEST DATA INPUT This input serially and instructions the TAP operations. TDO: TEST DATA OUTPUT This serially and instructions of the TAP operation. TMS: TEST MODE SELECT This input the of the TAP the TRDY*: TARGET READY three-state that the to the phase of the TRST*: TEST RESET This input asynchronous of the TAP
PMC Connector PCI JTAG Block Table P11/P12 Assignments32-Bit PCI PMC CONNECTOR PINOUTS P11 and P12 Assignments P11 and P12 the PCI the MV64460 JTAG routed from P12. P11 P11 P11 P12 MV_TCK Not connected Not connected MV_TRST* GND MV_TMS INTA* MV_PMC_TDO INTB* MV_PMC_TDI INTC* GND PRESENT*/GND GND Not INTD* Not connected connected Not GND PUP0 Not connected PCI_CLK RST* GND PDN0 GND GNT* PDN1 REQ* Not connected GND V(I/O) AD30 AD31 AD29 AD28 GND AD27 AD26 AD25 AD24 GND GND IDSEL C/BE3* AD23 AD22 AD21 AD20 AD19 AD18 GND V(I/O) AD16 AD17 C/BE2* FRAME* GND GND Not connected GND TRDY* IRDY*
PMC Connector Table P13/P14 Assignments64-Bit PCI P11 P11 P11 P12 DEVSEL* GND STOP* GND_PCIXCAP PERR* Not connected GND Not connected Not SERR* PAR C/BE1* GND GND V(I/O) AD14 AD15 AD13 AD12 M66EN AD11 AD10 AD9 AD8 GND AD7 C/BE0* Not AD6 AD5 Not connected AD4 Not connected GND GND V(I/O) Not connected AD3 EREADY AD2 GND AD1 RESET_OUT* AD0 ACK64* GND GND REQ64* MONARCH* P13 and P14 Assignments P13 and P14 the PCI, SIO, and Ethernet to the backplane. input/output (GPIO) P14these routed directly from the MV64460 P13 P14 P13 P14 Not connected GND GND C/BE7* C/BE6* GND C/BE5* GND C/BE4* GND V(I/O) PAR64 AD63 GND AD62 GND AD61 GND GND AD60 AD59 GND AD58 GND AD57 GND V(I/O) AD56 AD55 GND AD54 GND AD53 Not connected GND Not connected GND Not connected AD52 Not connected AD51 Not connected AD50 Not connected AD49 Not GND Not connected GND Not connected AD48 Not connected
PMC Connector LINK PORT Ethernet MDI SERIAL PORT TRANSMIT DATA to PMC, TTL or EIA-232) SERIAL PORT RECEIVE DATA to PMC, TTL or EIA-232) PMC Connector P14 P13 P14 P13 AD47 Not connected AD46 Not connected AD45 Not connected GND Not connected V(I/O) Not connected AD44 Not connected AD43 Not connected AD42 Not connected AD41 Not connected GND Not connected GND Not connected AD40 Not connected AD39 Not connected AD38 Not connected AD37 GPIO0 GND GPIO1 GND GPIO2 AD36 GPIO3 AD35 GPIO4 AD34 GPIO5 AD33 GPIO6 GND GPIO7 V(I/O) Not connected AD32 Not connected Not connected Not connected Not connected Not connected GND GND connected The following the PCI interface P14. GENERAL PURPOSE INPUT OUTPUT These I/O (TTL) to MV64460 MPP[19, At these as inputs. PMC Connector to the the location of the PMC the board.
Outbound: These the CPU to service the PCI Inbound: These PCI to service from the CPU. DOORBELL REGISTERS The MV64460 the the (MU) to both the PCI and CPU buses. There of Outbound The CPU to the PCI the Outbound (ODR). The the Outbound (OIMR), that the from the ODR. The ODR located PCI_0 offset The CPU or the PCI interface the ODR This allows CPU and PCI interfaces. Inbound The PCI to the CPU the Inbound (IDR). The the Inbound (IIMR), the the from the IDR. The IDR located PCI_0 offset The from the PCI to the CPU or to the PCI interface, the software of the MONARCH FUNCTIONALITY The to function as Monarch or as the VITA PPMC Monarch the PPMC the PCI It that and often the the of location F820,C000 the (0=non-Monarch, 1=Monarch), as the of P12. The software the Monarch to the board, and the unaffected. The location F820,5000 to Monarch functionality. EREADY the EREADY that this initially asserted, then when the ready enumeration. the other PCI this the Monarch the Please the PPMC (reference
PCI: the PCI to the of that the M66EN P12 high PCI that the M66EN grounded, the high only when the PCI of operating Software of the PCI and Command to the If high, the the If PCI the or M66EN then the of the Please the PPMC (reference SYSRST*: SYSRST* the asserted, MV64460 and floated, DRAM and outputs. SYSRST* from the PCI the CPU and to the board the PCI deasserted. PCI0_RST* and PCI1_RST*: These the PCI interface The PCI as as its asserted. On PCI to their as specified the PCI The of PCI SYSRST* and ROM PCI0 functional the the MV64460 other PCI Therefore, RESET_OUT and RST as as asserted or EReady assertion access. MHZ BUS OPERATION WATCHDOG TIMER The count or the the of software the it counter that servicing to its the RESET the the the of to or the optional on-board switch activated. The MV64460 immediately following this to the properly allowing PCI to The MV64460 three
Ethernet Interface The three Ethernet the MV64460, these to Interface (MII) and MII (GMII). The Ethernet and routed through PMC P14. The Ethernet routed to the front Since and routed through the directly to P14, the Rear Transition (RTM) or Ethernet features the MV64460 IEEE MAC function and through the PHY IEEE flow-control operation and back and back Short than bytes) and memory The KSZ8721CL 10/100BASE-TX/FX and BCM5461S 1000BASE- T/100BASE-TX/FX/10BASE-T with IEEE with PICMG than IEEE (JTAG) boundary information the and Broadcom Ethernet this Please to the or the Broadcom MV64460 ETHERNET REGISTERS The MV64460 of three Ethernet These interface with the PHY MII or GMII interface. The Interface (SMI) continuously the PHY their The PHY the the Section
Ethernet Interface: Ethernet Ethernet ETHERNET ADDRESS The Ethernet and The consists of (MAC[47:0]) The that assigned to Emerson Network IEEE. The Emerson of each of products. The Ethernet the referenced as with each representing The assigned to the the following F9 F9 Emersons The three of the Ethernet the the Ethernet memory (NVRAM). The assigned the Ethernet 00:80:F9:81:00:00 to 00:80:F9:83:FF:FF. The shown Table Ethernet MAC: (Hex): LSB of MSB of to Emerson IEEE The of to the following where the assigned to each board. the of the (74B Therefore, the boards Ethernet 00:80:F9:82:07:4B. ETHERNET CONNECTION (P1) The KSZ8721CL PHY routed to the P1 P1 the front Table below. The Ethernet (Emerson C0007666-00) shown (front F9
Ethernet Interface: Ethernet (P1) Ethernet Connector (P1) Table Ethernet Assignments (P1) Ethernet Assembly The to P1 locking the Table Ethernet Assignments Ethernet Ethernet Ethernet ground Connector housing ground USB RJ45 Shell (shield) Shell (G) White/orange (TX+) (TX-) White/blue (RX+) (RX-)
CPLD (RER) InitAct: Active to when the MV64460 InitAct inactive This chapter the implemented the (CPLD). RESET REGISTERS The routed to and distributed the CPLD. To this functionality, the CPLD includes the reason the and the other forces of of (RER) This read-only the of the InitAct SW WD COPS COPH PCIO FP SW: Software to when the caused write to the Command WD: to when caused the of the MV64460 COPS: Soft to when COP header (SRESET) occurred. COPH: to when COP header (HRESET) occurred. R: PCIO: PCI to when PMC PCI (RST* occurred. FP: to when the front switch Command (RCR) The Command forces of of as shown below. initiated writing to then the cleared. Section
CPLD: Command (RCR) (ROER) SCL SDA I2C FR SR HR SCL: C Clock the PLD SDA: C the PLD R: I2C: C the C to known C FR: to SR: Soft command to the CPU and on-board HR: PCI (ROER) The the functionality of the PCI SW WD COPH PCI0 FP R:
CPLD: SW: Software PCI when on-board caused write to the Command WD: WatchDog PCI when on-board caused timeout of the WatchDog COPH: RESET PCI when caused COP HRESET. PCI0: PCI when on-board caused the assertion of PCI0 (PCI RESET). FP: PCI when on-board caused the front INTERRUPT REGISTERS The and routed to the CPLD. These the PCI specification, the of the PCI clock. Since the PCI clock restricted to SERR and PERR from the PPMC with board clock. These should clock or they The following routed to the MV64460 MPP PERR and SERR combined and routed to MPP13. The routed to MPP18. To the routing of the the CPLD the following and
CPLD: (IER) (IPR) (IER) R: SR0EN: PCI0 SERR routed from PCI0 SERR to MV64460 to PR0EN: PCI0 PERR routed from PCI0 PERR to MV64460 Enabled to (IPR) This allows software to which caused R: SERR0: PCI0 SERR SERR occurred and (IER SR1EN=1) SERR PERR0: PCI0 PERR PERR occurred and (IER PR1EN=1) PERR SR0EN PR0EN SERR0 PERR0
CPLD: Product ID (PIR) Product ID (PIR) PRODUCT ID REGISTER (PIR) This read-only the board as PIDR: Product EREADY REGISTER (ERDY) The and of enumeration. Monarch the to that other boards the ready enumeration. non-Monarch the writeable to the ready enumeration. R: Monarch (read) PCI to enumerated. PCI ready to enumerated. Non-Monarch (write) non-Monarch) PMC ready to enumerated. PMC ready to enumerated. REVISION REGISTERS read-only to track and PLD revisions. PLD tracking that with each CPLD release. PIDR
CPLD: (HVR) PLD (PVR) (BCR3) (HVR) HVR: This the PLD and with every PCB PLD (PVR) PVR: PLD This the PLD and with every change. BOARD CONFIGURATION REGISTERS Three read-only location F820,9000 These allow the software to easily including Monarch/non-Monarch, DMC and clock Mon: PMC Monarch PPMC Monarch PPMC non-Monarch HVR PVR Mon DMC
CPLD: (BCR1) 0xf820,a000 DMC: from Card ROM or PPMC from DMC PLCC ROM from PPMC (BCR0) SysCLK: Clock DMC: Card option DMC DMC DMC R: R:
Routing: The routed to and or connected. These the Routing (MRR). The EIA-232 These and Software selects the and these memory. routed to the Card (DMC) as options include to the front or the P14 routed to P14, there the option of EIA-232 or TTL routed to P14 with the The MV64460 the the information the MV64460, reference the MULTI-PROTOCOL SERIAL CONTROLLERS (MPSC) The MV64460 with each HDLC, BISYNC, UART, or Each MPSC MPSC and The that MPSC and Each consists of and (high). SERIAL DMA (SDMA) CHANNELS of the SDMA the and memory the MV64460. consists of DMA and The SDMA of and to reduce CPU overhead. PROGRAMMABLE BAUD RATE The MV64460 (BRG); each with clock inputs: SCLK, TSCLK, and BRG the Count (CDV) from the BRG its count counter. the counter (reaches the BRG clock (BCLK) and the counter reloads. The EIA-232C of typical 50-foot Higher rates specifically the length, and Section
I2C Interface C Connector (P2) the clock to the clock the high-to-low Once the found, the the counting the Low-to-High Then the of the BRG the Count (CUV) and ated the CPU that the Finally, the CPU reads the from the CUV and the CDV to the C INTERFACE The MV64460 C interface acting as both read/write and as to read/write The C consists of clock (SCL) and (SDA). to this as the Two-Wire Interface (TWSI). C ROM connected to the C interface, and abled Emerson the Table C (reference C (U33) NVRAM C (U34) RTC (U36) SO-DIMM I2C (U3) I/O CONNECTION EIA-232 I/O P2 USB the front below. The assign- Table
I/O Table Assignments (P2) Assembly (Emerson C0007662-00) The to P2 locking the Table Assignments Not connected EIA-232 Not connected EIA-232 Ground Connector housing ground and switched as factory option. DB9 Shell (shield) Shell White Black ground) 2.The USB used.
Clock the the of reapplied within hours, RAM M41T00 Clock The clock (RTC) the M41T00 from STMicroelectronics. This integrated year-2000-compatible RTC, and of RAM the function. The M41T00 from the operation. BLOCK DIAGRAM OPERATION The M41T00 clock operates as the To access, the RTC the Access the the following Section
Clock: Clock Table RTC Seconds Century/Hours Month Years The M41T00 clock the of If below switch-over the M41T00: Terminates the counter from written) At the M41T00 and inputs. CLOCK OPERATION the Clock or Access the Con- location to the Clock to allow the to completed the This the clock The clock the clock and reads the and from the clock, as Table Address: Function/Range: D7 D6 D5 D4 D3 D2 D1 D0 BCD Format ST Seconds Seconds Seconds CEB CB Hours Hours Century/ Month Month Years Years Years OUT FT
Clock: Clock The or counts from the the The of (subtracted, ative or this five-bit counts the clock, and subtracting counts the clock ST: Stop the the within CEB: Century CB to from to or from to the of the century 0=CB CB: Century of the of the month OUT: 0=FT/OUT when FT FT: the FT/OUT 0=The FT/OUT S: 0=Negative X: Dont
Card DMC Mechanical Specifications The Card (DMC) optional mounted the back of the board to This chapter the physical of the DMC, the process, and to once the The DMC and software software (connected to the MV64460 MPP EIA-232 with to DB-9 JTAG/COP header software JTAG header CPLD PLCC ROM software software-readable DMC CIRCUIT BOARD The DMC four-layer board. It the following physical Width: Depth: Height (top Height Section
Card: DMC DMC Top and (Revision the DMC should the following information: The board 667C- The appears located the of the board. The (ID): This ID located the or user ROM including and
Card: Connectors DMC P1 PCB-to-PCB Connector Table DMC P1 Connector Assignments It useful to these when Technical or and Services Emerson Network CONNECTORS The DMC the following P1: This PCB-to-PCB the of the DMC memory, CPLD, and CPU from the to the DMC Table the assignments. P2: This the EIA-232 interface. Table the assignments. P3: The COP/JTAG interface header allows software to the MPC7448. to Table the assignments. P4: The CPLD JTAG header to the CPLD interface. to Table the assignments. P5-P6: The DMC Ethernet RJ-45 the P1 Connector Assignments CPLD_TCK GND Not connected Not DMC_CS* DMC_OE* WE0* LA17 LA16 LA15 LA14 LA13 LA12 LA11 LA10 LA9 LA8
Card: Connectors CPLD_TCK: PLD Clock input to DMC and of the PLD JTAG interface. DMC_CS*: Chip Select DMC input to DMC. LA7 LA6 LA5 LA4 LA3 LA2 BADDR2 BADDR1 BADDR0 AD7 AD6 AD5 AD4 AD3 AD2 AD1 AD0 FILT_TX FILT_RX GND CPU_VIO (DMC JTAG) MPC7448_TCK GND Not connected Not connected Not connected connected Not connected Not connected Not DMC_JP1 DMC_BOOT_SRC DMC_JP3 DMC_JP4 LED1* LED2* LED3* LED4* MPC7448_TDO MPC7448_TDI DEBUG_TRST* MPC7448_TMS DEBUG_SRESET* DEBUG_HRESET* MPC7448_CKSTP connected _OUT connected connected Not connected Not connected Not connected CPLD_TDI CPLD_TMS CPLD_TDO GND/DMC_PD Not connected Not connected GND Not connected grounded, this the that DMC attachedpresence (PD). V: the supply to the DMC
Card: Connectors DMC_OE*: DMC input to DMC. LA(17:2): Latched DMC input to DMC. BADDR(2:0): DMC input to DMC. AD(7:0): DMC from DMC. FILT_TX: IO input to DMC. FILT_RX: IO from DMC. CPU_VIO: IO CPU as reference/power the header MPC7448_TCK: CPU Clock from DMC and of CPU JTAG interface. DMC_BOOT_SRC: from DMC and to the whether to from the DMC or the DMC_JP(4:3,1): from DMC and these three DMC LED(4:1)*: These DMC input to DMC and MPC7448_TDO: CPU input to DMC and of CPU JTAG interface. MPC7448_TDI: CPU from DMC and of CPU JTAG interface. DEBUG_TRST*: CPU from DMC and of CPU JTAG interface. MPC7448_TMS: CPU Select from DMC and of CPU JTAG interface. DEBUG_SRESET*: Common On-Chip Soft of DMC and the header to DEBUG_HRESET*: Common On-Chip of DMC and the header to MPC7448_CKSTP_OUT: Stop input to DMC the header. CPLD_TDI: PLD of the PLD JTAG interface CPLD_TMS: PLD Select from DMC and of PLD JTAG interface. CPLD_TDO: PLD input to DMC and of PLD JTAG interface. DMC_PD*: DMC from DMC and to the PPMC that the DMC WE0*: DMC input to DMC.
Card: Connectors DMC P2 Connector DMC P2 Assignments P2 EIA-232 Interface the Emerson C0007662-00, to P2. assignments Table Not connected DMC_RXD DMC_TXD Not connected GND Connector housing ground
Card: to DMC JTAG to DMC JTAG Block DMC P3 JTAG/COP PMPPC7448 TO DMC JTAG P3 JTAG/COP The JTAG/COP interface boundary-scan testing of the CPU and the This interface with the IEEE
Card: to DMC JTAG Table DMC P3 Assignments MPC7448 CKSTP_OUT*: Checkstop Outputwhen asserted, this that the CPU and ceased operation. DEBUG_HRESET*: Resetthis input that initiated the DEBUG_SRESET*: Soft Resetthis input that the MPC7448 initiate MPC7448_TCK: Clock latched the of this MPC7448_TDI: Inputthis acts as the input instructions and MPC7448_TDO: Outputthis acts as the instructions and MPC7448_TMS: Selectthis input the (TAP) DEBUG_TRST*: Resetthis input the DMC P4 JTAG Chain MPC7448_TDO Not connected MPC7448_TDI DEBUG_TRST* Not connected JTAG_PWR V) MPC7448_TCK Not MPC7448_TMS Not connected DEBUG_SRESET* GND DEBUG_HRESET* MPC7448CKSTP_OUT* GND P4 JTAG Chain This header allows to the CPLD interface.
Card: DMC (JP1) DMC P4 Assignments CPLD_TCK: Clock Inputthis the clock input to the boundary (BST) operations the while others the CPLD_TDI: Inputthis the input instructions as as and shifted the of TCK. CPLD_TDO: Outputthis the instructions as as and shifted the of TCK. CPLD_TMS: Selectthis input the to the of the TAP within the the of TCK. Therefore, TMS the of TCK. TMS the of TCK. DMC JP1 Assignments CPLD_TCK GND CPLD_TDO CPLD_TMS Not connected Not connected Not connected CPLD_TDI GND DMC JUMPERS (JP1) There of the DMC. and the location the DMC. JP1: The Ethernet and the JP2: JP2 and selects the ROM as the the to the DMC seated the and the
Card: DMC DMC LED JP3: This JP4: JP4 the MV64460 ROM If JP4 the MV64460 to from the ROM. These read-only software location F820,6000 to the DMC (JP1) JP4 JP3 JP2 JP1 JP4: DMC (MV64460 ROM (MV64460 from ROM) Not (MV64460 from ROM) JP3: DMC Not JP2: DMC (BOOT): from DMC ROM Not from JP1: DMC (ENET) the DEBUG/STATUS LEDS The DMC four light-emitting software LED locations. These through the DMC LED LED4 LED3 LED2 LED1 LED4: Asserting this lights the DMC CR4. LED3: Asserting this lights the DMC CR3. LED2: Asserting this lights the DMC CR2. LED1: Asserting this lights the DMC CR1.
Card: DMC the board or the from while applied, of to the board. DMC SETUP You the following items to and the of the Emerson DMC. PPMC board, such as the Emerson Card and CRT the board, the and or the DMC Card the following to the DMC to the DMC location): the protective from the screws. the screws with the threaded the from the of the the (P1) together and the mounting screws through the standoffs the DMC to the
Card: DMC DMC
Card: Troubleshooting TROUBLESHOOTING of difficulty, this the seated the and that the seated the the If booting from EEPROM (U2), the properly oriented the the overheating. supply DC If to or below Technical If with DMC, the or to If access, please Emerson further Please the following information the DMC and (ID) the and ID the and of the operating Product If to the to Emerson Network service, and and Services (or to to merchandise authorization (RMA) to which items and the purchase and information DMC of warranty. and Services warranty If the board, to it such as the which originally shipped. to: or (US) (UK)
Card: Troubleshooting Please the RMA the of the efficiently. service without RMA Emerson Network and Services WI RMA
Auto-Repeat: command, the ENTER or RETURN TFTP You the TFTP to Ethernet the memory. Auto-Boot: You commands the to You write the U-Boot One the of the The based the Universal (U-Boot) the GNU (GPL). instructions to the this GPL please to or Emerson This chapter the features, operation, and This chapter as reference the commands and tions. COMMAND-LINE FEATURES The command-line interface with the following features: At or the and reports the the the the the board to the and the If the that the tor to the from the specified If the autoboot or the command-line Section
BASIC OPERATION The or This section the operation of the board. The the and text Power-up/Reset The follows the auto-booting the operating or software. At or the procedures, free memory and necessary, the that the U-Boot the to timeout while EREADY. to the the four-bit LED1 through LED4 to the the of the LED and the to the LED the
Power-up/Reset Flowchart RESET HID0 MSR the of the MV64460 internal floating the L2 cache BAT and the L1 cache and the MV64460 CPU interface the MV64460 selects flash and CPLD LED the U-Boot PCI LED Monarch MV64460 CPU and information LED I2C SDRAM. Clear clearmem and LED and icache L2 cache U-Boot to RAM LED PCI LED Ethernet Turn off
Recovery and Table POST writes to these of the POST The (POST) as C NVRAM the offset the of therefore this field the of to tests. assigns the to SDRAM C EREADY through SDRAM U-Boot its and the top of SDRAM. The with the amount of memory. U-Boot the from to SDRAM the MPC7448 and U-Boot internal MONITOR RECOVERY AND UPDATES This section to recover and/or the or of the following If there the and recovering (Recovering the If the operating properly, then to the If Ethernet the to the the MAC from the Recovering the that ROM the PLCC of the DMC and the DMC the Then, JP2, and the DMC. Passed the
Monitor: Recovery and the following command, where the boards the PM/PPC-7448 If the recovers, to If to the the following Unprotect the Flash: PM/PPC-7448 off the of Flash: PM/PPC-7448 the Flash: PM/PPC-7448 the to force PM/PPC-7448 to the board. the the boards PM/PPC-7448 If the following instruction: the to force PM/PPC-7448 the board and the from JP2, and the TFTP To the the following commands and the the If necessary, PM/PPC-7448 PM/PPC-7448 PM/PPC-7448 PM/PPC-7448 Optionally, PM/PPC-7448 TFTP the to memory location PM/PPC-7448 tftpboot path_to_file_on_tftp_server the
Recovery and PM/PPC-7448 If the to ROM and follow the recovery the Restoring the the To the from the flash, the to the RAM, to the flash, and finally to the (EEPROM) PCI interface. The then and DMC. Follow the instructions below to the from the to the the This shows to the however copying the This that the the already memory The of the 1.6MB <2MB. the of the four PMC the terminals with the first the and the the the and to the showpci the command showpci PCI1: Scanning PCI PCI information that the offset of the RAM Copy the from the memory the RAM where the it From the PM/PPC-7448 From the
Monitor: Recovery and The to the flash. from the the to the the following The from the to the flash. The and DMC. off From the the to the that the correct. the memory to the write_enable_socket the of the flash. There that the flash to the memory. the with WE. This the to write to the writable memory Treat the flash and the rewrite: off The sector. To the the following commands and the the PM/PPC-7448 If the to force the PM/PPC-7448 Optionally, PM/PPC-7448
Accessing the Ethernet ACCESSING THE CONSOLE OVER ETHERNET To interact with the the built the and This and UDP to and from the the following commands, the the If necessary, PM/PPC-7448 PM/PPC-7448 PM/PPC-7448 PM/PPC-7448 PM/PPC-7448 the the and the UDP which to PM/PPC-7448 Optionally, PM/PPC-7448 the the host, and finally PM/PPC-7448 of input and streams redirected input or redirected ceases to the streams redirected back to from within PM/PPC-7448 These and back to To the commands the bootcmd or To to the autoboot to PM/PPC-7448 Optionally, PM/PPC-7448 MONITOR COMMAND REFERENCE This section the and typographic the commands. sections this chapter commands, which the following memory, Flash, and other commands.
Commands DEFINITION: Command The the following <Command> The three and with the of which below. commands that base. commands commands character that with There white and command. command, while commands the first characters that the command. type instead of commands when You type and the command Command Access the each command The to the Typographic the following New to the command optional and type that own selection the BOOT COMMANDS The commands booting and operating from the the bootcmd
Commands DEFINITION: DEFINITION: DEFINITION: [loadAddress] [bootfilename] DEFINITION: bootup. DEFINITION: The from ELF memory, where the of the ELF The memory, to the booting the of If specified, the as the The the BootP/TFTP If or bootfilename specified, the and bootfile as the The the the Flash) and If the the secondary Flash) and If neither the command back to the to and NVRAM. <primary|secondary> write NVRAM based already Flash. <primary|secondary> of Flash. <primary|secondary> The command VxWorks from ELF where the of the VxWorks ELF
Memory Commands DEFINITION: [bootfilename] DEFINITION: rarpboot [loadAddress] [bootfilename] DEFINITION: tftpboot [loadAddress] [bootfilename] DEFINITION: The bytes. DEFINITION: The DEFINITION: The The (DHCP) to IP and DHCP and from rarpboot The rarpboot using the RARP/TFTP If or bootfilename specified, the and bootfile as the tftpboot The tftpboot using the TFTP The and as to this command. If or bootfilename specified, the and bootfile as the The the If selected the TFTP through each found or MEMORY COMMANDS The memory commands allow to of memory. memory commands, the the following These optional and the which the ates. If specify memory commands to The command count and the
Memory Commands DEFINITION: count DEFINITION: count EXAMPLE: this the to from to DEFINITION: EXAMPLE: this the command to search the the and DEFINITION: of EXAMPLE: this the to thirty-two the physical The count located the to the If the located the of the the with count from the The the to copying the The manually the to the command. The searches from to top_add the to properly, the of match the of the The option searches the of the specified find.1 Searching from to Match found: The displays the of memory The of displayed optional third of The memorys and its ASCII displayed.
Memory Commands DEFINITION: EXAMPLE: this the to write the DEFINITION: DEFINITION: [count] EXAMPLE: this the to write the three the physical The memory Once started, the command the ENTER the to the location. Pressing ENTER without the that unchanged. To the mand, (such as ENTER. .#4E The repeatedly. Once started, the the selected ENTER the memory and then the displayed. The then to written the Pressing ENTER with- the unchanged. To the command, (such as ENTER. The writes to memory The of optional fourth count
Commands DEFINITION: of the sectors the from to DEFINITION: information memory FLASH COMMANDS The commands the StrataFlash the board. There the board. The following commands the as To the sectors within each the sector and than the of sectors the with sectors, the following commands the sectors as through The to the the to The the specified of memory. of the sectors SF (first sector) to SL sector) N. N:SF[-SL] of the sectors N. of the sectors of the The the of sectors, and of each sector. information the memory N.
EEPROM/I2C Commands DEFINITION: Protect of the sectors the from to DEFINITION: Read/write from EEPROM offset off The or the sector protection the specified sector. Protection implemented using software only. The protection the physical used. Protect of the sectors SF (first sector) to SL sector) N. N:SF[-SL] Protect of the sectors N. Protect of the sectors of the protection of the sectors the from to off protection of the sectors SF (first sector) to SL sector) N. off N:SF[-SL] protection of the sectors N. off protection of the sectors of the off EEPROM/I C COMMANDS This section commands that allow to and write memory the and C The reads and writes from the EEPROM. reads from offset EEPROM (right-shifted and memory
EEPROM/I2C Commands DEFINITION: count DEFINITION: of DEFINITION: of DEFINITION: DEFINITION: [count] DEFINITION: inm DEFINITION: off write off The CRC32 The reads the specified The displays C memory. displays from offset of C (right-shifted The the of the offset the length, bytes, of the offset information to the The offset The RTC one-byte offset length. The offset The C memory and the The writes memory. inm The inm command C memory, reads and the The command to C
Commands DEFINITION: the of DEFINITION: DEFINITION: the to or the and to the ENVIRONMENT PARAMETER COMMANDS The on-board, memory the of as ASCII with the following and the The commands with the reading and writing of these to of The displays of the and their to the the of match) The command writes the to memory. The the of existing and the from the TEST COMMANDS The commands this section and memory tests.
Other Commands DEFINITION: DEFINITION: DEFINITION: DEFINITION: DEFINITION: the offset the memory commands. DEFINITION: The the (POST). The SDRAM read/write The memory The indefinitely the pressed. The its testing acknowledging the to OTHER COMMANDS This section the commands the The from memory. header The or the offset memory commands. the offset the memory commands to off off The displays the Information The displays the information
Other Commands DEFINITION: DEFINITION: count DEFINITION: the and DEFINITION: DEFINITION: DEFINITION: DEFINITION: The CRC32 count The or the and and the clock (RTC) [MMDDhhmm[[CC]YY][.ss]] the and the RTC The to The the PCI the the Monarch board. The the of the currently tor Specifying the optional or the the The the optional to the
Other Commands DEFINITION: [command DEFINITION: DEFINITION: DEFINITION: number_of_objects DEFINITION: DEFINITION: and NVRAM and the from the to Flash. The (or displays the Without commands with each. To information command, the as The displays the header information that memory of the header, and The displays the SDRAM information from to The The command displays the boards memory The the NVRAM and and writes the to Flash. and NVRAM the tor Flash. and NVRAM and the from Flash.
Other Commands DEFINITION: or of PCI the specified DEFINITION: DEFINITION: DEFINITION: The the PCI the the Monarch board. It enumeration information about each The allows to and the PCI the header of PCI bus.device.function header the PCI (CFG). of read, and the CFG next[.b, the CFG to the CFG write[.b, The command Ethernet to the reached. The the If selected the TFTP through each found or The of the CPU writing to the the board. The the commands
DEFINITION: DEFINITION: DEFINITION: showpci DEFINITION: seconds (N DEFINITION: Table The of commands of memory. The ASCII of commands the character and terminated with the the location of the to characters. The displays the MAC showpci The showpci the PCI and the of the The of seconds. The displays the ENVIRONMENT VARIABLES the rates: bootcmd Command to when auto-booting or the command. Choose the of seconds the counts booting options: seconds, to
bootfile Path to with this to the path/file.bin to and location of the to bootretry Choose the of seconds the counts booting with If the bootretry seconds. The allowed the seconds. options: seconds, to bootretry write the L1 and L2 cache to write-through or back. write, clearmem Select whether to clear SDRAM (memory excluded) and off Select the backplane L1 cache. options: off ECC of memory cleared ECC options: off Select the reporting of ECC to the of or reported) options: off ecc_1bit_thresh the threshold the of ECC to the when to off. PCI enumeration. off PCI EREADY This only to when the board Monarch. options: off eth_frontpanel Select and the front Ethernet options: 10t_half, 100t_half, Select which Ethernet TFTP. options: A), B) Select and Ethernet options: 10t_half, 100t_half,
Table Optional eth_portb Select and Ethernet 10t_half, 100t_half, Select the IP L1 instruction cache. off IP the L2 or off. off the to with TFTP). PM/PPC- IP and (optionally) Format: [IP or optional, and to sub-network power-on/reset POST or off. options: off Command to immediately auto-booting or to the IP Specify TFTP options: The optional that functionality. The only affects the and these optional the U-Boot that to the and secondary when the command. If the U-Boot command as the the EREADY timeout when the to This pri_bootargs the that the when the command. If the the bootargs the
Troubleshooting the amount of SDRAM memory the PCI This when the the Monarch or Monarch. The If MB of SDRAM PCI. MB) sec_bootargs the that the secondary when using the command. If the the bootargs the secondary The these Each from the and of the TROUBLESHOOTING To the board to the located the front of the the to parity, the while holding the s Pressing the s forces based DOWNLOAD FORMATS The and S-Record as the following The consists of (which of sections Information each section including: the the section and that the of the memory of the section S-Record S-Record the S-Record This includes section and ASCII
ASCII American Information CPLD CPM Communication Compact Switched CPU Processing Unit CSA Association DDR Rate DMC Card EC Community ECC Error-correcting EIA EMC EMI Interference ESD ETSI Telecommunications FCC Ethernet GMII Interface GNU Not Unix GPL C Inter-integrated IEC International JTAG Action LED Light-emitting MAC Access MII Interface MTBF Mean NEBS Network PCI PHY Physical Interface PLCC Leaded Chip PLD PLL Phase-locked PMC PCI Card POST PCI Card RISC Reduced Instruction Computing Section
Acronyms: RMA Authorization RTC Clock SDRAM Synchronous Access Memory SO-DIMM Memory SPD SROM Read Memory UART Universal UL USB Universal
PCIO (BRG) board CPLD ID ID, PPMC JP2 memory commands, PCI C Ethernet I/O cache, CPU memory MV64460 PCI the CPU USB writes to DMC top CPLD Ethernet (P1) assignments DMC overview, PMC PCI assignments (P2) assignments of CPLD to CPU cache memory features floating-point reference technical (DMC) board to installation troubleshooting DRAM reference EIA-232 I/O Emerson Ethernet commands, ESD Ethernet and features, of reference commands, to (HVR) I2C interface installation DMC PPMC of the (IER) (IPR) CPLD JTAG COP interface CPLD interface DMC MV64460 PMC DMC L1 and L2 cache DMC PCI (MSR) (MTBF) memory commands, Monarch auto-booting basic operation commands reference command-line interface
(continued) commands commands memory commands S-record other commands power-up/reset recovery commands TFTP booting troubleshooting typographic UBOOT commands inm rarpboot showpci tftpboot NVRAM memory PCI and ID interface PCI0 reference ID PLD (PVR) supply Ethernet ID ID (PIR) clock reference and CPLD (RCR) (RER) (ROER) boards RMA SDRAM. DRAM. and DMA (SDMA) I/O and DMC ROM DMC DMC PCI specifications mechanical CPU interface features IDMA PCI PCI and ID PCI interface PCI interfaces reference
(continued) SDRAM SROM timer/counters interface (TWSI) of of technical technical terminology commands, timer/counters troubleshooting DMC interface (TWSI) UL operating
Notes
Emerson Network The Business-Critical Continuity Emerson Network Computing WI USA US FAX: www.emersonembeddedcomputing.com AC Connectivity DC Computing N. C D. Integrated Switching Business-Critical Continuity, Emerson Network and the Emerson Network and service of Emerson Emerson Precision Cooling Services Protection